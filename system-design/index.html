<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>System Design Concepts - Manoj Satishkumar</title>
  <meta name="description" content="Interactive visual guide to system design concepts including Availability, Reliability, Scalability, and more.">
  <link rel="icon" href="/images/favicon.png" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link href="/lib/ionicons/css/ionicons.min.css" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0a0a0f;
      --bg-secondary: #12121a;
      --bg-tertiary: #1a1a25;
      --bg-card: #16161f;
      --text-primary: #ffffff;
      --text-secondary: #a0a0b0;
      --text-muted: #606070;
      --accent-blue: #3b82f6;
      --accent-purple: #8b5cf6;
      --accent-pink: #ec4899;
      --accent-green: #10b981;
      --accent-orange: #f59e0b;
      --accent-red: #ef4444;
      --accent-cyan: #06b6d4;
      --border-color: rgba(255,255,255,0.08);
      --glow-blue: rgba(59, 130, 246, 0.3);
      --glow-purple: rgba(139, 92, 246, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Animated Background */
    .bg-pattern {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(16, 185, 129, 0.05) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    .grid-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: 
        linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
      background-size: 60px 60px;
      pointer-events: none;
      z-index: 0;
    }

    /* Header */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: rgba(10, 10, 15, 0.9);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 24px;
      z-index: 1000;
    }

    .header-logo {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      color: var(--text-primary);
    }

    .header-logo img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
    }

    .header-logo span {
      font-weight: 600;
      font-size: 1rem;
    }

    .header-title {
      margin-left: auto;
      margin-right: auto;
      font-size: 1.1rem;
      font-weight: 600;
      background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .header-nav {
      display: flex;
      gap: 16px;
    }

    .header-nav a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.9rem;
      transition: color 0.2s;
    }

    .header-nav a:hover {
      color: var(--text-primary);
    }

    /* Main Layout */
    .main-container {
      display: flex;
      padding-top: 60px;
      min-height: 100vh;
      position: relative;
      z-index: 1;
    }

    /* Sidebar - Master View */
    .sidebar {
      width: 320px;
      height: calc(100vh - 60px);
      position: fixed;
      left: 0;
      top: 60px;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border-color);
      overflow-y: auto;
      padding: 20px 0;
    }

    .sidebar::-webkit-scrollbar {
      width: 6px;
    }

    .sidebar::-webkit-scrollbar-track {
      background: transparent;
    }

    .sidebar::-webkit-scrollbar-thumb {
      background: var(--border-color);
      border-radius: 3px;
    }

    .sidebar-header {
      padding: 0 20px 20px;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 16px;
    }

    .sidebar-header h2 {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .sidebar-search {
      width: 100%;
      padding: 10px 14px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 0.9rem;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .sidebar-search:focus {
      border-color: var(--accent-blue);
      box-shadow: 0 0 0 3px var(--glow-blue);
    }

    .sidebar-search::placeholder {
      color: var(--text-muted);
    }

    /* Concept Categories */
    .category {
      margin-bottom: 8px;
    }

    .category-header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 20px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .category-header:hover {
      background: var(--bg-tertiary);
    }

    .category-icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
    }

    .category-name {
      flex: 1;
      font-weight: 500;
      font-size: 0.95rem;
    }

    .category-count {
      font-size: 0.75rem;
      color: var(--text-muted);
      background: var(--bg-tertiary);
      padding: 2px 8px;
      border-radius: 10px;
    }

    .category-arrow {
      color: var(--text-muted);
      transition: transform 0.2s;
    }

    .category.expanded .category-arrow {
      transform: rotate(90deg);
    }

    .category-items {
      display: none;
      padding-left: 20px;
    }

    .category.expanded .category-items {
      display: block;
    }

    /* Concept Items */
    .concept-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 20px 10px 32px;
      cursor: pointer;
      transition: all 0.2s;
      border-left: 2px solid transparent;
      position: relative;
    }

    .concept-item::before {
      content: '';
      position: absolute;
      left: 20px;
      top: 50%;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--text-muted);
      transform: translateY(-50%);
      transition: all 0.2s;
    }

    .concept-item:hover {
      background: var(--bg-tertiary);
    }

    .concept-item:hover::before {
      background: var(--accent-blue);
    }

    .concept-item.active {
      background: rgba(59, 130, 246, 0.1);
      border-left-color: var(--accent-blue);
    }

    .concept-item.active::before {
      background: var(--accent-blue);
      box-shadow: 0 0 8px var(--accent-blue);
    }

    .concept-item span {
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .concept-item.active span {
      color: var(--text-primary);
      font-weight: 500;
    }

    /* Detail View */
    .detail-view {
      flex: 1;
      margin-left: 320px;
      padding: 40px;
      min-height: calc(100vh - 60px);
    }

    .detail-container {
      max-width: 1000px;
      margin: 0 auto;
    }

    /* Welcome State */
    .welcome-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 60vh;
      text-align: center;
    }

    .welcome-icon {
      width: 120px;
      height: 120px;
      background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
      border-radius: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      margin-bottom: 32px;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .welcome-state h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 16px;
      background: linear-gradient(135deg, var(--text-primary), var(--text-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .welcome-state p {
      font-size: 1.1rem;
      color: var(--text-secondary);
      max-width: 500px;
      line-height: 1.7;
    }

    /* Concept Detail Content */
    .concept-detail {
      display: none;
      animation: fadeIn 0.4s ease;
    }

    .concept-detail.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .concept-header {
      margin-bottom: 40px;
    }

    .concept-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
      margin-bottom: 16px;
    }

    .concept-title {
      font-size: 2.8rem;
      font-weight: 800;
      margin-bottom: 16px;
      line-height: 1.2;
    }

    .concept-subtitle {
      font-size: 1.2rem;
      color: var(--text-secondary);
      line-height: 1.6;
      max-width: 700px;
    }

    /* Visual Diagram */
    .visual-diagram {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 40px;
      position: relative;
      overflow: hidden;
    }

    .visual-diagram::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple), var(--accent-pink));
    }

    .diagram-title {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: var(--text-muted);
      margin-bottom: 24px;
    }

    .diagram-content {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 300px;
    }

    /* Definition Section */
    .section {
      margin-bottom: 40px;
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 20px;
      color: var(--text-primary);
    }

    .section-title .icon {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
    }

    .section-content {
      color: var(--text-secondary);
      font-size: 1rem;
      line-height: 1.8;
    }

    .section-content p {
      margin-bottom: 16px;
    }

    /* Key Points */
    .key-points {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 24px;
    }

    .key-point {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 24px;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .key-point::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--accent-blue);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .key-point:hover {
      transform: translateY(-4px);
      border-color: var(--accent-blue);
      box-shadow: 0 10px 40px rgba(59, 130, 246, 0.1);
    }

    .key-point:hover::before {
      opacity: 1;
    }

    .key-point-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      margin-bottom: 16px;
    }

    .key-point h4 {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--text-primary);
    }

    .key-point p {
      font-size: 0.9rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* Strategies List */
    .strategies-list {
      list-style: none;
      margin-top: 20px;
    }

    .strategy-item {
      display: flex;
      gap: 16px;
      padding: 20px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      margin-bottom: 12px;
      transition: all 0.3s;
      cursor: pointer;
    }

    .strategy-item:hover {
      border-color: var(--accent-purple);
      background: rgba(139, 92, 246, 0.05);
    }

    .strategy-number {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.9rem;
      flex-shrink: 0;
    }

    .strategy-content h4 {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 6px;
      color: var(--text-primary);
    }

    .strategy-content p {
      font-size: 0.9rem;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    /* Formula Box */
    .formula-box {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
      border: 1px solid rgba(59, 130, 246, 0.3);
      border-radius: 16px;
      padding: 32px;
      text-align: center;
      margin: 24px 0;
    }

    .formula-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .formula {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.4rem;
      font-weight: 500;
      color: var(--accent-blue);
    }

    /* Metrics Table */
    .metrics-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .metrics-table th,
    .metrics-table td {
      padding: 16px;
      text-align: left;
      border-bottom: 1px solid var(--border-color);
    }

    .metrics-table th {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text-muted);
      font-weight: 600;
    }

    .metrics-table td {
      font-size: 0.95rem;
      color: var(--text-secondary);
    }

    .metrics-table tr:hover td {
      background: var(--bg-tertiary);
    }

    .metric-value {
      font-family: 'JetBrains Mono', monospace;
      font-weight: 600;
      color: var(--accent-green);
    }

    /* Interactive Nodes (Mind Map) */
    .mind-map {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }

    .mind-map-center {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      font-weight: 700;
      font-size: 1rem;
      text-align: center;
      position: relative;
      z-index: 2;
    }

    .mind-map-center::before {
      content: '';
      position: absolute;
      inset: -4px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple), var(--accent-pink));
      z-index: -1;
      animation: rotate 4s linear infinite;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .mind-map-center::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: var(--bg-card);
      z-index: -1;
    }

    .mind-map-nodes {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      justify-content: center;
      max-width: 700px;
    }

    .mind-node {
      padding: 14px 24px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: 30px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
    }

    .mind-node::before {
      content: '';
      position: absolute;
      top: -20px;
      left: 50%;
      width: 1px;
      height: 20px;
      background: var(--border-color);
    }

    .mind-node:hover {
      border-color: var(--accent-cyan);
      background: rgba(6, 182, 212, 0.1);
      transform: scale(1.05);
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .sidebar {
        width: 280px;
      }
      .detail-view {
        margin-left: 280px;
        padding: 30px;
      }
    }

    @media (max-width: 768px) {
      .sidebar {
        position: relative;
        width: 100%;
        height: auto;
        border-right: none;
        border-bottom: 1px solid var(--border-color);
      }
      .detail-view {
        margin-left: 0;
        padding: 24px;
      }
      .main-container {
        flex-direction: column;
      }
      .concept-title {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <div class="bg-pattern"></div>
  <div class="grid-overlay"></div>

  <!-- Header -->
  <header class="header">
    <a href="/" class="header-logo">
      <img src="/images/me_circle.png" alt="Manoj">
      <span>Manoj Satishkumar</span>
    </a>
    <span class="header-title">System Design Concepts</span>
    <nav class="header-nav">
      <a href="/">Portfolio</a>
      <a href="/blog">Blog</a>
    </nav>
  </header>

  <div class="main-container">
    <!-- Sidebar - Master View -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2>Concepts Library</h2>
        <input type="text" class="sidebar-search" placeholder="Search concepts..." id="searchInput" oninput="filterConcepts()">
      </div>

      <!-- Core Principles -->
      <div class="category expanded" data-category="core">
        <div class="category-header" onclick="toggleCategory(this.parentElement)">
          <div class="category-icon" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">‚ö°</div>
          <span class="category-name">Core Principles</span>
          <span class="category-count">8</span>
          <span class="category-arrow">‚Ä∫</span>
        </div>
        <div class="category-items">
          <div class="concept-item" data-concept="availability" onclick="showConcept('availability')">
            <span>Availability</span>
          </div>
          <div class="concept-item" data-concept="reliability" onclick="showConcept('reliability')">
            <span>Reliability</span>
          </div>
          <div class="concept-item" data-concept="scalability" onclick="showConcept('scalability')">
            <span>Scalability</span>
          </div>
          <div class="concept-item" data-concept="maintainability" onclick="showConcept('maintainability')">
            <span>Maintainability</span>
          </div>
          <div class="concept-item" data-concept="performance" onclick="showConcept('performance')">
            <span>Performance</span>
          </div>
          <div class="concept-item" data-concept="security" onclick="showConcept('security')">
            <span>Security</span>
          </div>
          <div class="concept-item" data-concept="observability" onclick="showConcept('observability')">
            <span>Observability</span>
          </div>
          <div class="concept-item" data-concept="cost-efficiency" onclick="showConcept('cost-efficiency')">
            <span>Cost Efficiency</span>
          </div>
        </div>
      </div>

      <!-- Data Management -->
      <div class="category" data-category="data">
        <div class="category-header" onclick="toggleCategory(this.parentElement)">
          <div class="category-icon" style="background: linear-gradient(135deg, #8b5cf6, #6d28d9);">üíæ</div>
          <span class="category-name">Data Management</span>
          <span class="category-count">15</span>
          <span class="category-arrow">‚Ä∫</span>
        </div>
        <div class="category-items">
          <div class="concept-item" data-concept="consistency" onclick="showConcept('consistency')">
            <span>Consistency</span>
          </div>
          <div class="concept-item" data-concept="partitioning" onclick="showConcept('partitioning')">
            <span>Partitioning</span>
          </div>
          <div class="concept-item" data-concept="replication" onclick="showConcept('replication')">
            <span>Replication</span>
          </div>
          <div class="concept-item" data-concept="caching" onclick="showConcept('caching')">
            <span>Caching</span>
          </div>
          <div class="concept-item" data-concept="cap-theorem" onclick="showConcept('cap-theorem')">
            <span>CAP Theorem</span>
          </div>
          <div class="concept-item" data-concept="acid" onclick="showConcept('acid')">
            <span>ACID Properties</span>
          </div>
          <div class="concept-item" data-concept="data-modeling" onclick="showConcept('data-modeling')">
            <span>Data Modeling</span>
          </div>
          <div class="concept-item" data-concept="schema-evolution" onclick="showConcept('schema-evolution')">
            <span>Schema Evolution</span>
          </div>
          <div class="concept-item" data-concept="indexing-strategies" onclick="showConcept('indexing-strategies')">
            <span>Indexing Strategies</span>
          </div>
          <div class="concept-item" data-concept="data-migration" onclick="showConcept('data-migration')">
            <span>Data Migration</span>
          </div>
          <div class="concept-item" data-concept="backup-restore" onclick="showConcept('backup-restore')">
            <span>Backup & Restore</span>
          </div>
          <div class="concept-item" data-concept="data-retention" onclick="showConcept('data-retention')">
            <span>Data Retention & Archival</span>
          </div>
          <div class="concept-item" data-concept="eventual-consistency" onclick="showConcept('eventual-consistency')">
            <span>Eventual Consistency</span>
          </div>
          <div class="concept-item" data-concept="idempotency" onclick="showConcept('idempotency')">
            <span>Idempotency</span>
          </div>
          <div class="concept-item" data-concept="data-privacy" onclick="showConcept('data-privacy')">
            <span>Data Privacy & Compliance</span>
          </div>
        </div>
      </div>

      <!-- Architecture Patterns -->
      <div class="category" data-category="patterns">
        <div class="category-header" onclick="toggleCategory(this.parentElement)">
          <div class="category-icon" style="background: linear-gradient(135deg, #10b981, #059669);">üèóÔ∏è</div>
          <span class="category-name">Architecture Patterns</span>
          <span class="category-count">14</span>
          <span class="category-arrow">‚Ä∫</span>
        </div>
        <div class="category-items">
          <div class="concept-item" data-concept="microservices" onclick="showConcept('microservices')">
            <span>Microservices</span>
          </div>
          <div class="concept-item" data-concept="load-balancing" onclick="showConcept('load-balancing')">
            <span>Load Balancing</span>
          </div>
          <div class="concept-item" data-concept="message-queues" onclick="showConcept('message-queues')">
            <span>Message Queues</span>
          </div>
          <div class="concept-item" data-concept="api-gateway" onclick="showConcept('api-gateway')">
            <span>API Gateway</span>
          </div>
          <div class="concept-item" data-concept="cdn" onclick="showConcept('cdn')">
            <span>CDN</span>
          </div>
          <div class="concept-item" data-concept="database-sharding" onclick="showConcept('database-sharding')">
            <span>Database Sharding</span>
          </div>
          <div class="concept-item" data-concept="monolith-modular" onclick="showConcept('monolith-modular')">
            <span>Monolith vs Modular Monolith</span>
          </div>
          <div class="concept-item" data-concept="event-driven" onclick="showConcept('event-driven')">
            <span>Event-Driven Architecture</span>
          </div>
          <div class="concept-item" data-concept="cqrs" onclick="showConcept('cqrs')">
            <span>CQRS</span>
          </div>
          <div class="concept-item" data-concept="saga-pattern" onclick="showConcept('saga-pattern')">
            <span>Saga Pattern</span>
          </div>
          <div class="concept-item" data-concept="hexagonal-architecture" onclick="showConcept('hexagonal-architecture')">
            <span>Hexagonal / Clean Architecture</span>
          </div>
          <div class="concept-item" data-concept="service-mesh" onclick="showConcept('service-mesh')">
            <span>Service Mesh</span>
          </div>
          <div class="concept-item" data-concept="bff" onclick="showConcept('bff')">
            <span>Backend for Frontend (BFF)</span>
          </div>
          <div class="concept-item" data-concept="strangler-fig" onclick="showConcept('strangler-fig')">
            <span>Strangler Fig Pattern</span>
          </div>
        </div>
      </div>

      <!-- Resilience -->
      <div class="category" data-category="resilience">
        <div class="category-header" onclick="toggleCategory(this.parentElement)">
          <div class="category-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">üõ°Ô∏è</div>
          <span class="category-name">Resilience</span>
          <span class="category-count">12</span>
          <span class="category-arrow">‚Ä∫</span>
        </div>
        <div class="category-items">
          <div class="concept-item" data-concept="fault-tolerance" onclick="showConcept('fault-tolerance')">
            <span>Fault Tolerance</span>
          </div>
          <div class="concept-item" data-concept="circuit-breaker" onclick="showConcept('circuit-breaker')">
            <span>Circuit Breaker</span>
          </div>
          <div class="concept-item" data-concept="rate-limiting" onclick="showConcept('rate-limiting')">
            <span>Rate Limiting</span>
          </div>
          <div class="concept-item" data-concept="graceful-degradation" onclick="showConcept('graceful-degradation')">
            <span>Graceful Degradation</span>
          </div>
          <div class="concept-item" data-concept="disaster-recovery" onclick="showConcept('disaster-recovery')">
            <span>Disaster Recovery</span>
          </div>
          <div class="concept-item" data-concept="retries-backoff" onclick="showConcept('retries-backoff')">
            <span>Retries with Backoff</span>
          </div>
          <div class="concept-item" data-concept="timeouts" onclick="showConcept('timeouts')">
            <span>Timeouts</span>
          </div>
          <div class="concept-item" data-concept="bulkheads" onclick="showConcept('bulkheads')">
            <span>Bulkheads</span>
          </div>
          <div class="concept-item" data-concept="health-checks" onclick="showConcept('health-checks')">
            <span>Health Checks</span>
          </div>
          <div class="concept-item" data-concept="failover" onclick="showConcept('failover')">
            <span>Failover</span>
          </div>
          <div class="concept-item" data-concept="chaos-engineering" onclick="showConcept('chaos-engineering')">
            <span>Chaos Engineering</span>
          </div>
          <div class="concept-item" data-concept="auto-scaling" onclick="showConcept('auto-scaling')">
            <span>Auto Scaling Policies</span>
          </div>
        </div>
      </div>

      <!-- Security -->
      <div class="category" data-category="security">
        <div class="category-header" onclick="toggleCategory(this.parentElement)">
          <div class="category-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">üîê</div>
          <span class="category-name">Security</span>
          <span class="category-count">7</span>
          <span class="category-arrow">‚Ä∫</span>
        </div>
        <div class="category-items">
          <div class="concept-item" data-concept="auth-authz" onclick="showConcept('auth-authz')">
            <span>Authentication vs Authorization</span>
          </div>
          <div class="concept-item" data-concept="oauth-jwt" onclick="showConcept('oauth-jwt')">
            <span>OAuth / JWT</span>
          </div>
          <div class="concept-item" data-concept="secrets-management" onclick="showConcept('secrets-management')">
            <span>Secrets Management</span>
          </div>
          <div class="concept-item" data-concept="encryption" onclick="showConcept('encryption')">
            <span>Encryption at Rest & in Transit</span>
          </div>
          <div class="concept-item" data-concept="secure-apis" onclick="showConcept('secure-apis')">
            <span>Secure APIs (OWASP Top 10)</span>
          </div>
          <div class="concept-item" data-concept="rate-vs-throttle" onclick="showConcept('rate-vs-throttle')">
            <span>Rate Limiting vs Throttling</span>
          </div>
          <div class="concept-item" data-concept="zero-trust" onclick="showConcept('zero-trust')">
            <span>Zero Trust Architecture</span>
          </div>
        </div>
      </div>

      <!-- Observability & Monitoring -->
      <div class="category" data-category="observability">
        <div class="category-header" onclick="toggleCategory(this.parentElement)">
          <div class="category-icon" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">üîç</div>
          <span class="category-name">Observability & Monitoring</span>
          <span class="category-count">7</span>
          <span class="category-arrow">‚Ä∫</span>
        </div>
        <div class="category-items">
          <div class="concept-item" data-concept="metrics" onclick="showConcept('metrics')">
            <span>Metrics</span>
          </div>
          <div class="concept-item" data-concept="distributed-tracing" onclick="showConcept('distributed-tracing')">
            <span>Distributed Tracing</span>
          </div>
          <div class="concept-item" data-concept="structured-logging" onclick="showConcept('structured-logging')">
            <span>Structured Logging</span>
          </div>
          <div class="concept-item" data-concept="alerting-slos" onclick="showConcept('alerting-slos')">
            <span>Alerting & SLOs</span>
          </div>
          <div class="concept-item" data-concept="slis-error-budgets" onclick="showConcept('slis-error-budgets')">
            <span>SLIs & Error Budgets</span>
          </div>
          <div class="concept-item" data-concept="dashboards" onclick="showConcept('dashboards')">
            <span>Dashboards</span>
          </div>
          <div class="concept-item" data-concept="rca" onclick="showConcept('rca')">
            <span>Root Cause Analysis (RCA)</span>
          </div>
        </div>
      </div>

      <!-- Performance & Optimization -->
      <div class="category" data-category="performance-opt">
        <div class="category-header" onclick="toggleCategory(this.parentElement)">
          <div class="category-icon" style="background: linear-gradient(135deg, #ec4899, #db2777);">üöÄ</div>
          <span class="category-name">Performance & Optimization</span>
          <span class="category-count">7</span>
          <span class="category-arrow">‚Ä∫</span>
        </div>
        <div class="category-items">
          <div class="concept-item" data-concept="latency-throughput" onclick="showConcept('latency-throughput')">
            <span>Latency vs Throughput</span>
          </div>
          <div class="concept-item" data-concept="async-processing" onclick="showConcept('async-processing')">
            <span>Async Processing</span>
          </div>
          <div class="concept-item" data-concept="connection-pooling" onclick="showConcept('connection-pooling')">
            <span>Connection Pooling</span>
          </div>
          <div class="concept-item" data-concept="batching" onclick="showConcept('batching')">
            <span>Batching</span>
          </div>
          <div class="concept-item" data-concept="compression" onclick="showConcept('compression')">
            <span>Compression</span>
          </div>
          <div class="concept-item" data-concept="cold-start" onclick="showConcept('cold-start')">
            <span>Cold Start Optimization</span>
          </div>
          <div class="concept-item" data-concept="profiling" onclick="showConcept('profiling')">
            <span>Profiling & Benchmarking</span>
          </div>
        </div>
      </div>

      <!-- DevOps & Operations -->
      <div class="category" data-category="devops">
        <div class="category-header" onclick="toggleCategory(this.parentElement)">
          <div class="category-icon" style="background: linear-gradient(135deg, #84cc16, #65a30d);">‚öôÔ∏è</div>
          <span class="category-name">DevOps & Operations</span>
          <span class="category-count">7</span>
          <span class="category-arrow">‚Ä∫</span>
        </div>
        <div class="category-items">
          <div class="concept-item" data-concept="cicd" onclick="showConcept('cicd')">
            <span>CI/CD Pipelines</span>
          </div>
          <div class="concept-item" data-concept="iac" onclick="showConcept('iac')">
            <span>Infrastructure as Code (IaC)</span>
          </div>
          <div class="concept-item" data-concept="deployment-strategies" onclick="showConcept('deployment-strategies')">
            <span>Blue-Green / Canary Deployments</span>
          </div>
          <div class="concept-item" data-concept="rollbacks" onclick="showConcept('rollbacks')">
            <span>Rollbacks</span>
          </div>
          <div class="concept-item" data-concept="environment-parity" onclick="showConcept('environment-parity')">
            <span>Environment Parity</span>
          </div>
          <div class="concept-item" data-concept="config-management" onclick="showConcept('config-management')">
            <span>Config Management</span>
          </div>
          <div class="concept-item" data-concept="feature-flags" onclick="showConcept('feature-flags')">
            <span>Feature Flags</span>
          </div>
        </div>
      </div>

      <!-- API & Integration -->
      <div class="category" data-category="api">
        <div class="category-header" onclick="toggleCategory(this.parentElement)">
          <div class="category-icon" style="background: linear-gradient(135deg, #6366f1, #4f46e5);">üì¶</div>
          <span class="category-name">API & Integration</span>
          <span class="category-count">7</span>
          <span class="category-arrow">‚Ä∫</span>
        </div>
        <div class="category-items">
          <div class="concept-item" data-concept="api-versioning" onclick="showConcept('api-versioning')">
            <span>API Versioning</span>
          </div>
          <div class="concept-item" data-concept="contract-testing" onclick="showConcept('contract-testing')">
            <span>Contract Testing</span>
          </div>
          <div class="concept-item" data-concept="idempotent-apis" onclick="showConcept('idempotent-apis')">
            <span>Idempotent APIs</span>
          </div>
          <div class="concept-item" data-concept="pagination" onclick="showConcept('pagination')">
            <span>Pagination & Filtering</span>
          </div>
          <div class="concept-item" data-concept="webhooks" onclick="showConcept('webhooks')">
            <span>Webhooks</span>
          </div>
          <div class="concept-item" data-concept="grpc-rest" onclick="showConcept('grpc-rest')">
            <span>gRPC vs REST</span>
          </div>
          <div class="concept-item" data-concept="backward-compatibility" onclick="showConcept('backward-compatibility')">
            <span>Backward Compatibility</span>
          </div>
        </div>
      </div>

      <!-- Scalability Patterns -->
      <div class="category" data-category="scalability-patterns">
        <div class="category-header" onclick="toggleCategory(this.parentElement)">
          <div class="category-icon" style="background: linear-gradient(135deg, #f97316, #ea580c);">üìà</div>
          <span class="category-name">Scalability Patterns</span>
          <span class="category-count">6</span>
          <span class="category-arrow">‚Ä∫</span>
        </div>
        <div class="category-items">
          <div class="concept-item" data-concept="horizontal-vertical" onclick="showConcept('horizontal-vertical')">
            <span>Horizontal vs Vertical Scaling</span>
          </div>
          <div class="concept-item" data-concept="stateless-services" onclick="showConcept('stateless-services')">
            <span>Stateless Services</span>
          </div>
          <div class="concept-item" data-concept="read-replicas" onclick="showConcept('read-replicas')">
            <span>Read Replicas</span>
          </div>
          <div class="concept-item" data-concept="write-amplification" onclick="showConcept('write-amplification')">
            <span>Write Amplification</span>
          </div>
          <div class="concept-item" data-concept="hotspot-avoidance" onclick="showConcept('hotspot-avoidance')">
            <span>Hotspot Avoidance</span>
          </div>
          <div class="concept-item" data-concept="traffic-shaping" onclick="showConcept('traffic-shaping')">
            <span>Traffic Shaping</span>
          </div>
        </div>
      </div>
    </aside>

    <!-- Detail View -->
    <main class="detail-view">
      <div class="detail-container">
        <!-- Welcome State -->
        <div class="welcome-state" id="welcomeState">
          <div class="welcome-icon">üß†</div>
          <h1>System Design Concepts</h1>
          <p>Explore comprehensive visual explanations of essential system design principles. Select a concept from the sidebar to begin your learning journey.</p>
        </div>

        <!-- Concept Details will be inserted here dynamically -->
        <div id="conceptContainer"></div>
      </div>
    </main>
  </div>

  <script>
    // Concept data
    const concepts = {
      availability: {
        title: "Availability",
        subtitle: "The percentage of time a system remains operational and accessible to users under normal conditions.",
        badge: { text: "Core Principle", color: "#3b82f6", bg: "rgba(59, 130, 246, 0.15)" },
        color: "#3b82f6",
        diagram: `
          <style>
            .availability-viz {
              display: flex;
              flex-direction: column;
              gap: 30px;
              padding: 10px;
            }
            .avail-section {
              display: flex;
              gap: 30px;
              align-items: flex-start;
            }
            @media (max-width: 900px) {
              .avail-section { flex-direction: column; }
            }
            
            /* Server Cluster Visualization */
            .server-cluster {
              flex: 1;
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(59, 130, 246, 0.2);
            }
            .cluster-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .cluster-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #3b82f6;
              border-radius: 50%;
            }
            .servers-row {
              display: flex;
              gap: 12px;
              margin-bottom: 20px;
            }
            .server-box {
              flex: 1;
              background: rgba(16, 185, 129, 0.1);
              border: 1px solid rgba(16, 185, 129, 0.3);
              border-radius: 10px;
              padding: 16px 12px;
              text-align: center;
              position: relative;
              transition: all 0.3s ease;
            }
            .server-box.primary {
              background: rgba(59, 130, 246, 0.15);
              border-color: rgba(59, 130, 246, 0.4);
            }
            .server-box.standby {
              background: rgba(139, 92, 246, 0.1);
              border-color: rgba(139, 92, 246, 0.3);
            }
            .server-box.failed {
              background: rgba(239, 68, 68, 0.1);
              border-color: rgba(239, 68, 68, 0.4);
              animation: serverFail 2s ease-in-out infinite;
            }
            @keyframes serverFail {
              0%, 100% { opacity: 0.4; }
              50% { opacity: 0.7; }
            }
            .server-icon {
              font-size: 1.5rem;
              margin-bottom: 6px;
            }
            .server-label {
              font-size: 0.7rem;
              color: #a0a0b0;
              text-transform: uppercase;
              letter-spacing: 0.5px;
            }
            .server-status {
              position: absolute;
              top: -6px;
              right: -6px;
              width: 16px;
              height: 16px;
              border-radius: 50%;
              background: #10b981;
              border: 2px solid #0f1520;
              animation: pulse 2s infinite;
            }
            .server-status.standby-status {
              background: #8b5cf6;
              animation: none;
            }
            .server-status.failed-status {
              background: #ef4444;
              animation: none;
            }
            @keyframes pulse {
              0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.5); }
              50% { box-shadow: 0 0 0 6px rgba(16, 185, 129, 0); }
            }
            .failover-arrow {
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 8px;
              color: #6b7280;
              font-size: 0.75rem;
              margin-top: 8px;
              padding: 10px;
              background: rgba(139, 92, 246, 0.1);
              border-radius: 8px;
              border: 1px dashed rgba(139, 92, 246, 0.3);
            }
            .failover-arrow span {
              animation: arrowMove 1.5s ease-in-out infinite;
            }
            @keyframes arrowMove {
              0%, 100% { transform: translateX(0); }
              50% { transform: translateX(4px); }
            }
            
            /* Uptime Timeline */
            .uptime-timeline {
              flex: 1;
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .timeline-header {
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-bottom: 16px;
            }
            .timeline-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .timeline-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .live-badge {
              font-size: 0.65rem;
              padding: 4px 10px;
              background: rgba(16, 185, 129, 0.2);
              color: #10b981;
              border-radius: 20px;
              display: flex;
              align-items: center;
              gap: 5px;
            }
            .live-badge::before {
              content: '';
              width: 6px;
              height: 6px;
              background: #10b981;
              border-radius: 50%;
              animation: livePulse 1s infinite;
            }
            @keyframes livePulse {
              0%, 100% { opacity: 1; }
              50% { opacity: 0.3; }
            }
            .timeline-bar {
              height: 40px;
              background: #1a1f2e;
              border-radius: 8px;
              display: flex;
              overflow: hidden;
              margin-bottom: 12px;
            }
            .timeline-segment {
              height: 100%;
              display: flex;
              align-items: center;
              justify-content: center;
              font-size: 0.6rem;
              font-weight: 600;
              text-transform: uppercase;
              letter-spacing: 0.5px;
            }
            .segment-up {
              background: linear-gradient(90deg, #10b981, #059669);
              color: white;
              flex: 99.99;
            }
            .segment-down {
              background: linear-gradient(90deg, #ef4444, #dc2626);
              color: white;
              flex: 0.01;
              min-width: 3px;
            }
            .timeline-labels {
              display: flex;
              justify-content: space-between;
              font-size: 0.7rem;
              color: #6b7280;
            }
            .uptime-calc {
              margin-top: 16px;
              padding: 12px;
              background: rgba(16, 185, 129, 0.1);
              border-radius: 8px;
              text-align: center;
              font-family: 'JetBrains Mono', monospace;
              font-size: 0.85rem;
              color: #10b981;
            }
            
            /* Nines Table */
            .nines-section {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .nines-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .nines-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .nines-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 10px;
            }
            @media (max-width: 700px) {
              .nines-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .nine-card {
              background: rgba(30, 35, 50, 0.8);
              border-radius: 12px;
              padding: 16px;
              text-align: center;
              border: 1px solid rgba(255, 255, 255, 0.05);
              transition: all 0.3s ease;
            }
            .nine-card:hover {
              transform: translateY(-4px);
              border-color: rgba(245, 158, 11, 0.3);
            }
            .nine-card.highlight {
              border-color: rgba(16, 185, 129, 0.5);
              background: rgba(16, 185, 129, 0.1);
            }
            .nine-percent {
              font-size: 1.4rem;
              font-weight: 700;
              margin-bottom: 4px;
            }
            .nine-card:nth-child(1) .nine-percent { color: #ef4444; }
            .nine-card:nth-child(2) .nine-percent { color: #f59e0b; }
            .nine-card:nth-child(3) .nine-percent { color: #3b82f6; }
            .nine-card:nth-child(4) .nine-percent { color: #10b981; }
            .nine-name {
              font-size: 0.7rem;
              color: #6b7280;
              text-transform: uppercase;
              letter-spacing: 0.5px;
              margin-bottom: 10px;
            }
            .nine-downtime {
              font-size: 0.75rem;
              color: #e5e5e5;
              font-weight: 500;
              margin-bottom: 4px;
            }
            .nine-context {
              font-size: 0.65rem;
              color: #888;
              line-height: 1.4;
            }
            .nine-bar {
              height: 4px;
              background: #1a1f2e;
              border-radius: 2px;
              margin-top: 10px;
              overflow: hidden;
            }
            .nine-bar-fill {
              height: 100%;
              border-radius: 2px;
              transition: width 1s ease;
            }
            .nine-card:nth-child(1) .nine-bar-fill { width: 99%; background: #ef4444; }
            .nine-card:nth-child(2) .nine-bar-fill { width: 99.9%; background: #f59e0b; }
            .nine-card:nth-child(3) .nine-bar-fill { width: 99.99%; background: #3b82f6; }
            .nine-card:nth-child(4) .nine-bar-fill { width: 100%; background: #10b981; }
          </style>
          
          <div class="availability-viz">
            <!-- Top Row: Server Cluster + Uptime Timeline -->
            <div class="avail-section">
              <!-- Server Redundancy Visualization -->
              <div class="server-cluster">
                <div class="cluster-title">High Availability Cluster</div>
                <div class="servers-row">
                  <div class="server-box primary">
                    <div class="server-status"></div>
                    <div class="server-icon">üñ•Ô∏è</div>
                    <div class="server-label">Primary</div>
                  </div>
                  <div class="server-box primary">
                    <div class="server-status"></div>
                    <div class="server-icon">üñ•Ô∏è</div>
                    <div class="server-label">Primary</div>
                  </div>
                  <div class="server-box failed">
                    <div class="server-status failed-status"></div>
                    <div class="server-icon">üí•</div>
                    <div class="server-label">Failed</div>
                  </div>
                  <div class="server-box standby">
                    <div class="server-status standby-status"></div>
                    <div class="server-icon">üîÑ</div>
                    <div class="server-label">Standby</div>
                  </div>
                </div>
                <div class="failover-arrow">
                  <span>‚Üí</span> Automatic failover activates standby when server fails <span>‚Üí</span>
                </div>
              </div>
              
              <!-- Uptime Timeline -->
              <div class="uptime-timeline">
                <div class="timeline-header">
                  <div class="timeline-title">Annual Uptime (99.99%)</div>
                  <div class="live-badge">LIVE</div>
                </div>
                <div class="timeline-bar">
                  <div class="timeline-segment segment-up">OPERATIONAL</div>
                  <div class="timeline-segment segment-down"></div>
                </div>
                <div class="timeline-labels">
                  <span>Jan 1</span>
                  <span>‚Üë 52 min downtime</span>
                  <span>Dec 31</span>
                </div>
                <div class="uptime-calc">
                  (525,600 min ‚àí 52 min) √∑ 525,600 √ó 100 = 99.99%
                </div>
              </div>
            </div>
            
            <!-- Bottom Row: The Nines -->
            <div class="nines-section">
              <div class="nines-title">"The Nines" ‚Äî Industry Availability Levels</div>
              <div class="nines-grid">
                <div class="nine-card">
                  <div class="nine-percent">99%</div>
                  <div class="nine-name">Two Nines</div>
                  <div class="nine-downtime">3.65 days/year</div>
                  <div class="nine-context">Internal tools, dev environments</div>
                  <div class="nine-bar"><div class="nine-bar-fill"></div></div>
                </div>
                <div class="nine-card">
                  <div class="nine-percent">99.9%</div>
                  <div class="nine-name">Three Nines</div>
                  <div class="nine-downtime">8.76 hours/year</div>
                  <div class="nine-context">Business apps, SaaS products</div>
                  <div class="nine-bar"><div class="nine-bar-fill"></div></div>
                </div>
                <div class="nine-card highlight">
                  <div class="nine-percent">99.99%</div>
                  <div class="nine-name">Four Nines</div>
                  <div class="nine-downtime">52.6 min/year</div>
                  <div class="nine-context">E-commerce, banking, healthcare</div>
                  <div class="nine-bar"><div class="nine-bar-fill"></div></div>
                </div>
                <div class="nine-card">
                  <div class="nine-percent">99.999%</div>
                  <div class="nine-name">Five Nines</div>
                  <div class="nine-downtime">5.26 min/year</div>
                  <div class="nine-context">Telecom, emergency services</div>
                  <div class="nine-bar"><div class="nine-bar-fill"></div></div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Availability</strong> measures the proportion of time a system is functional and working. It's typically expressed as a percentage of uptime over a given period (e.g., 99.9% availability means ~8.76 hours of downtime per year).</p>
          <p>High availability is crucial for systems where downtime directly impacts business revenue, user trust, or critical operations. It's often measured in "nines" ‚Äì each additional nine represents a 10x reduction in allowed downtime.</p>
        `,
        keyPoints: [
          { icon: "üîÑ", title: "Redundancy", desc: "Deploy multiple instances of critical components to eliminate single points of failure.", color: "#3b82f6" },
          { icon: "‚öñÔ∏è", title: "Load Balancing", desc: "Distribute traffic across multiple servers to prevent any single server from becoming overwhelmed.", color: "#8b5cf6" },
          { icon: "üîÄ", title: "Failover Mechanisms", desc: "Automatically switch to backup systems when primary systems fail.", color: "#10b981" },
          { icon: "‚ù§Ô∏è", title: "Health Monitoring", desc: "Continuously monitor system health and detect failures quickly to minimize downtime.", color: "#ef4444" }
        ],
        formula: "Availability = (Total Time - Downtime) / Total Time √ó 100%",
        strategies: [
          { title: "Active-Passive Failover", desc: "Maintain standby replicas that can take over when primary systems fail. The passive system monitors the active one and activates upon failure detection." },
          { title: "Active-Active Configuration", desc: "Run multiple active instances simultaneously, distributing load and providing immediate failover without switchover delay." },
          { title: "Geographic Distribution", desc: "Deploy across multiple data centers or cloud regions to survive regional outages and reduce latency for global users." },
          { title: "Automated Recovery", desc: "Implement self-healing mechanisms that automatically restart failed services, replace unhealthy instances, and restore system state." }
        ],
        metrics: [
          { level: "99%", downtime: "3.65 days/year", useCase: "Internal tools, batch processing" },
          { level: "99.9%", downtime: "8.76 hours/year", useCase: "Business applications" },
          { level: "99.99%", downtime: "52.6 minutes/year", useCase: "E-commerce, banking" },
          { level: "99.999%", downtime: "5.26 minutes/year", useCase: "Critical infrastructure" }
        ]
      },
      reliability: {
        title: "Reliability",
        subtitle: "The probability that a system will perform its intended function without failure for a specified period of time.",
        badge: { text: "Core Principle", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .reliability-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .reliability-row {
              display: flex;
              gap: 24px;
            }
            @media (max-width: 900px) {
              .reliability-row { flex-direction: column; }
            }
            
            /* MTBF/MTTR Timeline */
            .mtbf-section {
              flex: 2;
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(139, 92, 246, 0.2);
            }
            .mtbf-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .mtbf-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #8b5cf6;
              border-radius: 50%;
            }
            .timeline-track {
              position: relative;
              height: 60px;
              background: linear-gradient(90deg, #10b981 0%, #10b981 30%, #ef4444 30%, #ef4444 35%, #f59e0b 35%, #f59e0b 40%, #10b981 40%, #10b981 75%, #ef4444 75%, #ef4444 80%, #f59e0b 80%, #f59e0b 85%, #10b981 85%, #10b981 100%);
              border-radius: 8px;
              margin-bottom: 16px;
              overflow: hidden;
            }
            .timeline-labels-row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 8px;
            }
            .timeline-label {
              display: flex;
              align-items: center;
              gap: 6px;
              font-size: 0.7rem;
              color: #a0a0b0;
            }
            .label-dot {
              width: 10px;
              height: 10px;
              border-radius: 3px;
            }
            .label-dot.operational { background: #10b981; }
            .label-dot.failure { background: #ef4444; }
            .label-dot.recovery { background: #f59e0b; }
            .mtbf-metrics {
              display: grid;
              grid-template-columns: repeat(3, 1fr);
              gap: 12px;
              margin-top: 16px;
            }
            .mtbf-metric {
              background: rgba(30, 35, 50, 0.8);
              border-radius: 10px;
              padding: 14px;
              text-align: center;
              border: 1px solid rgba(255, 255, 255, 0.05);
            }
            .mtbf-metric-value {
              font-size: 1.3rem;
              font-weight: 700;
              margin-bottom: 4px;
            }
            .mtbf-metric:nth-child(1) .mtbf-metric-value { color: #10b981; }
            .mtbf-metric:nth-child(2) .mtbf-metric-value { color: #ef4444; }
            .mtbf-metric:nth-child(3) .mtbf-metric-value { color: #f59e0b; }
            .mtbf-metric-label {
              font-size: 0.7rem;
              color: #6b7280;
              text-transform: uppercase;
              letter-spacing: 0.5px;
            }
            
            /* Fault Handling Demo */
            .fault-demo {
              flex: 1;
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .fault-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .fault-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .fault-flow {
              display: flex;
              flex-direction: column;
              gap: 10px;
            }
            .fault-step {
              display: flex;
              align-items: center;
              gap: 12px;
              padding: 10px 14px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 8px;
              border-left: 3px solid;
              font-size: 0.85rem;
            }
            .fault-step:nth-child(1) { border-color: #ef4444; }
            .fault-step:nth-child(2) { border-color: #f59e0b; }
            .fault-step:nth-child(3) { border-color: #3b82f6; }
            .fault-step:nth-child(4) { border-color: #10b981; }
            .fault-step-icon {
              font-size: 1.1rem;
            }
            .fault-step-text {
              color: #e5e5e5;
            }
            .fault-arrow {
              text-align: center;
              color: #4b5563;
              font-size: 0.9rem;
            }
            
            /* Reliability Comparison */
            .reliability-compare {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .compare-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .compare-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .compare-grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 16px;
            }
            @media (max-width: 600px) {
              .compare-grid { grid-template-columns: 1fr; }
            }
            .compare-card {
              padding: 20px;
              border-radius: 12px;
              text-align: center;
            }
            .compare-card.brittle {
              background: rgba(239, 68, 68, 0.1);
              border: 1px solid rgba(239, 68, 68, 0.3);
            }
            .compare-card.reliable {
              background: rgba(16, 185, 129, 0.1);
              border: 1px solid rgba(16, 185, 129, 0.3);
            }
            .compare-icon {
              font-size: 2rem;
              margin-bottom: 10px;
            }
            .compare-label {
              font-weight: 600;
              margin-bottom: 12px;
              font-size: 0.95rem;
            }
            .compare-card.brittle .compare-label { color: #ef4444; }
            .compare-card.reliable .compare-label { color: #10b981; }
            .compare-items {
              display: flex;
              flex-direction: column;
              gap: 6px;
              text-align: left;
            }
            .compare-item {
              display: flex;
              align-items: center;
              gap: 8px;
              font-size: 0.8rem;
              color: #a0a0b0;
            }
            .compare-item-icon {
              font-size: 0.75rem;
            }
          </style>
          
          <div class="reliability-viz">
            <div class="reliability-row">
              <!-- MTBF/MTTR Timeline -->
              <div class="mtbf-section">
                <div class="mtbf-title">System Reliability Timeline</div>
                <div class="timeline-labels-row">
                  <div class="timeline-label"><div class="label-dot operational"></div> Operational</div>
                  <div class="timeline-label"><div class="label-dot failure"></div> Failure</div>
                  <div class="timeline-label"><div class="label-dot recovery"></div> Recovery</div>
                </div>
                <div class="timeline-track"></div>
                <div class="mtbf-metrics">
                  <div class="mtbf-metric">
                    <div class="mtbf-metric-value">720h</div>
                    <div class="mtbf-metric-label">MTBF (Mean Time Between Failures)</div>
                  </div>
                  <div class="mtbf-metric">
                    <div class="mtbf-metric-value">2.3h</div>
                    <div class="mtbf-metric-label">MTTF (Mean Time To Failure)</div>
                  </div>
                  <div class="mtbf-metric">
                    <div class="mtbf-metric-value">15min</div>
                    <div class="mtbf-metric-label">MTTR (Mean Time To Recovery)</div>
                  </div>
                </div>
              </div>
              
              <!-- Fault Handling Flow -->
              <div class="fault-demo">
                <div class="fault-title">Fault Handling Flow</div>
                <div class="fault-flow">
                  <div class="fault-step">
                    <span class="fault-step-icon">üí•</span>
                    <span class="fault-step-text">Failure Occurs</span>
                  </div>
                  <div class="fault-arrow">‚Üì</div>
                  <div class="fault-step">
                    <span class="fault-step-icon">üîî</span>
                    <span class="fault-step-text">Detection & Alert</span>
                  </div>
                  <div class="fault-arrow">‚Üì</div>
                  <div class="fault-step">
                    <span class="fault-step-icon">üîÑ</span>
                    <span class="fault-step-text">Automatic Retry/Failover</span>
                  </div>
                  <div class="fault-arrow">‚Üì</div>
                  <div class="fault-step">
                    <span class="fault-step-icon">‚úÖ</span>
                    <span class="fault-step-text">Service Restored</span>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Brittle vs Reliable Comparison -->
            <div class="reliability-compare">
              <div class="compare-title">Brittle System vs Reliable System</div>
              <div class="compare-grid">
                <div class="compare-card brittle">
                  <div class="compare-icon">üèöÔ∏è</div>
                  <div class="compare-label">Brittle System</div>
                  <div class="compare-items">
                    <div class="compare-item"><span class="compare-item-icon">‚úó</span> Single point of failure</div>
                    <div class="compare-item"><span class="compare-item-icon">‚úó</span> Cascading failures</div>
                    <div class="compare-item"><span class="compare-item-icon">‚úó</span> No error handling</div>
                    <div class="compare-item"><span class="compare-item-icon">‚úó</span> Data loss on crash</div>
                    <div class="compare-item"><span class="compare-item-icon">‚úó</span> Manual recovery only</div>
                  </div>
                </div>
                <div class="compare-card reliable">
                  <div class="compare-icon">üèõÔ∏è</div>
                  <div class="compare-label">Reliable System</div>
                  <div class="compare-items">
                    <div class="compare-item"><span class="compare-item-icon">‚úì</span> Redundant components</div>
                    <div class="compare-item"><span class="compare-item-icon">‚úì</span> Bulkhead isolation</div>
                    <div class="compare-item"><span class="compare-item-icon">‚úì</span> Graceful degradation</div>
                    <div class="compare-item"><span class="compare-item-icon">‚úì</span> Data durability</div>
                    <div class="compare-item"><span class="compare-item-icon">‚úì</span> Auto-recovery</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Reliability</strong> refers to a system's ability to consistently perform its intended functions correctly and without failure. Unlike availability which measures uptime, reliability focuses on correctness of operation.</p>
          <p>A reliable system handles hardware faults, software errors, and human mistakes gracefully. It maintains data integrity, provides consistent results, and recovers from failures without data loss.</p>
        `,
        keyPoints: [
          { icon: "üõ°Ô∏è", title: "Fault Tolerance", desc: "Design systems to continue operating properly even when components fail.", color: "#8b5cf6" },
          { icon: "‚úÖ", title: "Data Integrity", desc: "Ensure data remains accurate, consistent, and uncorrupted throughout its lifecycle.", color: "#10b981" },
          { icon: "üîç", title: "Error Detection", desc: "Implement comprehensive monitoring to detect and alert on errors quickly.", color: "#f59e0b" },
          { icon: "üß™", title: "Thorough Testing", desc: "Use extensive testing including chaos engineering to validate reliability.", color: "#ef4444" }
        ],
        formula: "MTBF = Total Operating Time / Number of Failures",
        strategies: [
          { title: "Redundant Components", desc: "Use redundancy at every level - hardware, network, data storage - to ensure no single failure causes system-wide issues." },
          { title: "Graceful Error Handling", desc: "Implement comprehensive error handling that logs issues, notifies operators, and provides meaningful feedback without crashing." },
          { title: "Chaos Engineering", desc: "Regularly inject failures into production systems to test and improve reliability under real-world conditions." },
          { title: "Immutable Infrastructure", desc: "Use infrastructure as code and immutable deployments to ensure consistent, reproducible, and reliable environments." }
        ],
        metrics: [
          { level: "MTBF", downtime: "Mean Time Between Failures", useCase: "Average time system operates before failure" },
          { level: "MTTR", downtime: "Mean Time To Recovery", useCase: "Average time to restore after failure" },
          { level: "Error Rate", downtime: "Errors per request", useCase: "Percentage of failed operations" },
          { level: "Data Loss", downtime: "RPO/RTO metrics", useCase: "Data recovery point/time objectives" }
        ]
      },
      scalability: {
        title: "Scalability",
        subtitle: "The capability of a system to handle growing amounts of work by adding resources to the system.",
        badge: { text: "Core Principle", color: "#10b981", bg: "rgba(16, 185, 129, 0.15)" },
        color: "#10b981",
        diagram: `
          <style>
            .scalability-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .scale-comparison {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
            }
            @media (max-width: 800px) {
              .scale-comparison { grid-template-columns: 1fr; }
            }
            
            /* Scaling Type Cards */
            .scale-type {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(255, 255, 255, 0.1);
            }
            .scale-type.vertical { border-color: rgba(59, 130, 246, 0.3); }
            .scale-type.horizontal { border-color: rgba(16, 185, 129, 0.3); }
            .scale-header {
              display: flex;
              align-items: center;
              gap: 12px;
              margin-bottom: 20px;
            }
            .scale-icon {
              width: 44px;
              height: 44px;
              border-radius: 10px;
              display: flex;
              align-items: center;
              justify-content: center;
              font-size: 1.4rem;
            }
            .vertical .scale-icon { background: rgba(59, 130, 246, 0.2); }
            .horizontal .scale-icon { background: rgba(16, 185, 129, 0.2); }
            .scale-title-text {
              font-weight: 600;
              font-size: 1rem;
            }
            .vertical .scale-title-text { color: #3b82f6; }
            .horizontal .scale-title-text { color: #10b981; }
            .scale-subtitle {
              font-size: 0.75rem;
              color: #6b7280;
            }
            
            /* Vertical Scaling Animation */
            .vertical-demo {
              display: flex;
              justify-content: center;
              gap: 16px;
              align-items: flex-end;
              height: 140px;
              margin-bottom: 16px;
            }
            .server-tower {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 4px;
            }
            .server-tower.before .tower-box {
              width: 50px;
              height: 60px;
              background: rgba(59, 130, 246, 0.2);
              border: 1px solid rgba(59, 130, 246, 0.4);
              border-radius: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
              font-size: 0.7rem;
              color: #6b7280;
            }
            .server-tower.after .tower-box {
              width: 70px;
              height: 100px;
              background: linear-gradient(180deg, rgba(59, 130, 246, 0.3), rgba(59, 130, 246, 0.15));
              border: 2px solid rgba(59, 130, 246, 0.6);
              border-radius: 8px;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              gap: 4px;
              animation: growTower 2s ease-in-out infinite alternate;
            }
            @keyframes growTower {
              0% { transform: scaleY(0.85); }
              100% { transform: scaleY(1); }
            }
            .tower-label {
              font-size: 0.65rem;
              color: #6b7280;
              margin-top: 6px;
            }
            .tower-stats {
              font-size: 0.6rem;
              color: #3b82f6;
            }
            .scale-arrow {
              font-size: 1.2rem;
              color: #4b5563;
              margin-bottom: 40px;
            }
            
            /* Horizontal Scaling Animation */
            .horizontal-demo {
              display: flex;
              flex-direction: column;
              gap: 12px;
              margin-bottom: 16px;
            }
            .servers-line {
              display: flex;
              gap: 8px;
              justify-content: center;
              flex-wrap: wrap;
            }
            .servers-line.before .mini-server {
              width: 40px;
              height: 40px;
              background: rgba(16, 185, 129, 0.2);
              border: 1px solid rgba(16, 185, 129, 0.4);
              border-radius: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
              font-size: 0.9rem;
            }
            .servers-line.after .mini-server {
              width: 40px;
              height: 40px;
              background: rgba(16, 185, 129, 0.2);
              border: 1px solid rgba(16, 185, 129, 0.4);
              border-radius: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
              font-size: 0.9rem;
              animation: popIn 0.5s ease-out;
            }
            .servers-line.after .mini-server:nth-child(3),
            .servers-line.after .mini-server:nth-child(4),
            .servers-line.after .mini-server:nth-child(5) {
              border-color: rgba(16, 185, 129, 0.7);
              background: rgba(16, 185, 129, 0.3);
            }
            .servers-line.after .mini-server.new {
              animation: pulse-new 1.5s ease-in-out infinite;
            }
            @keyframes pulse-new {
              0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
              50% { box-shadow: 0 0 0 8px rgba(16, 185, 129, 0); }
            }
            .horiz-arrow {
              text-align: center;
              color: #4b5563;
              font-size: 1rem;
            }
            .horiz-label {
              text-align: center;
              font-size: 0.65rem;
              color: #6b7280;
            }
            
            /* Pros/Cons */
            .scale-pros-cons {
              display: flex;
              gap: 16px;
              font-size: 0.75rem;
            }
            .pro, .con {
              display: flex;
              align-items: center;
              gap: 6px;
            }
            .pro { color: #10b981; }
            .con { color: #ef4444; }
            
            /* Load Graph */
            .load-section {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .load-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .load-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .load-graph {
              display: flex;
              align-items: flex-end;
              gap: 3px;
              height: 80px;
              padding: 10px;
              background: rgba(15, 20, 30, 0.5);
              border-radius: 8px;
              margin-bottom: 12px;
            }
            .load-bar {
              flex: 1;
              background: linear-gradient(180deg, #10b981, #059669);
              border-radius: 2px 2px 0 0;
              min-height: 8px;
              transition: height 0.3s ease;
            }
            .load-bar:nth-child(1) { height: 20%; }
            .load-bar:nth-child(2) { height: 25%; }
            .load-bar:nth-child(3) { height: 35%; }
            .load-bar:nth-child(4) { height: 45%; }
            .load-bar:nth-child(5) { height: 55%; }
            .load-bar:nth-child(6) { height: 60%; }
            .load-bar:nth-child(7) { height: 70%; }
            .load-bar:nth-child(8) { height: 80%; background: linear-gradient(180deg, #f59e0b, #d97706); }
            .load-bar:nth-child(9) { height: 90%; background: linear-gradient(180deg, #f59e0b, #d97706); }
            .load-bar:nth-child(10) { height: 95%; background: linear-gradient(180deg, #ef4444, #dc2626); animation: loadPulse 1s ease-in-out infinite; }
            .load-bar:nth-child(11) { height: 60%; background: linear-gradient(180deg, #10b981, #059669); }
            .load-bar:nth-child(12) { height: 40%; background: linear-gradient(180deg, #10b981, #059669); }
            .load-bar:nth-child(13) { height: 35%; }
            .load-bar:nth-child(14) { height: 30%; }
            .load-bar:nth-child(15) { height: 25%; }
            @keyframes loadPulse {
              0%, 100% { opacity: 0.8; }
              50% { opacity: 1; }
            }
            .load-labels {
              display: flex;
              justify-content: space-between;
              font-size: 0.7rem;
              color: #6b7280;
            }
            .scale-event {
              display: inline-flex;
              align-items: center;
              gap: 6px;
              padding: 4px 10px;
              background: rgba(16, 185, 129, 0.15);
              border-radius: 20px;
              font-size: 0.7rem;
              color: #10b981;
              margin-top: 10px;
            }
          </style>
          
          <div class="scalability-viz">
            <!-- Horizontal vs Vertical Comparison -->
            <div class="scale-comparison">
              <!-- Vertical Scaling -->
              <div class="scale-type vertical">
                <div class="scale-header">
                  <div class="scale-icon">‚ÜïÔ∏è</div>
                  <div>
                    <div class="scale-title-text">Vertical Scaling</div>
                    <div class="scale-subtitle">Scale Up ‚Äî Add more power</div>
                  </div>
                </div>
                <div class="vertical-demo">
                  <div class="server-tower before">
                    <div class="tower-box">4GB<br>2 CPU</div>
                    <div class="tower-label">Before</div>
                  </div>
                  <div class="scale-arrow">‚Üí</div>
                  <div class="server-tower after">
                    <div class="tower-box">
                      <div class="tower-stats">64GB</div>
                      <div class="tower-stats">16 CPU</div>
                      <div class="tower-stats">SSD</div>
                    </div>
                    <div class="tower-label">After</div>
                  </div>
                </div>
                <div class="scale-pros-cons">
                  <span class="pro">‚úì Simple</span>
                  <span class="con">‚úó Has limits</span>
                  <span class="con">‚úó Single point</span>
                </div>
              </div>
              
              <!-- Horizontal Scaling -->
              <div class="scale-type horizontal">
                <div class="scale-header">
                  <div class="scale-icon">‚ÜîÔ∏è</div>
                  <div>
                    <div class="scale-title-text">Horizontal Scaling</div>
                    <div class="scale-subtitle">Scale Out ‚Äî Add more machines</div>
                  </div>
                </div>
                <div class="horizontal-demo">
                  <div class="horiz-label">2 instances</div>
                  <div class="servers-line before">
                    <div class="mini-server">üñ•Ô∏è</div>
                    <div class="mini-server">üñ•Ô∏è</div>
                  </div>
                  <div class="horiz-arrow">‚Üì Auto-scale triggered ‚Üì</div>
                  <div class="horiz-label">5 instances</div>
                  <div class="servers-line after">
                    <div class="mini-server">üñ•Ô∏è</div>
                    <div class="mini-server">üñ•Ô∏è</div>
                    <div class="mini-server new">üñ•Ô∏è</div>
                    <div class="mini-server new">üñ•Ô∏è</div>
                    <div class="mini-server new">üñ•Ô∏è</div>
                  </div>
                </div>
                <div class="scale-pros-cons">
                  <span class="pro">‚úì No limits</span>
                  <span class="pro">‚úì Redundant</span>
                  <span class="con">‚úó Complex</span>
                </div>
              </div>
            </div>
            
            <!-- Load Graph with Auto-scaling -->
            <div class="load-section">
              <div class="load-title">Traffic Spike & Auto-Scaling Response</div>
              <div class="load-graph">
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
                <div class="load-bar"></div>
              </div>
              <div class="load-labels">
                <span>Normal load</span>
                <span style="color: #ef4444;">‚Üê Peak (scale up) ‚Üí</span>
                <span>Scale down</span>
              </div>
              <div class="scale-event">
                <span>üìà</span> New instances provisioned in 45 seconds
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Scalability</strong> is the property of a system to handle a growing amount of work by adding resources. A scalable system can accommodate increased load without significant performance degradation.</p>
          <p>There are two primary types: <strong>Vertical Scaling</strong> (scaling up by adding more power to existing machines) and <strong>Horizontal Scaling</strong> (scaling out by adding more machines to the pool).</p>
        `,
        keyPoints: [
          { icon: "‚ÜîÔ∏è", title: "Horizontal Scaling", desc: "Add more machines to distribute load. Better for handling massive scale and provides redundancy.", color: "#10b981" },
          { icon: "‚ÜïÔ∏è", title: "Vertical Scaling", desc: "Upgrade existing hardware with more CPU, RAM, or storage. Simpler but has physical limits.", color: "#3b82f6" },
          { icon: "üìä", title: "Database Sharding", desc: "Partition data across multiple databases to handle larger datasets and higher throughput.", color: "#8b5cf6" },
          { icon: "‚ö°", title: "Caching Layers", desc: "Use in-memory caches to reduce database load and improve response times.", color: "#f59e0b" }
        ],
        formula: "Scalability = Throughput at N nodes / (N √ó Throughput at 1 node)",
        strategies: [
          { title: "Stateless Architecture", desc: "Design services to be stateless so any instance can handle any request, enabling easy horizontal scaling." },
          { title: "Database Read Replicas", desc: "Create read replicas to distribute read queries and reduce load on the primary database." },
          { title: "Microservices Decomposition", desc: "Break monolith into independent services that can be scaled individually based on demand." },
          { title: "Auto-scaling Groups", desc: "Use cloud auto-scaling to automatically add or remove instances based on traffic patterns and metrics." }
        ],
        metrics: [
          { level: "Throughput", downtime: "Requests per second", useCase: "Measure system capacity" },
          { level: "Latency P99", downtime: "99th percentile response time", useCase: "User experience under load" },
          { level: "Linear Scaling", downtime: "Cost grows linearly with load", useCase: "Economic efficiency" },
          { level: "Elasticity", downtime: "Time to scale up/down", useCase: "Response to demand changes" }
        ]
      },
      consistency: {
        title: "Consistency",
        subtitle: "The property that ensures all nodes in a distributed system have the same data at the same time.",
        badge: { text: "Data Management", color: "#ec4899", bg: "rgba(236, 72, 153, 0.15)" },
        color: "#ec4899",
        diagram: `
          <style>
            .consistency-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .consistency-demo {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
            }
            @media (max-width: 800px) {
              .consistency-demo { grid-template-columns: 1fr; }
            }
            .cons-scenario {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 20px;
              border: 1px solid rgba(255, 255, 255, 0.1);
            }
            .cons-scenario.strong { border-color: rgba(16, 185, 129, 0.3); }
            .cons-scenario.eventual { border-color: rgba(245, 158, 11, 0.3); }
            .cons-header {
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 16px;
            }
            .cons-icon {
              width: 36px;
              height: 36px;
              border-radius: 8px;
              display: flex;
              align-items: center;
              justify-content: center;
              font-size: 1.2rem;
            }
            .strong .cons-icon { background: rgba(16, 185, 129, 0.2); }
            .eventual .cons-icon { background: rgba(245, 158, 11, 0.2); }
            .cons-title {
              font-weight: 600;
              font-size: 0.95rem;
            }
            .strong .cons-title { color: #10b981; }
            .eventual .cons-title { color: #f59e0b; }
            .cons-nodes {
              display: flex;
              justify-content: center;
              gap: 12px;
              margin-bottom: 12px;
            }
            .cons-node {
              width: 60px;
              height: 50px;
              border-radius: 8px;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              font-size: 0.7rem;
              border: 1px solid;
              transition: all 0.3s ease;
            }
            .cons-node-icon { font-size: 1rem; margin-bottom: 2px; }
            .cons-node.synced {
              background: rgba(16, 185, 129, 0.15);
              border-color: rgba(16, 185, 129, 0.4);
              color: #10b981;
            }
            .cons-node.stale {
              background: rgba(245, 158, 11, 0.15);
              border-color: rgba(245, 158, 11, 0.4);
              color: #f59e0b;
            }
            .cons-node.updating {
              animation: nodePulse 1s ease-in-out infinite;
            }
            @keyframes nodePulse {
              0%, 100% { opacity: 0.6; }
              50% { opacity: 1; }
            }
            .cons-timeline {
              text-align: center;
              font-size: 0.75rem;
              color: #6b7280;
              padding: 8px;
              background: rgba(30, 35, 50, 0.5);
              border-radius: 6px;
            }
            .cons-timeline span {
              font-weight: 500;
            }
            .strong .cons-timeline span { color: #10b981; }
            .eventual .cons-timeline span { color: #f59e0b; }
            
            /* Models Spectrum */
            .models-spectrum {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(236, 72, 153, 0.2);
            }
            .spectrum-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .spectrum-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #ec4899;
              border-radius: 50%;
            }
            .spectrum-bar {
              height: 12px;
              background: linear-gradient(90deg, #10b981 0%, #3b82f6 33%, #8b5cf6 66%, #f59e0b 100%);
              border-radius: 6px;
              margin-bottom: 16px;
            }
            .spectrum-labels {
              display: flex;
              justify-content: space-between;
              margin-bottom: 20px;
            }
            .spectrum-label {
              text-align: center;
              font-size: 0.7rem;
            }
            .spectrum-label-name {
              font-weight: 500;
              margin-bottom: 2px;
            }
            .spectrum-label:nth-child(1) .spectrum-label-name { color: #10b981; }
            .spectrum-label:nth-child(2) .spectrum-label-name { color: #3b82f6; }
            .spectrum-label:nth-child(3) .spectrum-label-name { color: #8b5cf6; }
            .spectrum-label:nth-child(4) .spectrum-label-name { color: #f59e0b; }
            .spectrum-label-desc {
              color: #6b7280;
              font-size: 0.65rem;
            }
            .spectrum-tradeoff {
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 12px;
              background: rgba(30, 35, 50, 0.5);
              border-radius: 8px;
              font-size: 0.75rem;
            }
            .tradeoff-item {
              display: flex;
              align-items: center;
              gap: 6px;
            }
            .tradeoff-item.perf { color: #10b981; }
            .tradeoff-item.cons { color: #ec4899; }
          </style>
          
          <div class="consistency-viz">
            <!-- Strong vs Eventual Demo -->
            <div class="consistency-demo">
              <div class="cons-scenario strong">
                <div class="cons-header">
                  <div class="cons-icon">üí™</div>
                  <div class="cons-title">Strong Consistency</div>
                </div>
                <div class="cons-nodes">
                  <div class="cons-node synced">
                    <span class="cons-node-icon">üñ•Ô∏è</span>
                    <span>v5</span>
                  </div>
                  <div class="cons-node synced">
                    <span class="cons-node-icon">üñ•Ô∏è</span>
                    <span>v5</span>
                  </div>
                  <div class="cons-node synced">
                    <span class="cons-node-icon">üñ•Ô∏è</span>
                    <span>v5</span>
                  </div>
                </div>
                <div class="cons-timeline">All nodes show <span>same data instantly</span></div>
              </div>
              
              <div class="cons-scenario eventual">
                <div class="cons-header">
                  <div class="cons-icon">‚è≥</div>
                  <div class="cons-title">Eventual Consistency</div>
                </div>
                <div class="cons-nodes">
                  <div class="cons-node synced">
                    <span class="cons-node-icon">üñ•Ô∏è</span>
                    <span>v5</span>
                  </div>
                  <div class="cons-node stale updating">
                    <span class="cons-node-icon">üñ•Ô∏è</span>
                    <span>v4</span>
                  </div>
                  <div class="cons-node stale updating">
                    <span class="cons-node-icon">üñ•Ô∏è</span>
                    <span>v3</span>
                  </div>
                </div>
                <div class="cons-timeline">Nodes <span>converge over time</span></div>
              </div>
            </div>
            
            <!-- Consistency Models Spectrum -->
            <div class="models-spectrum">
              <div class="spectrum-title">Consistency Models Spectrum</div>
              <div class="spectrum-bar"></div>
              <div class="spectrum-labels">
                <div class="spectrum-label">
                  <div class="spectrum-label-name">Linearizable</div>
                  <div class="spectrum-label-desc">Real-time order</div>
                </div>
                <div class="spectrum-label">
                  <div class="spectrum-label-name">Sequential</div>
                  <div class="spectrum-label-desc">Global order</div>
                </div>
                <div class="spectrum-label">
                  <div class="spectrum-label-name">Causal</div>
                  <div class="spectrum-label-desc">Cause ‚Üí Effect</div>
                </div>
                <div class="spectrum-label">
                  <div class="spectrum-label-name">Eventual</div>
                  <div class="spectrum-label-desc">Eventually same</div>
                </div>
              </div>
              <div class="spectrum-tradeoff">
                <div class="tradeoff-item cons">‚Üê Stronger Guarantees</div>
                <div style="color: #6b7280;">Trade-off</div>
                <div class="tradeoff-item perf">Better Performance ‚Üí</div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Consistency</strong> in distributed systems ensures that all clients see the same data at the same time, regardless of which node they connect to. It's about maintaining data correctness across replicas.</p>
          <p>The trade-off between consistency and availability is fundamental in distributed systems (CAP theorem). Different consistency models offer different guarantees based on application requirements.</p>
        `,
        keyPoints: [
          { icon: "üí™", title: "Strong Consistency", desc: "All reads receive the most recent write. Provides simplest programming model but may impact availability.", color: "#ec4899" },
          { icon: "‚è≥", title: "Eventual Consistency", desc: "All replicas will eventually converge to the same state. Higher availability but temporary inconsistency.", color: "#8b5cf6" },
          { icon: "üîÄ", title: "Causal Consistency", desc: "Operations that are causally related are seen in the same order by all nodes.", color: "#10b981" },
          { icon: "üìù", title: "Read-Your-Writes", desc: "A client always sees their own writes immediately, even if other clients don't yet.", color: "#3b82f6" }
        ],
        formula: "Consistency Models: Strong > Sequential > Causal > Eventual",
        strategies: [
          { title: "Consensus Protocols", desc: "Use algorithms like Paxos or Raft to achieve agreement among distributed nodes on data values." },
          { title: "Quorum-based Replication", desc: "Require a majority of nodes to acknowledge writes before confirming, balancing consistency and availability." },
          { title: "Vector Clocks", desc: "Track causality between events to detect and resolve conflicts in eventually consistent systems." },
          { title: "Conflict Resolution", desc: "Define rules for handling concurrent updates - last-write-wins, merge strategies, or application-specific logic." }
        ],
        metrics: [
          { level: "Linearizable", downtime: "Real-time ordering", useCase: "Financial transactions" },
          { level: "Sequential", downtime: "Global order preserved", useCase: "Audit logs" },
          { level: "Causal", downtime: "Cause-effect ordering", useCase: "Social media feeds" },
          { level: "Eventual", downtime: "Converges over time", useCase: "DNS, shopping carts" }
        ]
      },
      "cap-theorem": {
        title: "CAP Theorem",
        subtitle: "In a distributed system, you can only guarantee two of three properties: Consistency, Availability, and Partition Tolerance.",
        badge: { text: "Fundamental Theory", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" },
        color: "#f59e0b",
        diagram: `
          <div style="display: flex; flex-direction: column; align-items: center; gap: 30px;">
            <svg width="300" height="260" viewBox="0 0 300 260">
              <!-- Triangle -->
              <polygon points="150,20 280,220 20,220" fill="none" stroke="#f59e0b" stroke-width="3"/>
              
              <!-- Vertices -->
              <circle cx="150" cy="20" r="40" fill="rgba(59, 130, 246, 0.2)" stroke="#3b82f6" stroke-width="2"/>
              <text x="150" y="25" text-anchor="middle" fill="#3b82f6" font-weight="bold" font-size="14">C</text>
              
              <circle cx="280" cy="220" r="40" fill="rgba(16, 185, 129, 0.2)" stroke="#10b981" stroke-width="2"/>
              <text x="280" y="225" text-anchor="middle" fill="#10b981" font-weight="bold" font-size="14">A</text>
              
              <circle cx="20" cy="220" r="40" fill="rgba(139, 92, 246, 0.2)" stroke="#8b5cf6" stroke-width="2"/>
              <text x="20" y="225" text-anchor="middle" fill="#8b5cf6" font-weight="bold" font-size="14">P</text>
              
              <!-- Edge Labels -->
              <text x="215" y="100" fill="#a0a0b0" font-size="11">CA</text>
              <text x="75" y="100" fill="#a0a0b0" font-size="11">CP</text>
              <text x="150" y="240" fill="#a0a0b0" font-size="11">AP</text>
            </svg>
            <div style="display: flex; gap: 24px; flex-wrap: wrap; justify-content: center;">
              <div style="text-align: center;">
                <div style="color: #3b82f6; font-weight: 600;">Consistency</div>
                <div style="color: #a0a0b0; font-size: 0.85rem;">Same data everywhere</div>
              </div>
              <div style="text-align: center;">
                <div style="color: #10b981; font-weight: 600;">Availability</div>
                <div style="color: #a0a0b0; font-size: 0.85rem;">Always responds</div>
              </div>
              <div style="text-align: center;">
                <div style="color: #8b5cf6; font-weight: 600;">Partition Tolerance</div>
                <div style="color: #a0a0b0; font-size: 0.85rem;">Survives network splits</div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p>The <strong>CAP Theorem</strong> (Brewer's Theorem) states that a distributed data store cannot simultaneously provide more than two of three guarantees: Consistency, Availability, and Partition Tolerance.</p>
          <p>Since network partitions are inevitable in distributed systems, the real choice is between <strong>CP</strong> (consistency over availability during partitions) or <strong>AP</strong> (availability over consistency during partitions).</p>
        `,
        keyPoints: [
          { icon: "üîó", title: "Consistency (C)", desc: "Every read receives the most recent write or an error. All nodes see the same data.", color: "#3b82f6" },
          { icon: "‚úÖ", title: "Availability (A)", desc: "Every request receives a response, without guarantee it contains the most recent write.", color: "#10b981" },
          { icon: "üîÄ", title: "Partition Tolerance (P)", desc: "System continues to operate despite network partitions between nodes.", color: "#8b5cf6" },
          { icon: "‚öñÔ∏è", title: "Trade-offs", desc: "Choose CP for banking/inventory; AP for social media/caching. PACELC extends CAP.", color: "#f59e0b" }
        ],
        formula: "Pick 2: Consistency + Availability + Partition Tolerance",
        strategies: [
          { title: "CP Systems (e.g., MongoDB, HBase)", desc: "Prioritize consistency. During partitions, may refuse writes to maintain consistency across nodes." },
          { title: "AP Systems (e.g., Cassandra, DynamoDB)", desc: "Prioritize availability. Accept writes during partitions, resolve conflicts later with eventual consistency." },
          { title: "PACELC Extension", desc: "Extends CAP: if Partition, choose A or C; Else (normal operation), choose Latency or Consistency." },
          { title: "Tunable Consistency", desc: "Some systems allow per-query consistency levels, letting developers choose the right trade-off per operation." }
        ],
        metrics: [
          { level: "CP", downtime: "PostgreSQL, MongoDB", useCase: "Banking, inventory systems" },
          { level: "AP", downtime: "Cassandra, CouchDB", useCase: "Social media, IoT" },
          { level: "CA", downtime: "Single-node RDBMS", useCase: "Small-scale apps (no partitions)" },
          { level: "Tunable", downtime: "Cosmos DB, Cassandra", useCase: "Flexible per-operation choice" }
        ]
      },
      "load-balancing": {
        title: "Load Balancing",
        subtitle: "The process of distributing network traffic across multiple servers to ensure no single server becomes overwhelmed.",
        badge: { text: "Architecture Pattern", color: "#06b6d4", bg: "rgba(6, 182, 212, 0.15)" },
        color: "#06b6d4",
        diagram: `
          <style>
            .lb-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .lb-flow {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(6, 182, 212, 0.2);
            }
            .lb-flow-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .lb-flow-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #06b6d4;
              border-radius: 50%;
            }
            .lb-diagram {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 16px;
            }
            .lb-users {
              display: flex;
              gap: 8px;
              flex-wrap: wrap;
              justify-content: center;
            }
            .lb-user {
              padding: 8px 12px;
              background: rgba(6, 182, 212, 0.15);
              border: 1px solid rgba(6, 182, 212, 0.3);
              border-radius: 6px;
              font-size: 0.75rem;
              display: flex;
              align-items: center;
              gap: 4px;
              animation: userFlow 2s ease-in-out infinite;
            }
            .lb-user:nth-child(2) { animation-delay: 0.3s; }
            .lb-user:nth-child(3) { animation-delay: 0.6s; }
            .lb-user:nth-child(4) { animation-delay: 0.9s; }
            .lb-user:nth-child(5) { animation-delay: 1.2s; }
            @keyframes userFlow {
              0%, 100% { transform: translateY(0); opacity: 0.7; }
              50% { transform: translateY(3px); opacity: 1; }
            }
            .lb-arrows-down {
              display: flex;
              gap: 20px;
              color: #06b6d4;
              font-size: 1rem;
            }
            .lb-balancer {
              padding: 20px 50px;
              background: linear-gradient(135deg, #06b6d4, #0891b2);
              border-radius: 14px;
              color: white;
              text-align: center;
              box-shadow: 0 8px 32px rgba(6, 182, 212, 0.3);
              position: relative;
            }
            .lb-balancer-icon {
              font-size: 2rem;
              margin-bottom: 6px;
            }
            .lb-balancer-text {
              font-weight: 600;
              font-size: 1.1rem;
            }
            .lb-balancer-sub {
              font-size: 0.7rem;
              opacity: 0.8;
              margin-top: 4px;
            }
            .lb-distribution {
              display: flex;
              gap: 8px;
              color: #06b6d4;
              font-size: 0.9rem;
            }
            .lb-dist-arrow {
              animation: distFlow 1s ease-in-out infinite;
            }
            .lb-dist-arrow:nth-child(1) { animation-delay: 0s; }
            .lb-dist-arrow:nth-child(2) { animation-delay: 0.2s; }
            .lb-dist-arrow:nth-child(3) { animation-delay: 0.4s; }
            @keyframes distFlow {
              0%, 100% { opacity: 0.5; }
              50% { opacity: 1; }
            }
            .lb-servers {
              display: flex;
              gap: 16px;
              flex-wrap: wrap;
              justify-content: center;
            }
            .lb-server {
              padding: 14px 20px;
              background: rgba(30, 35, 50, 0.8);
              border: 1px solid rgba(255, 255, 255, 0.1);
              border-radius: 10px;
              text-align: center;
              min-width: 90px;
            }
            .lb-server-icon {
              font-size: 1.4rem;
              margin-bottom: 4px;
            }
            .lb-server-name {
              font-size: 0.8rem;
              color: #e5e5e5;
              margin-bottom: 6px;
            }
            .lb-server-load {
              height: 6px;
              background: rgba(255, 255, 255, 0.1);
              border-radius: 3px;
              overflow: hidden;
            }
            .lb-server-load-fill {
              height: 100%;
              border-radius: 3px;
            }
            .lb-server:nth-child(1) .lb-server-load-fill { width: 65%; background: #10b981; }
            .lb-server:nth-child(2) .lb-server-load-fill { width: 72%; background: #10b981; }
            .lb-server:nth-child(3) .lb-server-load-fill { width: 58%; background: #10b981; }
            .lb-server:nth-child(4) .lb-server-load-fill { width: 70%; background: #10b981; }
            .lb-server-percent {
              font-size: 0.65rem;
              color: #6b7280;
              margin-top: 4px;
            }
            
            /* Algorithms */
            .lb-algorithms {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .lb-algo-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .lb-algo-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .lb-algo-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .lb-algo-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .lb-algo {
              padding: 14px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
              border: 1px solid rgba(255, 255, 255, 0.05);
            }
            .lb-algo-icon {
              font-size: 1.3rem;
              margin-bottom: 6px;
            }
            .lb-algo-name {
              font-size: 0.8rem;
              font-weight: 500;
              color: #e5e5e5;
              margin-bottom: 4px;
            }
            .lb-algo-desc {
              font-size: 0.65rem;
              color: #6b7280;
            }
          </style>
          
          <div class="lb-viz">
            <!-- Traffic Flow -->
            <div class="lb-flow">
              <div class="lb-flow-title">Traffic Distribution Flow</div>
              <div class="lb-diagram">
                <div class="lb-users">
                  <div class="lb-user">üë§ User 1</div>
                  <div class="lb-user">üë§ User 2</div>
                  <div class="lb-user">üë§ User 3</div>
                  <div class="lb-user">üë§ User 4</div>
                  <div class="lb-user">üë§ User 5</div>
                </div>
                <div class="lb-arrows-down">‚Üì ‚Üì ‚Üì ‚Üì ‚Üì</div>
                <div class="lb-balancer">
                  <div class="lb-balancer-icon">‚öñÔ∏è</div>
                  <div class="lb-balancer-text">Load Balancer</div>
                  <div class="lb-balancer-sub">Health checks ‚Ä¢ Routing ‚Ä¢ SSL termination</div>
                </div>
                <div class="lb-distribution">
                  <span class="lb-dist-arrow">‚ÜôÔ∏è</span>
                  <span class="lb-dist-arrow">‚Üì</span>
                  <span class="lb-dist-arrow">‚Üì</span>
                  <span class="lb-dist-arrow">‚ÜòÔ∏è</span>
                </div>
                <div class="lb-servers">
                  <div class="lb-server">
                    <div class="lb-server-icon">üñ•Ô∏è</div>
                    <div class="lb-server-name">Server 1</div>
                    <div class="lb-server-load"><div class="lb-server-load-fill"></div></div>
                    <div class="lb-server-percent">65% load</div>
                  </div>
                  <div class="lb-server">
                    <div class="lb-server-icon">üñ•Ô∏è</div>
                    <div class="lb-server-name">Server 2</div>
                    <div class="lb-server-load"><div class="lb-server-load-fill"></div></div>
                    <div class="lb-server-percent">72% load</div>
                  </div>
                  <div class="lb-server">
                    <div class="lb-server-icon">üñ•Ô∏è</div>
                    <div class="lb-server-name">Server 3</div>
                    <div class="lb-server-load"><div class="lb-server-load-fill"></div></div>
                    <div class="lb-server-percent">58% load</div>
                  </div>
                  <div class="lb-server">
                    <div class="lb-server-icon">üñ•Ô∏è</div>
                    <div class="lb-server-name">Server 4</div>
                    <div class="lb-server-load"><div class="lb-server-load-fill"></div></div>
                    <div class="lb-server-percent">70% load</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Algorithms -->
            <div class="lb-algorithms">
              <div class="lb-algo-title">Load Balancing Algorithms</div>
              <div class="lb-algo-grid">
                <div class="lb-algo">
                  <div class="lb-algo-icon">üîÑ</div>
                  <div class="lb-algo-name">Round Robin</div>
                  <div class="lb-algo-desc">Sequential rotation</div>
                </div>
                <div class="lb-algo">
                  <div class="lb-algo-icon">üìä</div>
                  <div class="lb-algo-name">Least Connections</div>
                  <div class="lb-algo-desc">Fewest active</div>
                </div>
                <div class="lb-algo">
                  <div class="lb-algo-icon">‚ö°</div>
                  <div class="lb-algo-name">Weighted</div>
                  <div class="lb-algo-desc">By server capacity</div>
                </div>
                <div class="lb-algo">
                  <div class="lb-algo-icon">üìç</div>
                  <div class="lb-algo-name">IP Hash</div>
                  <div class="lb-algo-desc">Session stickiness</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Load Balancing</strong> distributes incoming network traffic across multiple backend servers to ensure optimal resource utilization, minimize response time, and avoid overloading any single server.</p>
          <p>Load balancers act as a reverse proxy, sitting between clients and servers. They improve application availability and responsiveness while enabling horizontal scaling.</p>
        `,
        keyPoints: [
          { icon: "üîÑ", title: "Round Robin", desc: "Distributes requests sequentially to each server in turn. Simple but doesn't consider server load.", color: "#06b6d4" },
          { icon: "üìä", title: "Least Connections", desc: "Routes to the server with fewest active connections. Better for varying request durations.", color: "#3b82f6" },
          { icon: "‚ö°", title: "Weighted Distribution", desc: "Assigns more traffic to more powerful servers based on capacity weights.", color: "#10b981" },
          { icon: "üìç", title: "IP Hash", desc: "Routes based on client IP for session persistence. Same client always reaches same server.", color: "#8b5cf6" }
        ],
        formula: "Response Time = Request Time + (Queue Time √ó Server Load)",
        strategies: [
          { title: "Layer 4 (Transport)", desc: "Balance based on IP and TCP/UDP ports. Fast but limited visibility into application data." },
          { title: "Layer 7 (Application)", desc: "Route based on HTTP headers, URLs, cookies. More intelligent but higher overhead." },
          { title: "Health Checks", desc: "Continuously probe backend servers and remove unhealthy ones from rotation automatically." },
          { title: "Session Persistence", desc: "Use sticky sessions or external session storage to maintain user state across requests." }
        ],
        metrics: [
          { level: "Hardware LB", downtime: "F5, Citrix", useCase: "High performance, enterprise" },
          { level: "Software LB", downtime: "NGINX, HAProxy", useCase: "Flexible, cost-effective" },
          { level: "Cloud LB", downtime: "AWS ALB/NLB, GCP LB", useCase: "Managed, auto-scaling" },
          { level: "DNS LB", downtime: "Route 53, Cloudflare", useCase: "Global distribution" }
        ]
      },
      caching: {
        title: "Caching",
        subtitle: "Storing copies of frequently accessed data in a faster storage layer to reduce latency and backend load.",
        badge: { text: "Performance", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" },
        color: "#f59e0b",
        diagram: `
          <style>
            .cache-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .cache-row {
              display: flex;
              gap: 20px;
            }
            @media (max-width: 900px) {
              .cache-row { flex-direction: column; }
            }
            
            /* Cache Flow */
            .cache-flow {
              flex: 1.5;
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .cache-flow-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .cache-flow-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .cache-diagram {
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 16px;
              flex-wrap: wrap;
            }
            .cache-component {
              padding: 20px;
              border-radius: 12px;
              text-align: center;
              min-width: 100px;
            }
            .cache-app {
              background: rgba(6, 182, 212, 0.15);
              border: 1px solid rgba(6, 182, 212, 0.3);
            }
            .cache-cache {
              background: rgba(245, 158, 11, 0.15);
              border: 2px solid rgba(245, 158, 11, 0.5);
              position: relative;
            }
            .cache-db {
              background: rgba(59, 130, 246, 0.15);
              border: 1px solid rgba(59, 130, 246, 0.3);
            }
            .cache-comp-icon {
              font-size: 2rem;
              margin-bottom: 6px;
            }
            .cache-comp-name {
              font-weight: 500;
              font-size: 0.9rem;
              margin-bottom: 4px;
            }
            .cache-comp-time {
              font-size: 0.75rem;
              color: #6b7280;
            }
            .cache-cache .cache-comp-time { color: #f59e0b; }
            .cache-arrow {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 4px;
              font-size: 0.7rem;
              color: #6b7280;
            }
            .cache-arrow-icon {
              font-size: 1.2rem;
            }
            .cache-arrow.hit .cache-arrow-icon { color: #10b981; }
            .cache-arrow.miss .cache-arrow-icon { color: #ef4444; }
            
            /* Hit Rate */
            .hit-rate {
              flex: 1;
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .hit-rate-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .hit-rate-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .hit-rate-gauge {
              text-align: center;
              margin-bottom: 16px;
            }
            .hit-rate-value {
              font-size: 3rem;
              font-weight: 700;
              color: #10b981;
            }
            .hit-rate-label {
              font-size: 0.8rem;
              color: #6b7280;
            }
            .hit-miss-bar {
              height: 16px;
              background: rgba(239, 68, 68, 0.3);
              border-radius: 8px;
              overflow: hidden;
              margin-bottom: 8px;
            }
            .hit-bar {
              height: 100%;
              width: 95%;
              background: linear-gradient(90deg, #10b981, #059669);
              border-radius: 8px;
            }
            .hit-miss-labels {
              display: flex;
              justify-content: space-between;
              font-size: 0.7rem;
            }
            .hit-label { color: #10b981; }
            .miss-label { color: #ef4444; }
            
            /* Cache Layers */
            .cache-layers {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(139, 92, 246, 0.2);
            }
            .cache-layers-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .cache-layers-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #8b5cf6;
              border-radius: 50%;
            }
            .layers-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .layers-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .layer-card {
              padding: 16px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
              border: 1px solid rgba(255, 255, 255, 0.05);
              transition: all 0.3s ease;
            }
            .layer-card:hover {
              transform: translateY(-2px);
            }
            .layer-card:nth-child(1) { border-color: rgba(59, 130, 246, 0.3); }
            .layer-card:nth-child(2) { border-color: rgba(16, 185, 129, 0.3); }
            .layer-card:nth-child(3) { border-color: rgba(245, 158, 11, 0.3); }
            .layer-card:nth-child(4) { border-color: rgba(139, 92, 246, 0.3); }
            .layer-icon {
              font-size: 1.5rem;
              margin-bottom: 8px;
            }
            .layer-name {
              font-size: 0.85rem;
              font-weight: 500;
              margin-bottom: 4px;
            }
            .layer-card:nth-child(1) .layer-name { color: #3b82f6; }
            .layer-card:nth-child(2) .layer-name { color: #10b981; }
            .layer-card:nth-child(3) .layer-name { color: #f59e0b; }
            .layer-card:nth-child(4) .layer-name { color: #8b5cf6; }
            .layer-speed {
              font-size: 0.7rem;
              color: #6b7280;
            }
          </style>
          
          <div class="cache-viz">
            <div class="cache-row">
              <!-- Cache Flow Diagram -->
              <div class="cache-flow">
                <div class="cache-flow-title">Cache-Aside Pattern (Read-Through)</div>
                <div class="cache-diagram">
                  <div class="cache-component cache-app">
                    <div class="cache-comp-icon">üì±</div>
                    <div class="cache-comp-name">Application</div>
                    <div class="cache-comp-time">Request</div>
                  </div>
                  <div class="cache-arrow hit">
                    <span class="cache-arrow-icon">‚Üí</span>
                    <span>1. Check</span>
                  </div>
                  <div class="cache-component cache-cache">
                    <div class="cache-comp-icon">‚ö°</div>
                    <div class="cache-comp-name">Cache</div>
                    <div class="cache-comp-time">~1ms</div>
                  </div>
                  <div class="cache-arrow miss">
                    <span class="cache-arrow-icon">‚Üí</span>
                    <span>2. Miss?</span>
                  </div>
                  <div class="cache-component cache-db">
                    <div class="cache-comp-icon">üíæ</div>
                    <div class="cache-comp-name">Database</div>
                    <div class="cache-comp-time">~100ms</div>
                  </div>
                </div>
              </div>
              
              <!-- Hit Rate -->
              <div class="hit-rate">
                <div class="hit-rate-title">Cache Hit Rate</div>
                <div class="hit-rate-gauge">
                  <div class="hit-rate-value">95%</div>
                  <div class="hit-rate-label">Excellent Performance</div>
                </div>
                <div class="hit-miss-bar">
                  <div class="hit-bar"></div>
                </div>
                <div class="hit-miss-labels">
                  <span class="hit-label">‚úì Hits: 950/1000</span>
                  <span class="miss-label">‚úó Misses: 50</span>
                </div>
              </div>
            </div>
            
            <!-- Cache Layers -->
            <div class="cache-layers">
              <div class="cache-layers-title">Multi-Level Cache Architecture</div>
              <div class="layers-grid">
                <div class="layer-card">
                  <div class="layer-icon">üåê</div>
                  <div class="layer-name">Browser</div>
                  <div class="layer-speed">0ms (local)</div>
                </div>
                <div class="layer-card">
                  <div class="layer-icon">üåç</div>
                  <div class="layer-name">CDN Edge</div>
                  <div class="layer-speed">10-50ms</div>
                </div>
                <div class="layer-card">
                  <div class="layer-icon">‚ö°</div>
                  <div class="layer-name">Redis/Memcached</div>
                  <div class="layer-speed">1-5ms</div>
                </div>
                <div class="layer-card">
                  <div class="layer-icon">üíæ</div>
                  <div class="layer-name">DB Query Cache</div>
                  <div class="layer-speed">10-50ms</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Caching</strong> is the practice of storing copies of data in a high-speed storage layer so future requests for that data can be served faster. It's one of the most effective techniques for improving system performance.</p>
          <p>Caches exist at multiple levels: browser cache, CDN, application cache (Redis/Memcached), and database query cache. Each level serves different purposes and has different characteristics.</p>
        `,
        keyPoints: [
          { icon: "üîÑ", title: "Cache-Aside (Lazy Loading)", desc: "Application checks cache first; on miss, loads from DB and populates cache.", color: "#f59e0b" },
          { icon: "‚úçÔ∏è", title: "Write-Through", desc: "Write to cache and DB simultaneously. Consistent but slower writes.", color: "#3b82f6" },
          { icon: "üìù", title: "Write-Behind", desc: "Write to cache immediately, async write to DB. Fast but risk of data loss.", color: "#8b5cf6" },
          { icon: "‚è∞", title: "TTL (Time-To-Live)", desc: "Automatically expire cached data after a set duration to ensure freshness.", color: "#10b981" }
        ],
        formula: "Hit Rate = Cache Hits / (Cache Hits + Cache Misses) √ó 100%",
        strategies: [
          { title: "Cache Invalidation", desc: "Proactively remove or update cached data when source data changes. 'The two hardest problems in CS...'" },
          { title: "Cache Warming", desc: "Pre-populate cache with frequently accessed data before traffic hits, avoiding cold-start issues." },
          { title: "Distributed Caching", desc: "Use clustered cache (Redis Cluster) for high availability and to handle larger datasets." },
          { title: "Multi-tier Caching", desc: "Combine local in-memory cache (L1) with distributed cache (L2) for optimal performance." }
        ],
        metrics: [
          { level: "Redis", downtime: "In-memory, persistent", useCase: "Session store, real-time data" },
          { level: "Memcached", downtime: "Simple, distributed", useCase: "Simple key-value caching" },
          { level: "CDN", downtime: "Edge caching", useCase: "Static assets, global distribution" },
          { level: "Browser", downtime: "Client-side", useCase: "Assets, API responses" }
        ]
      },
      maintainability: {
        title: "Maintainability",
        subtitle: "The ease with which a system can be modified, updated, extended, and operated over time.",
        badge: { text: "Core Principle", color: "#06b6d4", bg: "rgba(6, 182, 212, 0.15)" },
        color: "#06b6d4",
        diagram: `
          <style>
            .maintainability-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .maintain-row {
              display: flex;
              gap: 20px;
            }
            @media (max-width: 900px) {
              .maintain-row { flex-direction: column; }
            }
            
            /* Code Health Dashboard */
            .code-health {
              flex: 1.5;
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(6, 182, 212, 0.2);
            }
            .health-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .health-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #06b6d4;
              border-radius: 50%;
            }
            .health-metrics {
              display: grid;
              grid-template-columns: repeat(2, 1fr);
              gap: 12px;
            }
            @media (max-width: 500px) {
              .health-metrics { grid-template-columns: 1fr; }
            }
            .health-metric {
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              padding: 14px;
              border: 1px solid rgba(255, 255, 255, 0.05);
            }
            .health-metric-header {
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-bottom: 8px;
            }
            .health-metric-name {
              font-size: 0.75rem;
              color: #a0a0b0;
            }
            .health-metric-value {
              font-size: 0.9rem;
              font-weight: 600;
            }
            .health-metric:nth-child(1) .health-metric-value { color: #10b981; }
            .health-metric:nth-child(2) .health-metric-value { color: #3b82f6; }
            .health-metric:nth-child(3) .health-metric-value { color: #8b5cf6; }
            .health-metric:nth-child(4) .health-metric-value { color: #f59e0b; }
            .health-bar {
              height: 6px;
              background: rgba(255, 255, 255, 0.1);
              border-radius: 3px;
              overflow: hidden;
            }
            .health-bar-fill {
              height: 100%;
              border-radius: 3px;
              transition: width 1s ease;
            }
            .health-metric:nth-child(1) .health-bar-fill { width: 87%; background: #10b981; }
            .health-metric:nth-child(2) .health-bar-fill { width: 92%; background: #3b82f6; }
            .health-metric:nth-child(3) .health-bar-fill { width: 78%; background: #8b5cf6; }
            .health-metric:nth-child(4) .health-bar-fill { width: 95%; background: #f59e0b; }
            
            /* Three Pillars */
            .pillars-section {
              flex: 1;
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .pillars-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .pillars-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .pillar-stack {
              display: flex;
              flex-direction: column;
              gap: 10px;
            }
            .pillar-item {
              display: flex;
              align-items: center;
              gap: 12px;
              padding: 12px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 8px;
              border-left: 3px solid;
            }
            .pillar-item:nth-child(1) { border-color: #06b6d4; }
            .pillar-item:nth-child(2) { border-color: #8b5cf6; }
            .pillar-item:nth-child(3) { border-color: #10b981; }
            .pillar-icon {
              font-size: 1.3rem;
            }
            .pillar-content {
              flex: 1;
            }
            .pillar-name {
              font-weight: 500;
              font-size: 0.9rem;
              color: #e5e5e5;
              margin-bottom: 2px;
            }
            .pillar-desc {
              font-size: 0.7rem;
              color: #6b7280;
            }
            
            /* Tech Debt Visualization */
            .debt-section {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .debt-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .debt-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .debt-comparison {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 16px;
            }
            @media (max-width: 600px) {
              .debt-comparison { grid-template-columns: 1fr; }
            }
            .debt-card {
              padding: 16px;
              border-radius: 10px;
              text-align: center;
            }
            .debt-card.neglected {
              background: rgba(239, 68, 68, 0.1);
              border: 1px solid rgba(239, 68, 68, 0.3);
            }
            .debt-card.maintained {
              background: rgba(16, 185, 129, 0.1);
              border: 1px solid rgba(16, 185, 129, 0.3);
            }
            .debt-header {
              font-size: 0.75rem;
              font-weight: 500;
              margin-bottom: 12px;
            }
            .debt-card.neglected .debt-header { color: #ef4444; }
            .debt-card.maintained .debt-header { color: #10b981; }
            .debt-graph {
              display: flex;
              align-items: flex-end;
              justify-content: center;
              gap: 4px;
              height: 60px;
              margin-bottom: 10px;
            }
            .debt-bar {
              width: 16px;
              border-radius: 2px 2px 0 0;
              transition: height 0.5s ease;
            }
            .debt-card.neglected .debt-bar { background: #ef4444; }
            .debt-card.maintained .debt-bar { background: #10b981; }
            .debt-card.neglected .debt-bar:nth-child(1) { height: 20%; }
            .debt-card.neglected .debt-bar:nth-child(2) { height: 35%; }
            .debt-card.neglected .debt-bar:nth-child(3) { height: 50%; }
            .debt-card.neglected .debt-bar:nth-child(4) { height: 70%; }
            .debt-card.neglected .debt-bar:nth-child(5) { height: 95%; animation: debtPulse 1s ease-in-out infinite; }
            .debt-card.maintained .debt-bar:nth-child(1) { height: 30%; }
            .debt-card.maintained .debt-bar:nth-child(2) { height: 25%; }
            .debt-card.maintained .debt-bar:nth-child(3) { height: 20%; }
            .debt-card.maintained .debt-bar:nth-child(4) { height: 15%; }
            .debt-card.maintained .debt-bar:nth-child(5) { height: 10%; }
            @keyframes debtPulse {
              0%, 100% { opacity: 0.7; }
              50% { opacity: 1; }
            }
            .debt-label {
              font-size: 0.7rem;
              color: #6b7280;
            }
            .debt-impact {
              margin-top: 8px;
              font-size: 0.75rem;
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 6px;
            }
            .debt-card.neglected .debt-impact { color: #ef4444; }
            .debt-card.maintained .debt-impact { color: #10b981; }
          </style>
          
          <div class="maintainability-viz">
            <div class="maintain-row">
              <!-- Code Health Dashboard -->
              <div class="code-health">
                <div class="health-title">Codebase Health Score</div>
                <div class="health-metrics">
                  <div class="health-metric">
                    <div class="health-metric-header">
                      <span class="health-metric-name">Test Coverage</span>
                      <span class="health-metric-value">87%</span>
                    </div>
                    <div class="health-bar"><div class="health-bar-fill"></div></div>
                  </div>
                  <div class="health-metric">
                    <div class="health-metric-header">
                      <span class="health-metric-name">Documentation</span>
                      <span class="health-metric-value">92%</span>
                    </div>
                    <div class="health-bar"><div class="health-bar-fill"></div></div>
                  </div>
                  <div class="health-metric">
                    <div class="health-metric-header">
                      <span class="health-metric-name">Code Complexity</span>
                      <span class="health-metric-value">Low</span>
                    </div>
                    <div class="health-bar"><div class="health-bar-fill"></div></div>
                  </div>
                  <div class="health-metric">
                    <div class="health-metric-header">
                      <span class="health-metric-name">Modularity</span>
                      <span class="health-metric-value">95%</span>
                    </div>
                    <div class="health-bar"><div class="health-bar-fill"></div></div>
                  </div>
                </div>
              </div>
              
              <!-- Three Pillars -->
              <div class="pillars-section">
                <div class="pillars-title">Three Pillars</div>
                <div class="pillar-stack">
                  <div class="pillar-item">
                    <span class="pillar-icon">‚öôÔ∏è</span>
                    <div class="pillar-content">
                      <div class="pillar-name">Operability</div>
                      <div class="pillar-desc">Easy to keep running smoothly</div>
                    </div>
                  </div>
                  <div class="pillar-item">
                    <span class="pillar-icon">üß©</span>
                    <div class="pillar-content">
                      <div class="pillar-name">Simplicity</div>
                      <div class="pillar-desc">Easy to understand the codebase</div>
                    </div>
                  </div>
                  <div class="pillar-item">
                    <span class="pillar-icon">üå±</span>
                    <div class="pillar-content">
                      <div class="pillar-name">Evolvability</div>
                      <div class="pillar-desc">Easy to add new features</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Technical Debt Over Time -->
            <div class="debt-section">
              <div class="debt-title">Technical Debt Over Time</div>
              <div class="debt-comparison">
                <div class="debt-card neglected">
                  <div class="debt-header">üö® Neglected Codebase</div>
                  <div class="debt-graph">
                    <div class="debt-bar"></div>
                    <div class="debt-bar"></div>
                    <div class="debt-bar"></div>
                    <div class="debt-bar"></div>
                    <div class="debt-bar"></div>
                  </div>
                  <div class="debt-label">Year 1 ‚Üí Year 5</div>
                  <div class="debt-impact">‚¨ÜÔ∏è Debt compounds exponentially</div>
                </div>
                <div class="debt-card maintained">
                  <div class="debt-header">‚ú® Well-Maintained Codebase</div>
                  <div class="debt-graph">
                    <div class="debt-bar"></div>
                    <div class="debt-bar"></div>
                    <div class="debt-bar"></div>
                    <div class="debt-bar"></div>
                    <div class="debt-bar"></div>
                  </div>
                  <div class="debt-label">Year 1 ‚Üí Year 5</div>
                  <div class="debt-impact">‚¨áÔ∏è Continuous refactoring pays off</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Maintainability</strong> refers to how easily a system can be modified to fix bugs, improve performance, add features, or adapt to changes. It's critical for long-term system health.</p>
          <p>A maintainable system reduces technical debt, enables faster development cycles, and makes it easier for new team members to contribute effectively.</p>
        `,
        keyPoints: [
          { icon: "üìù", title: "Clean Code", desc: "Write readable, well-structured code with clear naming conventions and consistent style.", color: "#06b6d4" },
          { icon: "üìö", title: "Documentation", desc: "Maintain up-to-date documentation for architecture, APIs, and operational procedures.", color: "#3b82f6" },
          { icon: "üß©", title: "Modularity", desc: "Design loosely coupled components that can be modified independently.", color: "#8b5cf6" },
          { icon: "üîç", title: "Observability", desc: "Implement logging, metrics, and tracing to understand system behavior.", color: "#10b981" }
        ],
        formula: "Maintainability = Operability + Simplicity + Evolvability",
        strategies: [
          { title: "Code Reviews", desc: "Enforce peer reviews to catch issues early, share knowledge, and maintain code quality standards." },
          { title: "Automated Testing", desc: "Build comprehensive test suites (unit, integration, e2e) to enable confident refactoring." },
          { title: "Infrastructure as Code", desc: "Version control infrastructure configurations for reproducibility and change tracking." },
          { title: "Continuous Refactoring", desc: "Regularly improve code structure without changing behavior to prevent technical debt accumulation." }
        ],
        metrics: [
          { level: "MTTR", downtime: "Mean Time To Repair", useCase: "How quickly bugs are fixed" },
          { level: "Code Coverage", downtime: "% of tested code", useCase: "Confidence in changes" },
          { level: "Cyclomatic Complexity", downtime: "Code complexity score", useCase: "Readability indicator" },
          { level: "Deploy Frequency", downtime: "Deploys per day/week", useCase: "Development velocity" }
        ]
      },
      performance: {
        title: "Performance",
        subtitle: "The responsiveness and efficiency of a system in processing requests and utilizing resources.",
        badge: { text: "Core Principle", color: "#ef4444", bg: "rgba(239, 68, 68, 0.15)" },
        color: "#ef4444",
        diagram: `
          <style>
            .performance-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .perf-row {
              display: flex;
              gap: 20px;
            }
            @media (max-width: 900px) {
              .perf-row { flex-direction: column; }
            }
            
            /* Latency Gauge */
            .latency-gauge {
              flex: 1;
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(239, 68, 68, 0.2);
              text-align: center;
            }
            .gauge-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 8px;
            }
            .gauge-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #ef4444;
              border-radius: 50%;
            }
            .gauge-container {
              position: relative;
              width: 180px;
              height: 100px;
              margin: 0 auto 16px;
            }
            .gauge-bg {
              position: absolute;
              width: 180px;
              height: 90px;
              border-radius: 90px 90px 0 0;
              background: conic-gradient(from 180deg at 50% 100%, 
                #10b981 0deg, 
                #10b981 60deg, 
                #f59e0b 60deg, 
                #f59e0b 120deg, 
                #ef4444 120deg, 
                #ef4444 180deg);
              opacity: 0.3;
            }
            .gauge-fill {
              position: absolute;
              bottom: 0;
              left: 50%;
              width: 4px;
              height: 70px;
              background: linear-gradient(to top, #ef4444, #fff);
              transform-origin: bottom center;
              transform: translateX(-50%) rotate(-60deg);
              border-radius: 2px;
              animation: gaugeSwing 3s ease-in-out infinite;
            }
            @keyframes gaugeSwing {
              0%, 100% { transform: translateX(-50%) rotate(-60deg); }
              50% { transform: translateX(-50%) rotate(-45deg); }
            }
            .gauge-center {
              position: absolute;
              bottom: -5px;
              left: 50%;
              transform: translateX(-50%);
              width: 16px;
              height: 16px;
              background: #1a1f2e;
              border: 3px solid #ef4444;
              border-radius: 50%;
            }
            .gauge-labels {
              display: flex;
              justify-content: space-between;
              font-size: 0.65rem;
              color: #6b7280;
              margin-top: 8px;
            }
            .gauge-value {
              font-size: 2rem;
              font-weight: 700;
              color: #10b981;
            }
            .gauge-unit {
              font-size: 0.9rem;
              color: #6b7280;
            }
            .gauge-status {
              font-size: 0.75rem;
              color: #10b981;
              margin-top: 4px;
            }
            
            /* Percentile Distribution */
            .percentile-section {
              flex: 1.5;
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(59, 130, 246, 0.2);
            }
            .percentile-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .percentile-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #3b82f6;
              border-radius: 50%;
            }
            .percentile-bars {
              display: flex;
              flex-direction: column;
              gap: 12px;
            }
            .percentile-row {
              display: flex;
              align-items: center;
              gap: 12px;
            }
            .percentile-label {
              width: 50px;
              font-size: 0.8rem;
              font-weight: 500;
              text-align: right;
            }
            .p50-label { color: #10b981; }
            .p90-label { color: #3b82f6; }
            .p95-label { color: #8b5cf6; }
            .p99-label { color: #f59e0b; }
            .p999-label { color: #ef4444; }
            .percentile-bar-bg {
              flex: 1;
              height: 24px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 4px;
              overflow: hidden;
              position: relative;
            }
            .percentile-bar-fill {
              height: 100%;
              border-radius: 4px;
              display: flex;
              align-items: center;
              padding-left: 10px;
              font-size: 0.7rem;
              font-weight: 500;
              color: rgba(255,255,255,0.9);
              transition: width 1s ease;
            }
            .p50-bar { width: 15%; background: linear-gradient(90deg, #10b981, #059669); }
            .p90-bar { width: 35%; background: linear-gradient(90deg, #3b82f6, #2563eb); }
            .p95-bar { width: 50%; background: linear-gradient(90deg, #8b5cf6, #7c3aed); }
            .p99-bar { width: 75%; background: linear-gradient(90deg, #f59e0b, #d97706); }
            .p999-bar { width: 100%; background: linear-gradient(90deg, #ef4444, #dc2626); }
            .percentile-value {
              width: 60px;
              font-size: 0.8rem;
              color: #a0a0b0;
            }
            
            /* Throughput Stats */
            .throughput-section {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .throughput-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .throughput-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .throughput-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 16px;
            }
            @media (max-width: 700px) {
              .throughput-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .throughput-stat {
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              padding: 16px;
              text-align: center;
              border: 1px solid rgba(255, 255, 255, 0.05);
            }
            .throughput-value {
              font-size: 1.5rem;
              font-weight: 700;
              margin-bottom: 4px;
            }
            .throughput-stat:nth-child(1) .throughput-value { color: #10b981; }
            .throughput-stat:nth-child(2) .throughput-value { color: #3b82f6; }
            .throughput-stat:nth-child(3) .throughput-value { color: #8b5cf6; }
            .throughput-stat:nth-child(4) .throughput-value { color: #f59e0b; }
            .throughput-label {
              font-size: 0.7rem;
              color: #6b7280;
            }
            .throughput-trend {
              font-size: 0.65rem;
              margin-top: 6px;
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 4px;
            }
            .trend-up { color: #10b981; }
            .trend-stable { color: #6b7280; }
          </style>
          
          <div class="performance-viz">
            <div class="perf-row">
              <!-- Response Time Gauge -->
              <div class="latency-gauge">
                <div class="gauge-title">Response Time</div>
                <div class="gauge-container">
                  <div class="gauge-bg"></div>
                  <div class="gauge-fill"></div>
                  <div class="gauge-center"></div>
                </div>
                <div class="gauge-labels">
                  <span style="color: #10b981;">Fast</span>
                  <span style="color: #f59e0b;">Medium</span>
                  <span style="color: #ef4444;">Slow</span>
                </div>
                <div class="gauge-value">42<span class="gauge-unit">ms</span></div>
                <div class="gauge-status">‚úì Excellent Performance</div>
              </div>
              
              <!-- Latency Percentiles -->
              <div class="percentile-section">
                <div class="percentile-title">Latency Distribution (Percentiles)</div>
                <div class="percentile-bars">
                  <div class="percentile-row">
                    <span class="percentile-label p50-label">P50</span>
                    <div class="percentile-bar-bg">
                      <div class="percentile-bar-fill p50-bar">12ms</div>
                    </div>
                    <span class="percentile-value">Median</span>
                  </div>
                  <div class="percentile-row">
                    <span class="percentile-label p90-label">P90</span>
                    <div class="percentile-bar-bg">
                      <div class="percentile-bar-fill p90-bar">45ms</div>
                    </div>
                    <span class="percentile-value">Most users</span>
                  </div>
                  <div class="percentile-row">
                    <span class="percentile-label p95-label">P95</span>
                    <div class="percentile-bar-bg">
                      <div class="percentile-bar-fill p95-bar">78ms</div>
                    </div>
                    <span class="percentile-value">Typical SLA</span>
                  </div>
                  <div class="percentile-row">
                    <span class="percentile-label p99-label">P99</span>
                    <div class="percentile-bar-bg">
                      <div class="percentile-bar-fill p99-bar">156ms</div>
                    </div>
                    <span class="percentile-value">Outliers</span>
                  </div>
                  <div class="percentile-row">
                    <span class="percentile-label p999-label">P99.9</span>
                    <div class="percentile-bar-bg">
                      <div class="percentile-bar-fill p999-bar">420ms</div>
                    </div>
                    <span class="percentile-value">Worst case</span>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Throughput Metrics -->
            <div class="throughput-section">
              <div class="throughput-title">Real-Time Throughput Metrics</div>
              <div class="throughput-grid">
                <div class="throughput-stat">
                  <div class="throughput-value">12.5K</div>
                  <div class="throughput-label">Requests/sec</div>
                  <div class="throughput-trend trend-up">‚Üë 8% from avg</div>
                </div>
                <div class="throughput-stat">
                  <div class="throughput-value">99.2%</div>
                  <div class="throughput-label">Success Rate</div>
                  <div class="throughput-trend trend-stable">‚Üí Stable</div>
                </div>
                <div class="throughput-stat">
                  <div class="throughput-value">2.1</div>
                  <div class="throughput-label">Apdex Score</div>
                  <div class="throughput-trend trend-up">‚Üë Excellent</div>
                </div>
                <div class="throughput-stat">
                  <div class="throughput-value">34%</div>
                  <div class="throughput-label">CPU Usage</div>
                  <div class="throughput-trend trend-stable">‚Üí Optimal</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Performance</strong> measures how well a system utilizes resources to respond to requests. Key metrics include latency (response time) and throughput (requests per second).</p>
          <p>Good performance is essential for user experience, SEO rankings, and operational costs. Even small improvements in response time can significantly impact conversion rates.</p>
        `,
        keyPoints: [
          { icon: "‚è±Ô∏è", title: "Latency", desc: "Time taken to respond to a request. Aim for P99 latency, not just average.", color: "#ef4444" },
          { icon: "üìä", title: "Throughput", desc: "Number of requests processed per unit time. Balance with latency.", color: "#3b82f6" },
          { icon: "üîÑ", title: "Resource Efficiency", desc: "Optimize CPU, memory, and I/O usage to reduce costs and improve speed.", color: "#10b981" },
          { icon: "üìà", title: "Scalable Performance", desc: "Maintain performance characteristics as load increases.", color: "#8b5cf6" }
        ],
        formula: "Latency Percentiles: P50 < P90 < P95 < P99 < P99.9",
        strategies: [
          { title: "Database Optimization", desc: "Use proper indexes, query optimization, connection pooling, and read replicas." },
          { title: "Caching Strategy", desc: "Cache at multiple levels - CDN, application, database query cache." },
          { title: "Async Processing", desc: "Offload heavy operations to background jobs and message queues." },
          { title: "Performance Testing", desc: "Regular load testing and profiling to identify bottlenecks before production." }
        ],
        metrics: [
          { level: "P50", downtime: "Median latency", useCase: "Typical user experience" },
          { level: "P99", downtime: "99th percentile", useCase: "Worst-case scenarios" },
          { level: "RPS", downtime: "Requests per second", useCase: "System capacity" },
          { level: "Apdex", downtime: "Application Performance Index", useCase: "User satisfaction score" }
        ]
      },
      security: {
        title: "Security",
        subtitle: "Protecting system data and resources from unauthorized access, breaches, and attacks.",
        badge: { text: "Core Principle", color: "#dc2626", bg: "rgba(220, 38, 38, 0.15)" },
        color: "#dc2626",
        diagram: `
          <style>
            .security-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .security-row {
              display: flex;
              gap: 20px;
            }
            @media (max-width: 900px) {
              .security-row { flex-direction: column; }
            }
            
            /* Defense in Depth */
            .defense-layers {
              flex: 1.5;
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(220, 38, 38, 0.2);
            }
            .defense-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .defense-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #dc2626;
              border-radius: 50%;
            }
            .layers-container {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 6px;
            }
            .defense-layer {
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 10px;
              padding: 10px 20px;
              border-radius: 30px;
              font-size: 0.8rem;
              font-weight: 500;
              transition: all 0.3s ease;
              border: 1px solid;
            }
            .defense-layer:hover {
              transform: scale(1.02);
            }
            .layer-1 {
              width: 95%;
              background: rgba(239, 68, 68, 0.1);
              border-color: rgba(239, 68, 68, 0.3);
              color: #f87171;
            }
            .layer-2 {
              width: 82%;
              background: rgba(245, 158, 11, 0.1);
              border-color: rgba(245, 158, 11, 0.3);
              color: #fbbf24;
            }
            .layer-3 {
              width: 69%;
              background: rgba(139, 92, 246, 0.1);
              border-color: rgba(139, 92, 246, 0.3);
              color: #a78bfa;
            }
            .layer-4 {
              width: 56%;
              background: rgba(59, 130, 246, 0.1);
              border-color: rgba(59, 130, 246, 0.3);
              color: #60a5fa;
            }
            .layer-5 {
              width: 43%;
              background: rgba(16, 185, 129, 0.1);
              border-color: rgba(16, 185, 129, 0.3);
              color: #34d399;
            }
            .layer-core {
              width: 30%;
              background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(6, 182, 212, 0.3));
              border-color: rgba(16, 185, 129, 0.5);
              color: #10b981;
              font-weight: 600;
            }
            .layer-icon {
              font-size: 1rem;
            }
            .attacker-label {
              font-size: 0.65rem;
              color: #ef4444;
              text-align: center;
              margin-top: 8px;
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 6px;
            }
            
            /* CIA Triad */
            .cia-section {
              flex: 1;
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(59, 130, 246, 0.2);
            }
            .cia-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .cia-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #3b82f6;
              border-radius: 50%;
            }
            .cia-triangle {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 12px;
            }
            .cia-item {
              display: flex;
              align-items: center;
              gap: 12px;
              padding: 12px 16px;
              border-radius: 10px;
              width: 100%;
              border: 1px solid;
            }
            .cia-c {
              background: rgba(59, 130, 246, 0.1);
              border-color: rgba(59, 130, 246, 0.3);
            }
            .cia-i {
              background: rgba(16, 185, 129, 0.1);
              border-color: rgba(16, 185, 129, 0.3);
            }
            .cia-a {
              background: rgba(139, 92, 246, 0.1);
              border-color: rgba(139, 92, 246, 0.3);
            }
            .cia-icon {
              font-size: 1.5rem;
            }
            .cia-content {
              flex: 1;
            }
            .cia-name {
              font-weight: 600;
              font-size: 0.9rem;
              margin-bottom: 2px;
            }
            .cia-c .cia-name { color: #3b82f6; }
            .cia-i .cia-name { color: #10b981; }
            .cia-a .cia-name { color: #8b5cf6; }
            .cia-desc {
              font-size: 0.7rem;
              color: #6b7280;
            }
            
            /* Threat Landscape */
            .threat-section {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .threat-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .threat-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .threat-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .threat-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .threat-card {
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              padding: 14px;
              text-align: center;
              border: 1px solid rgba(255, 255, 255, 0.05);
              transition: all 0.3s ease;
            }
            .threat-card:hover {
              border-color: rgba(239, 68, 68, 0.3);
              transform: translateY(-2px);
            }
            .threat-icon {
              font-size: 1.5rem;
              margin-bottom: 8px;
            }
            .threat-name {
              font-size: 0.75rem;
              font-weight: 500;
              color: #e5e5e5;
              margin-bottom: 4px;
            }
            .threat-severity {
              font-size: 0.65rem;
              padding: 2px 8px;
              border-radius: 10px;
              display: inline-block;
            }
            .severity-critical {
              background: rgba(239, 68, 68, 0.2);
              color: #f87171;
            }
            .severity-high {
              background: rgba(245, 158, 11, 0.2);
              color: #fbbf24;
            }
            .severity-medium {
              background: rgba(59, 130, 246, 0.2);
              color: #60a5fa;
            }
          </style>
          
          <div class="security-viz">
            <div class="security-row">
              <!-- Defense in Depth Layers -->
              <div class="defense-layers">
                <div class="defense-title">Defense in Depth</div>
                <div class="layers-container">
                  <div class="defense-layer layer-1">
                    <span class="layer-icon">üåê</span>
                    <span>Perimeter Security (Firewall, WAF, DDoS Protection)</span>
                  </div>
                  <div class="defense-layer layer-2">
                    <span class="layer-icon">üîê</span>
                    <span>Network Security (VPN, Segmentation)</span>
                  </div>
                  <div class="defense-layer layer-3">
                    <span class="layer-icon">üîë</span>
                    <span>Authentication & Authorization</span>
                  </div>
                  <div class="defense-layer layer-4">
                    <span class="layer-icon">üõ°Ô∏è</span>
                    <span>Application Security</span>
                  </div>
                  <div class="defense-layer layer-5">
                    <span class="layer-icon">üîí</span>
                    <span>Data Encryption</span>
                  </div>
                  <div class="defense-layer layer-core">
                    <span class="layer-icon">üíé</span>
                    <span>Protected Data</span>
                  </div>
                </div>
                <div class="attacker-label">
                  <span>‚ò†Ô∏è</span> Attackers must breach multiple layers
                </div>
              </div>
              
              <!-- CIA Triad -->
              <div class="cia-section">
                <div class="cia-title">CIA Triad</div>
                <div class="cia-triangle">
                  <div class="cia-item cia-c">
                    <span class="cia-icon">üîè</span>
                    <div class="cia-content">
                      <div class="cia-name">Confidentiality</div>
                      <div class="cia-desc">Data accessible only to authorized users</div>
                    </div>
                  </div>
                  <div class="cia-item cia-i">
                    <span class="cia-icon">‚úÖ</span>
                    <div class="cia-content">
                      <div class="cia-name">Integrity</div>
                      <div class="cia-desc">Data is accurate and unaltered</div>
                    </div>
                  </div>
                  <div class="cia-item cia-a">
                    <span class="cia-icon">‚ö°</span>
                    <div class="cia-content">
                      <div class="cia-name">Availability</div>
                      <div class="cia-desc">Systems accessible when needed</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Common Threats -->
            <div class="threat-section">
              <div class="threat-title">Common Security Threats (OWASP)</div>
              <div class="threat-grid">
                <div class="threat-card">
                  <div class="threat-icon">üíâ</div>
                  <div class="threat-name">Injection</div>
                  <div class="threat-severity severity-critical">Critical</div>
                </div>
                <div class="threat-card">
                  <div class="threat-icon">üîì</div>
                  <div class="threat-name">Broken Auth</div>
                  <div class="threat-severity severity-critical">Critical</div>
                </div>
                <div class="threat-card">
                  <div class="threat-icon">üìã</div>
                  <div class="threat-name">Data Exposure</div>
                  <div class="threat-severity severity-high">High</div>
                </div>
                <div class="threat-card">
                  <div class="threat-icon">üï∑Ô∏è</div>
                  <div class="threat-name">XSS Attack</div>
                  <div class="threat-severity severity-high">High</div>
                </div>
                <div class="threat-card">
                  <div class="threat-icon">‚öôÔ∏è</div>
                  <div class="threat-name">Misconfig</div>
                  <div class="threat-severity severity-medium">Medium</div>
                </div>
                <div class="threat-card">
                  <div class="threat-icon">üì¶</div>
                  <div class="threat-name">Vuln. Components</div>
                  <div class="threat-severity severity-high">High</div>
                </div>
                <div class="threat-card">
                  <div class="threat-icon">üìù</div>
                  <div class="threat-name">Logging Gaps</div>
                  <div class="threat-severity severity-medium">Medium</div>
                </div>
                <div class="threat-card">
                  <div class="threat-icon">üîó</div>
                  <div class="threat-name">SSRF</div>
                  <div class="threat-severity severity-high">High</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Security</strong> encompasses all measures taken to protect a system from threats, vulnerabilities, and unauthorized access. It follows the CIA triad: Confidentiality, Integrity, and Availability.</p>
          <p>Security must be built into the system from the ground up (security by design), not added as an afterthought. It requires continuous monitoring and updates.</p>
        `,
        keyPoints: [
          { icon: "üîë", title: "Authentication", desc: "Verify user identity using passwords, MFA, OAuth, or certificates.", color: "#dc2626" },
          { icon: "üõ°Ô∏è", title: "Authorization", desc: "Control what authenticated users can access using RBAC or ABAC.", color: "#8b5cf6" },
          { icon: "üîê", title: "Encryption", desc: "Protect data at rest and in transit using TLS, AES, and proper key management.", color: "#3b82f6" },
          { icon: "üîç", title: "Audit Logging", desc: "Track all security-relevant events for detection and forensics.", color: "#10b981" }
        ],
        formula: "Security = Prevention + Detection + Response + Recovery",
        strategies: [
          { title: "Defense in Depth", desc: "Layer multiple security controls so breach of one doesn't compromise everything." },
          { title: "Least Privilege", desc: "Grant minimum permissions necessary for each user, service, or process." },
          { title: "Security Testing", desc: "Regular penetration testing, vulnerability scanning, and security audits." },
          { title: "Incident Response", desc: "Have documented procedures for detecting, responding to, and recovering from breaches." }
        ],
        metrics: [
          { level: "OWASP Top 10", downtime: "Common vulnerabilities", useCase: "Web application security" },
          { level: "SOC 2", downtime: "Security compliance", useCase: "Enterprise requirements" },
          { level: "MTTR (Security)", downtime: "Time to remediate", useCase: "Vulnerability response" },
          { level: "CVE Count", downtime: "Known vulnerabilities", useCase: "Dependency security" }
        ]
      },
      observability: {
        title: "Observability",
        subtitle: "The ability to understand a system's internal state by examining its external outputs: logs, metrics, and traces.",
        badge: { text: "Core Principle", color: "#14b8a6", bg: "rgba(20, 184, 166, 0.15)" },
        color: "#14b8a6",
        diagram: `
          <style>
            .obs-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .obs-pillars {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(20, 184, 166, 0.2);
            }
            .obs-pillars-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .obs-pillars-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #14b8a6;
              border-radius: 50%;
            }
            .obs-three {
              display: grid;
              grid-template-columns: repeat(3, 1fr);
              gap: 16px;
            }
            @media (max-width: 700px) {
              .obs-three { grid-template-columns: 1fr; }
            }
            .obs-pillar {
              padding: 20px;
              border-radius: 14px;
              text-align: center;
              transition: all 0.3s ease;
            }
            .obs-pillar:hover {
              transform: translateY(-4px);
            }
            .obs-pillar.logs {
              background: rgba(59, 130, 246, 0.15);
              border: 1px solid rgba(59, 130, 246, 0.4);
            }
            .obs-pillar.metrics {
              background: rgba(16, 185, 129, 0.15);
              border: 1px solid rgba(16, 185, 129, 0.4);
            }
            .obs-pillar.traces {
              background: rgba(139, 92, 246, 0.15);
              border: 1px solid rgba(139, 92, 246, 0.4);
            }
            .obs-pillar-icon {
              font-size: 2.5rem;
              margin-bottom: 12px;
            }
            .obs-pillar-name {
              font-weight: 700;
              font-size: 1.1rem;
              margin-bottom: 8px;
            }
            .obs-pillar.logs .obs-pillar-name { color: #3b82f6; }
            .obs-pillar.metrics .obs-pillar-name { color: #10b981; }
            .obs-pillar.traces .obs-pillar-name { color: #8b5cf6; }
            .obs-pillar-desc {
              font-size: 0.8rem;
              color: #a0a0b0;
              margin-bottom: 12px;
            }
            .obs-pillar-examples {
              display: flex;
              flex-wrap: wrap;
              gap: 6px;
              justify-content: center;
            }
            .obs-example {
              font-size: 0.65rem;
              padding: 4px 8px;
              background: rgba(0, 0, 0, 0.2);
              border-radius: 6px;
              color: #888;
            }
            
            /* Dashboard Preview */
            .obs-dashboard {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .obs-dash-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .obs-dash-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .obs-dash-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .obs-dash-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .obs-metric {
              padding: 14px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
            }
            .obs-metric-value {
              font-size: 1.4rem;
              font-weight: 700;
              margin-bottom: 4px;
            }
            .obs-metric:nth-child(1) .obs-metric-value { color: #10b981; }
            .obs-metric:nth-child(2) .obs-metric-value { color: #3b82f6; }
            .obs-metric:nth-child(3) .obs-metric-value { color: #f59e0b; }
            .obs-metric:nth-child(4) .obs-metric-value { color: #ef4444; }
            .obs-metric-label {
              font-size: 0.7rem;
              color: #6b7280;
            }
            .obs-metric-trend {
              font-size: 0.65rem;
              margin-top: 4px;
            }
            .obs-metric:nth-child(1) .obs-metric-trend { color: #10b981; }
            .obs-metric:nth-child(2) .obs-metric-trend { color: #3b82f6; }
            .obs-metric:nth-child(3) .obs-metric-trend { color: #f59e0b; }
            .obs-metric:nth-child(4) .obs-metric-trend { color: #ef4444; }
          </style>
          
          <div class="obs-viz">
            <!-- Three Pillars -->
            <div class="obs-pillars">
              <div class="obs-pillars-title">The Three Pillars of Observability</div>
              <div class="obs-three">
                <div class="obs-pillar logs">
                  <div class="obs-pillar-icon">üìù</div>
                  <div class="obs-pillar-name">Logs</div>
                  <div class="obs-pillar-desc">Discrete events with timestamps and context</div>
                  <div class="obs-pillar-examples">
                    <span class="obs-example">ELK Stack</span>
                    <span class="obs-example">Splunk</span>
                    <span class="obs-example">Loki</span>
                  </div>
                </div>
                <div class="obs-pillar metrics">
                  <div class="obs-pillar-icon">üìä</div>
                  <div class="obs-pillar-name">Metrics</div>
                  <div class="obs-pillar-desc">Numeric measurements over time intervals</div>
                  <div class="obs-pillar-examples">
                    <span class="obs-example">Prometheus</span>
                    <span class="obs-example">Grafana</span>
                    <span class="obs-example">Datadog</span>
                  </div>
                </div>
                <div class="obs-pillar traces">
                  <div class="obs-pillar-icon">üîó</div>
                  <div class="obs-pillar-name">Traces</div>
                  <div class="obs-pillar-desc">Request journey across distributed services</div>
                  <div class="obs-pillar-examples">
                    <span class="obs-example">Jaeger</span>
                    <span class="obs-example">Zipkin</span>
                    <span class="obs-example">OpenTelemetry</span>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Dashboard Preview -->
            <div class="obs-dashboard">
              <div class="obs-dash-title">Real-Time System Dashboard</div>
              <div class="obs-dash-grid">
                <div class="obs-metric">
                  <div class="obs-metric-value">99.9%</div>
                  <div class="obs-metric-label">Uptime</div>
                  <div class="obs-metric-trend">‚Üë Stable</div>
                </div>
                <div class="obs-metric">
                  <div class="obs-metric-value">42ms</div>
                  <div class="obs-metric-label">P95 Latency</div>
                  <div class="obs-metric-trend">‚Üì -5ms</div>
                </div>
                <div class="obs-metric">
                  <div class="obs-metric-value">2.3K</div>
                  <div class="obs-metric-label">Errors/day</div>
                  <div class="obs-metric-trend">‚Üë +12%</div>
                </div>
                <div class="obs-metric">
                  <div class="obs-metric-value">3</div>
                  <div class="obs-metric-label">Active Alerts</div>
                  <div class="obs-metric-trend">‚ö† Warning</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Observability</strong> is the ability to understand the internal state of a system by examining its external outputs. It goes beyond traditional monitoring by enabling you to ask arbitrary questions about your system without deploying new code.</p>
          <p>The three pillars‚Äîlogs, metrics, and traces‚Äîwork together to provide complete visibility into distributed systems, helping teams debug issues, understand performance, and maintain reliability.</p>
        `,
        keyPoints: [
          { icon: "üìù", title: "Logs", desc: "Timestamped records of discrete events. Essential for debugging and audit trails.", color: "#3b82f6" },
          { icon: "üìä", title: "Metrics", desc: "Numeric measurements aggregated over time. Great for alerting and dashboards.", color: "#10b981" },
          { icon: "üîó", title: "Traces", desc: "End-to-end request paths across services. Critical for debugging distributed systems.", color: "#8b5cf6" },
          { icon: "üö®", title: "Alerting", desc: "Proactive notifications when metrics exceed thresholds or anomalies are detected.", color: "#ef4444" }
        ],
        formula: "Observability = Logs + Metrics + Traces + Context",
        strategies: [
          { title: "Structured Logging", desc: "Use JSON logs with consistent fields for easy querying and correlation across services." },
          { title: "Distributed Tracing", desc: "Implement trace context propagation (OpenTelemetry) to follow requests across service boundaries." },
          { title: "SLI/SLO Monitoring", desc: "Define Service Level Indicators and Objectives to measure what matters to users." },
          { title: "Correlation IDs", desc: "Use request IDs that flow through all services to connect logs, metrics, and traces." }
        ],
        metrics: [
          { level: "Prometheus", downtime: "Metrics collection", useCase: "Time-series database" },
          { level: "Grafana", downtime: "Visualization", useCase: "Dashboards and alerts" },
          { level: "OpenTelemetry", downtime: "Instrumentation", useCase: "Vendor-neutral standard" },
          { level: "ELK Stack", downtime: "Log aggregation", useCase: "Search and analysis" }
        ]
      },
      "cost-efficiency": {
        title: "Cost Efficiency",
        subtitle: "Optimizing infrastructure and operational costs while maintaining performance, reliability, and scalability requirements.",
        badge: { text: "Core Principle", color: "#22c55e", bg: "rgba(34, 197, 94, 0.15)" },
        color: "#22c55e",
        diagram: `
          <style>
            .cost-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .cost-breakdown {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(34, 197, 94, 0.2);
            }
            .cost-breakdown-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .cost-breakdown-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #22c55e;
              border-radius: 50%;
            }
            .cost-chart {
              display: flex;
              align-items: flex-end;
              justify-content: center;
              gap: 16px;
              height: 160px;
              margin-bottom: 16px;
            }
            .cost-bar {
              display: flex;
              flex-direction: column;
              align-items: center;
              text-align: center;
            }
            .cost-bar-fill {
              width: 60px;
              border-radius: 8px 8px 0 0;
              display: flex;
              align-items: flex-end;
              justify-content: center;
              padding-bottom: 8px;
              color: white;
              font-weight: 600;
              font-size: 0.85rem;
              transition: all 0.3s ease;
            }
            .cost-bar:nth-child(1) .cost-bar-fill { height: 140px; background: linear-gradient(180deg, #3b82f6, #1d4ed8); }
            .cost-bar:nth-child(2) .cost-bar-fill { height: 90px; background: linear-gradient(180deg, #8b5cf6, #6d28d9); }
            .cost-bar:nth-child(3) .cost-bar-fill { height: 60px; background: linear-gradient(180deg, #f59e0b, #d97706); }
            .cost-bar:nth-child(4) .cost-bar-fill { height: 40px; background: linear-gradient(180deg, #10b981, #059669); }
            .cost-bar:nth-child(5) .cost-bar-fill { height: 30px; background: linear-gradient(180deg, #ec4899, #db2777); }
            .cost-bar-label {
              font-size: 0.75rem;
              color: #a0a0b0;
              margin-top: 8px;
            }
            .cost-total {
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 12px 16px;
              background: rgba(34, 197, 94, 0.1);
              border: 1px solid rgba(34, 197, 94, 0.3);
              border-radius: 10px;
            }
            .cost-total-label {
              font-size: 0.85rem;
              color: #a0a0b0;
            }
            .cost-total-value {
              font-size: 1.2rem;
              font-weight: 700;
              color: #22c55e;
            }
            
            /* Optimization Tips */
            .cost-tips {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .cost-tips-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .cost-tips-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .cost-tips-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .cost-tips-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .cost-tip {
              padding: 16px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
              transition: all 0.3s ease;
            }
            .cost-tip:hover {
              transform: translateY(-3px);
              border: 1px solid rgba(34, 197, 94, 0.3);
            }
            .cost-tip-icon {
              font-size: 1.5rem;
              margin-bottom: 8px;
            }
            .cost-tip-name {
              font-size: 0.8rem;
              font-weight: 500;
              color: #e5e5e5;
              margin-bottom: 4px;
            }
            .cost-tip-savings {
              font-size: 0.7rem;
              color: #22c55e;
            }
          </style>
          
          <div class="cost-viz">
            <!-- Cost Breakdown -->
            <div class="cost-breakdown">
              <div class="cost-breakdown-title">Typical Cloud Cost Breakdown</div>
              <div class="cost-chart">
                <div class="cost-bar">
                  <div class="cost-bar-fill">40%</div>
                  <div class="cost-bar-label">Compute</div>
                </div>
                <div class="cost-bar">
                  <div class="cost-bar-fill">25%</div>
                  <div class="cost-bar-label">Database</div>
                </div>
                <div class="cost-bar">
                  <div class="cost-bar-fill">15%</div>
                  <div class="cost-bar-label">Storage</div>
                </div>
                <div class="cost-bar">
                  <div class="cost-bar-fill">12%</div>
                  <div class="cost-bar-label">Network</div>
                </div>
                <div class="cost-bar">
                  <div class="cost-bar-fill">8%</div>
                  <div class="cost-bar-label">Other</div>
                </div>
              </div>
              <div class="cost-total">
                <span class="cost-total-label">üí° Typical savings potential with optimization</span>
                <span class="cost-total-value">30-50%</span>
              </div>
            </div>
            
            <!-- Optimization Tips -->
            <div class="cost-tips">
              <div class="cost-tips-title">Cost Optimization Strategies</div>
              <div class="cost-tips-grid">
                <div class="cost-tip">
                  <div class="cost-tip-icon">üìâ</div>
                  <div class="cost-tip-name">Right-sizing</div>
                  <div class="cost-tip-savings">~20-30% savings</div>
                </div>
                <div class="cost-tip">
                  <div class="cost-tip-icon">üí∞</div>
                  <div class="cost-tip-name">Reserved Instances</div>
                  <div class="cost-tip-savings">~40-60% savings</div>
                </div>
                <div class="cost-tip">
                  <div class="cost-tip-icon">üîÑ</div>
                  <div class="cost-tip-name">Spot Instances</div>
                  <div class="cost-tip-savings">~70-90% savings</div>
                </div>
                <div class="cost-tip">
                  <div class="cost-tip-icon">üåô</div>
                  <div class="cost-tip-name">Auto-shutdown</div>
                  <div class="cost-tip-savings">~65% savings</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Cost Efficiency</strong> is the practice of optimizing cloud and infrastructure spending while maintaining required performance, reliability, and scalability. It's a critical aspect of FinOps (Financial Operations).</p>
          <p>Effective cost management requires visibility into spending, understanding of pricing models, right-sizing resources, and building cost-awareness into the engineering culture.</p>
        `,
        keyPoints: [
          { icon: "üìä", title: "Cost Visibility", desc: "Track and allocate costs by team, service, and environment using tagging and cost management tools.", color: "#22c55e" },
          { icon: "üìâ", title: "Right-sizing", desc: "Match resource capacity to actual usage. Eliminate over-provisioned and idle resources.", color: "#3b82f6" },
          { icon: "üí∞", title: "Pricing Models", desc: "Use reserved instances, savings plans, and spot instances for predictable and flexible workloads.", color: "#f59e0b" },
          { icon: "üîÑ", title: "Auto-scaling", desc: "Scale resources dynamically based on demand to avoid paying for unused capacity.", color: "#8b5cf6" }
        ],
        formula: "Cost Efficiency = Value Delivered / Total Cost of Ownership",
        strategies: [
          { title: "FinOps Practice", desc: "Establish cross-functional collaboration between engineering, finance, and business to optimize cloud value." },
          { title: "Tagging Strategy", desc: "Implement consistent resource tagging to enable cost allocation and accountability by team/project." },
          { title: "Architectural Optimization", desc: "Choose cost-effective architectures: serverless for spiky workloads, containers for consistent loads." },
          { title: "Continuous Optimization", desc: "Regular reviews of spending, unused resources, and opportunities for savings (reserved instances, etc.)." }
        ],
        metrics: [
          { level: "Cost per Request", downtime: "Infrastructure efficiency", useCase: "API cost tracking" },
          { level: "Cost per Customer", downtime: "Unit economics", useCase: "Business viability" },
          { level: "Cloud Waste %", downtime: "Unused resources", useCase: "Optimization priority" },
          { level: "Budget Variance", downtime: "Forecast accuracy", useCase: "Financial planning" }
        ]
      },
      partitioning: {
        title: "Partitioning",
        subtitle: "Dividing data across multiple nodes to distribute load and improve performance.",
        badge: { text: "Data Management", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" },
        color: "#f59e0b",
        diagram: `
          <style>
            .part-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .part-demo {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .part-demo-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .part-demo-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .part-flow {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 16px;
            }
            .part-source {
              padding: 16px 40px;
              background: linear-gradient(135deg, #f59e0b, #d97706);
              border-radius: 12px;
              color: white;
              text-align: center;
              box-shadow: 0 8px 32px rgba(245, 158, 11, 0.3);
            }
            .part-source-icon {
              font-size: 2rem;
              margin-bottom: 4px;
            }
            .part-source-text {
              font-weight: 600;
            }
            .part-source-size {
              font-size: 0.75rem;
              opacity: 0.8;
            }
            .part-arrow {
              color: #6b7280;
              font-size: 1rem;
            }
            .part-key {
              padding: 10px 20px;
              background: rgba(139, 92, 246, 0.15);
              border: 1px dashed rgba(139, 92, 246, 0.4);
              border-radius: 8px;
              font-size: 0.8rem;
              color: #a78bfa;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .part-shards {
              display: flex;
              gap: 14px;
              flex-wrap: wrap;
              justify-content: center;
            }
            .part-shard {
              padding: 16px 20px;
              border-radius: 12px;
              text-align: center;
              min-width: 100px;
              transition: all 0.3s ease;
            }
            .part-shard:hover {
              transform: translateY(-3px);
            }
            .part-shard:nth-child(1) { background: rgba(59, 130, 246, 0.15); border: 1px solid rgba(59, 130, 246, 0.4); }
            .part-shard:nth-child(2) { background: rgba(16, 185, 129, 0.15); border: 1px solid rgba(16, 185, 129, 0.4); }
            .part-shard:nth-child(3) { background: rgba(139, 92, 246, 0.15); border: 1px solid rgba(139, 92, 246, 0.4); }
            .part-shard:nth-child(4) { background: rgba(236, 72, 153, 0.15); border: 1px solid rgba(236, 72, 153, 0.4); }
            .part-shard-icon {
              font-size: 1.5rem;
              margin-bottom: 6px;
            }
            .part-shard-name {
              font-size: 0.85rem;
              font-weight: 500;
              margin-bottom: 4px;
            }
            .part-shard:nth-child(1) .part-shard-name { color: #3b82f6; }
            .part-shard:nth-child(2) .part-shard-name { color: #10b981; }
            .part-shard:nth-child(3) .part-shard-name { color: #8b5cf6; }
            .part-shard:nth-child(4) .part-shard-name { color: #ec4899; }
            .part-shard-range {
              font-size: 0.7rem;
              color: #6b7280;
            }
            .part-shard-count {
              font-size: 0.65rem;
              color: #6b7280;
              margin-top: 4px;
            }
            
            /* Strategies */
            .part-strategies {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .part-strat-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .part-strat-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .part-strat-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .part-strat-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .part-strat {
              padding: 14px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
            }
            .part-strat-icon {
              font-size: 1.4rem;
              margin-bottom: 6px;
            }
            .part-strat-name {
              font-size: 0.8rem;
              font-weight: 500;
              color: #e5e5e5;
              margin-bottom: 3px;
            }
            .part-strat-desc {
              font-size: 0.65rem;
              color: #6b7280;
            }
          </style>
          
          <div class="part-viz">
            <!-- Partitioning Demo -->
            <div class="part-demo">
              <div class="part-demo-title">Data Partitioning (Sharding)</div>
              <div class="part-flow">
                <div class="part-source">
                  <div class="part-source-icon">üì¶</div>
                  <div class="part-source-text">Full Dataset</div>
                  <div class="part-source-size">10TB ‚Ä¢ 100M records</div>
                </div>
                <div class="part-arrow">‚¨áÔ∏è Partition by user_id ‚¨áÔ∏è</div>
                <div class="part-key">üîë hash(user_id) % 4 ‚Üí Shard Assignment</div>
                <div class="part-shards">
                  <div class="part-shard">
                    <div class="part-shard-icon">üìÅ</div>
                    <div class="part-shard-name">Shard 0</div>
                    <div class="part-shard-range">hash = 0</div>
                    <div class="part-shard-count">25M records</div>
                  </div>
                  <div class="part-shard">
                    <div class="part-shard-icon">üìÅ</div>
                    <div class="part-shard-name">Shard 1</div>
                    <div class="part-shard-range">hash = 1</div>
                    <div class="part-shard-count">25M records</div>
                  </div>
                  <div class="part-shard">
                    <div class="part-shard-icon">üìÅ</div>
                    <div class="part-shard-name">Shard 2</div>
                    <div class="part-shard-range">hash = 2</div>
                    <div class="part-shard-count">25M records</div>
                  </div>
                  <div class="part-shard">
                    <div class="part-shard-icon">üìÅ</div>
                    <div class="part-shard-name">Shard 3</div>
                    <div class="part-shard-range">hash = 3</div>
                    <div class="part-shard-count">25M records</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Strategies -->
            <div class="part-strategies">
              <div class="part-strat-title">Partitioning Strategies</div>
              <div class="part-strat-grid">
                <div class="part-strat">
                  <div class="part-strat-icon">üìè</div>
                  <div class="part-strat-name">Range</div>
                  <div class="part-strat-desc">By date or ID range</div>
                </div>
                <div class="part-strat">
                  <div class="part-strat-icon">#Ô∏è‚É£</div>
                  <div class="part-strat-name">Hash</div>
                  <div class="part-strat-desc">Even distribution</div>
                </div>
                <div class="part-strat">
                  <div class="part-strat-icon">üìã</div>
                  <div class="part-strat-name">List</div>
                  <div class="part-strat-desc">By category/region</div>
                </div>
                <div class="part-strat">
                  <div class="part-strat-icon">üîÄ</div>
                  <div class="part-strat-name">Composite</div>
                  <div class="part-strat-desc">Combined approach</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Partitioning</strong> (also called sharding) divides a database into smaller, more manageable pieces called partitions. Each partition holds a subset of the data.</p>
          <p>This enables horizontal scaling by distributing data across multiple nodes, improving query performance and allowing the system to handle larger datasets.</p>
        `,
        keyPoints: [
          { icon: "üî§", title: "Range Partitioning", desc: "Divide data by ranges of a key (e.g., dates, alphabetical). Simple but can create hotspots.", color: "#f59e0b" },
          { icon: "#Ô∏è‚É£", title: "Hash Partitioning", desc: "Use hash function on key to distribute evenly. Good balance but harder range queries.", color: "#3b82f6" },
          { icon: "üìã", title: "List Partitioning", desc: "Assign partitions based on predefined lists (e.g., by country or category).", color: "#8b5cf6" },
          { icon: "üîÄ", title: "Composite Partitioning", desc: "Combine strategies (e.g., hash then range) for complex requirements.", color: "#10b981" }
        ],
        formula: "Partition Key ‚Üí Hash Function ‚Üí Partition Assignment",
        strategies: [
          { title: "Choose Good Partition Key", desc: "Select a key with high cardinality and even distribution to avoid hotspots." },
          { title: "Consistent Hashing", desc: "Use consistent hashing to minimize data movement when adding/removing nodes." },
          { title: "Secondary Indexes", desc: "Handle secondary indexes carefully - local (per-partition) or global (distributed)." },
          { title: "Cross-Partition Queries", desc: "Design to minimize queries that span multiple partitions for better performance." }
        ],
        metrics: [
          { level: "Shard Count", downtime: "Number of partitions", useCase: "Scale and management" },
          { level: "Hotspot Ratio", downtime: "Load imbalance", useCase: "Partition key effectiveness" },
          { level: "Rebalance Time", downtime: "Data migration duration", useCase: "Scaling operations" },
          { level: "Cross-shard %", downtime: "Multi-partition queries", useCase: "Query efficiency" }
        ]
      },
      replication: {
        title: "Replication",
        subtitle: "Copying data across multiple nodes to improve availability, durability, and read performance.",
        badge: { text: "Data Management", color: "#10b981", bg: "rgba(16, 185, 129, 0.15)" },
        color: "#10b981",
        diagram: `
          <style>
            .rep-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .rep-flow {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .rep-flow-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .rep-flow-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .rep-diagram {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 16px;
            }
            .rep-primary {
              padding: 20px 40px;
              background: linear-gradient(135deg, #10b981, #059669);
              border-radius: 14px;
              color: white;
              text-align: center;
              box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
              position: relative;
            }
            .rep-primary-icon {
              font-size: 2rem;
              margin-bottom: 4px;
            }
            .rep-primary-name {
              font-weight: 600;
              font-size: 1rem;
            }
            .rep-primary-role {
              font-size: 0.75rem;
              opacity: 0.8;
            }
            .rep-arrows {
              display: flex;
              gap: 30px;
              color: #10b981;
            }
            .rep-arrow {
              display: flex;
              flex-direction: column;
              align-items: center;
              font-size: 0.7rem;
              color: #6b7280;
            }
            .rep-arrow-icon {
              font-size: 1.2rem;
              color: #10b981;
              animation: repSync 1s ease-in-out infinite;
            }
            .rep-arrow:nth-child(2) .rep-arrow-icon { animation-delay: 0.3s; }
            .rep-arrow:nth-child(3) .rep-arrow-icon { animation-delay: 0.6s; }
            @keyframes repSync {
              0%, 100% { opacity: 0.5; transform: translateY(0); }
              50% { opacity: 1; transform: translateY(3px); }
            }
            .rep-replicas {
              display: flex;
              gap: 16px;
              flex-wrap: wrap;
              justify-content: center;
            }
            .rep-replica {
              padding: 16px 24px;
              background: rgba(16, 185, 129, 0.15);
              border: 1px solid rgba(16, 185, 129, 0.4);
              border-radius: 12px;
              text-align: center;
              min-width: 100px;
            }
            .rep-replica-icon {
              font-size: 1.4rem;
              margin-bottom: 4px;
            }
            .rep-replica-name {
              font-size: 0.85rem;
              font-weight: 500;
              color: #10b981;
            }
            .rep-replica-role {
              font-size: 0.7rem;
              color: #6b7280;
            }
            .rep-replica-lag {
              font-size: 0.65rem;
              color: #6b7280;
              margin-top: 4px;
            }
            
            /* Replication Types */
            .rep-types {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(139, 92, 246, 0.2);
            }
            .rep-types-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .rep-types-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #8b5cf6;
              border-radius: 50%;
            }
            .rep-types-grid {
              display: grid;
              grid-template-columns: repeat(3, 1fr);
              gap: 12px;
            }
            @media (max-width: 600px) {
              .rep-types-grid { grid-template-columns: 1fr; }
            }
            .rep-type {
              padding: 16px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
            }
            .rep-type-icon {
              font-size: 1.5rem;
              margin-bottom: 8px;
            }
            .rep-type-name {
              font-size: 0.85rem;
              font-weight: 500;
              color: #e5e5e5;
              margin-bottom: 4px;
            }
            .rep-type-desc {
              font-size: 0.7rem;
              color: #6b7280;
            }
          </style>
          
          <div class="rep-viz">
            <!-- Replication Flow -->
            <div class="rep-flow">
              <div class="rep-flow-title">Leader-Follower Replication</div>
              <div class="rep-diagram">
                <div class="rep-primary">
                  <div class="rep-primary-icon">üëë</div>
                  <div class="rep-primary-name">Primary (Leader)</div>
                  <div class="rep-primary-role">Handles all Writes</div>
                </div>
                <div class="rep-arrows">
                  <div class="rep-arrow">
                    <span class="rep-arrow-icon">‚Üì</span>
                    <span>sync</span>
                  </div>
                  <div class="rep-arrow">
                    <span class="rep-arrow-icon">‚Üì</span>
                    <span>async</span>
                  </div>
                  <div class="rep-arrow">
                    <span class="rep-arrow-icon">‚Üì</span>
                    <span>async</span>
                  </div>
                </div>
                <div class="rep-replicas">
                  <div class="rep-replica">
                    <div class="rep-replica-icon">üìã</div>
                    <div class="rep-replica-name">Replica 1</div>
                    <div class="rep-replica-role">Read-only</div>
                    <div class="rep-replica-lag">Lag: 0ms</div>
                  </div>
                  <div class="rep-replica">
                    <div class="rep-replica-icon">üìã</div>
                    <div class="rep-replica-name">Replica 2</div>
                    <div class="rep-replica-role">Read-only</div>
                    <div class="rep-replica-lag">Lag: 120ms</div>
                  </div>
                  <div class="rep-replica">
                    <div class="rep-replica-icon">üìã</div>
                    <div class="rep-replica-name">Replica 3</div>
                    <div class="rep-replica-role">Read-only</div>
                    <div class="rep-replica-lag">Lag: 85ms</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Replication Types -->
            <div class="rep-types">
              <div class="rep-types-title">Replication Topologies</div>
              <div class="rep-types-grid">
                <div class="rep-type">
                  <div class="rep-type-icon">üëë</div>
                  <div class="rep-type-name">Leader-Follower</div>
                  <div class="rep-type-desc">One leader, many followers</div>
                </div>
                <div class="rep-type">
                  <div class="rep-type-icon">üë•</div>
                  <div class="rep-type-name">Multi-Leader</div>
                  <div class="rep-type-desc">Multiple write nodes</div>
                </div>
                <div class="rep-type">
                  <div class="rep-type-icon">üîÑ</div>
                  <div class="rep-type-name">Leaderless</div>
                  <div class="rep-type-desc">Any node accepts writes</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Replication</strong> maintains copies of data on multiple machines to provide redundancy, improve availability, and enable geographic distribution.</p>
          <p>The main challenge is keeping replicas consistent as data changes. Different replication strategies offer different trade-offs between consistency, performance, and availability.</p>
        `,
        keyPoints: [
          { icon: "üëë", title: "Leader-Follower", desc: "One leader handles writes, followers replicate and serve reads. Simple but leader is bottleneck.", color: "#10b981" },
          { icon: "üë•", title: "Multi-Leader", desc: "Multiple nodes accept writes. Better availability but complex conflict resolution.", color: "#8b5cf6" },
          { icon: "üîÑ", title: "Leaderless", desc: "Any node accepts reads/writes. High availability, uses quorums for consistency.", color: "#3b82f6" },
          { icon: "‚è±Ô∏è", title: "Sync vs Async", desc: "Synchronous ensures consistency; asynchronous improves performance but risks data loss.", color: "#f59e0b" }
        ],
        formula: "Quorum: W + R > N (Write nodes + Read nodes > Total nodes)",
        strategies: [
          { title: "Read Replicas", desc: "Add read-only replicas to scale read-heavy workloads without impacting write performance." },
          { title: "Geographic Replication", desc: "Place replicas in different regions for disaster recovery and reduced latency." },
          { title: "Conflict Resolution", desc: "Define strategies for handling concurrent updates - last-write-wins, merge, or custom logic." },
          { title: "Replication Lag Monitoring", desc: "Track and alert on replication delay to prevent stale reads in critical paths." }
        ],
        metrics: [
          { level: "Replication Lag", downtime: "Seconds behind primary", useCase: "Data freshness" },
          { level: "RPO", downtime: "Recovery Point Objective", useCase: "Max data loss tolerance" },
          { level: "Replica Count", downtime: "Number of copies", useCase: "Durability level" },
          { level: "Failover Time", downtime: "Promotion duration", useCase: "Availability during failures" }
        ]
      },
      acid: {
        title: "ACID Properties",
        subtitle: "Database transaction guarantees ensuring reliable processing of database transactions.",
        badge: { text: "Data Management", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .acid-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .acid-props {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(139, 92, 246, 0.2);
            }
            .acid-props-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .acid-props-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #8b5cf6;
              border-radius: 50%;
            }
            .acid-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 16px;
            }
            @media (max-width: 700px) {
              .acid-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .acid-prop {
              padding: 20px;
              border-radius: 14px;
              text-align: center;
              transition: all 0.3s ease;
            }
            .acid-prop:hover {
              transform: translateY(-4px);
            }
            .acid-prop.a {
              background: rgba(59, 130, 246, 0.15);
              border: 1px solid rgba(59, 130, 246, 0.4);
            }
            .acid-prop.c {
              background: rgba(16, 185, 129, 0.15);
              border: 1px solid rgba(16, 185, 129, 0.4);
            }
            .acid-prop.i {
              background: rgba(139, 92, 246, 0.15);
              border: 1px solid rgba(139, 92, 246, 0.4);
            }
            .acid-prop.d {
              background: rgba(245, 158, 11, 0.15);
              border: 1px solid rgba(245, 158, 11, 0.4);
            }
            .acid-prop-icon {
              font-size: 2rem;
              margin-bottom: 10px;
            }
            .acid-prop-name {
              font-weight: 700;
              font-size: 1rem;
              margin-bottom: 6px;
            }
            .acid-prop.a .acid-prop-name { color: #3b82f6; }
            .acid-prop.c .acid-prop-name { color: #10b981; }
            .acid-prop.i .acid-prop-name { color: #8b5cf6; }
            .acid-prop.d .acid-prop-name { color: #f59e0b; }
            .acid-prop-desc {
              font-size: 0.75rem;
              color: #a0a0b0;
              margin-bottom: 8px;
            }
            .acid-prop-example {
              font-size: 0.65rem;
              color: #6b7280;
              padding: 4px 8px;
              background: rgba(0, 0, 0, 0.2);
              border-radius: 6px;
            }
            
            /* ACID vs BASE */
            .acid-compare {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .acid-compare-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .acid-compare-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .acid-compare-row {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 16px;
            }
            @media (max-width: 600px) {
              .acid-compare-row { grid-template-columns: 1fr; }
            }
            .acid-model {
              padding: 16px;
              border-radius: 12px;
              text-align: center;
            }
            .acid-model.acid-m {
              background: rgba(139, 92, 246, 0.1);
              border: 1px solid rgba(139, 92, 246, 0.3);
            }
            .acid-model.base {
              background: rgba(245, 158, 11, 0.1);
              border: 1px solid rgba(245, 158, 11, 0.3);
            }
            .acid-model-name {
              font-weight: 600;
              font-size: 1rem;
              margin-bottom: 8px;
            }
            .acid-model.acid-m .acid-model-name { color: #8b5cf6; }
            .acid-model.base .acid-model-name { color: #f59e0b; }
            .acid-model-features {
              display: flex;
              flex-direction: column;
              gap: 4px;
              font-size: 0.75rem;
              color: #a0a0b0;
            }
            .acid-model-use {
              margin-top: 10px;
              font-size: 0.7rem;
              padding: 4px 10px;
              border-radius: 10px;
              display: inline-block;
            }
            .acid-model.acid-m .acid-model-use { background: rgba(139, 92, 246, 0.2); color: #a78bfa; }
            .acid-model.base .acid-model-use { background: rgba(245, 158, 11, 0.2); color: #fbbf24; }
          </style>
          
          <div class="acid-viz">
            <!-- ACID Properties -->
            <div class="acid-props">
              <div class="acid-props-title">The Four ACID Guarantees</div>
              <div class="acid-grid">
                <div class="acid-prop a">
                  <div class="acid-prop-icon">‚öõÔ∏è</div>
                  <div class="acid-prop-name">Atomicity</div>
                  <div class="acid-prop-desc">All or Nothing</div>
                  <div class="acid-prop-example">Rollback on failure</div>
                </div>
                <div class="acid-prop c">
                  <div class="acid-prop-icon">‚úÖ</div>
                  <div class="acid-prop-name">Consistency</div>
                  <div class="acid-prop-desc">Valid State Only</div>
                  <div class="acid-prop-example">Constraints enforced</div>
                </div>
                <div class="acid-prop i">
                  <div class="acid-prop-icon">üîí</div>
                  <div class="acid-prop-name">Isolation</div>
                  <div class="acid-prop-desc">No Interference</div>
                  <div class="acid-prop-example">Concurrent safety</div>
                </div>
                <div class="acid-prop d">
                  <div class="acid-prop-icon">üíæ</div>
                  <div class="acid-prop-name">Durability</div>
                  <div class="acid-prop-desc">Permanent</div>
                  <div class="acid-prop-example">Survives crashes</div>
                </div>
              </div>
            </div>
            
            <!-- ACID vs BASE -->
            <div class="acid-compare">
              <div class="acid-compare-title">ACID vs BASE Models</div>
              <div class="acid-compare-row">
                <div class="acid-model acid-m">
                  <div class="acid-model-name">ACID</div>
                  <div class="acid-model-features">
                    <span>‚úì Strong consistency</span>
                    <span>‚úì Immediate correctness</span>
                    <span>‚úì Transaction safety</span>
                  </div>
                  <div class="acid-model-use">PostgreSQL, MySQL</div>
                </div>
                <div class="acid-model base">
                  <div class="acid-model-name">BASE</div>
                  <div class="acid-model-features">
                    <span>‚úì Basically Available</span>
                    <span>‚úì Soft state</span>
                    <span>‚úì Eventually consistent</span>
                  </div>
                  <div class="acid-model-use">Cassandra, DynamoDB</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>ACID</strong> is a set of properties that guarantee database transactions are processed reliably. These properties are essential for systems that require data integrity.</p>
          <p>ACID compliance is standard in traditional relational databases but often relaxed in distributed NoSQL systems for better scalability and availability (BASE model).</p>
        `,
        keyPoints: [
          { icon: "‚öõÔ∏è", title: "Atomicity", desc: "Transaction is all-or-nothing. If any part fails, entire transaction is rolled back.", color: "#3b82f6" },
          { icon: "‚úÖ", title: "Consistency", desc: "Transaction brings database from one valid state to another, respecting all constraints.", color: "#10b981" },
          { icon: "üîí", title: "Isolation", desc: "Concurrent transactions don't interfere with each other, as if run sequentially.", color: "#8b5cf6" },
          { icon: "üíæ", title: "Durability", desc: "Once committed, data survives system failures through persistent storage and logs.", color: "#f59e0b" }
        ],
        formula: "ACID (Strong Consistency) vs BASE (Eventual Consistency)",
        strategies: [
          { title: "Transaction Logging", desc: "Use write-ahead logging (WAL) to ensure durability and enable recovery after crashes." },
          { title: "Isolation Levels", desc: "Choose appropriate level (Read Uncommitted ‚Üí Serializable) based on consistency vs performance needs." },
          { title: "Two-Phase Commit", desc: "Coordinate distributed transactions across multiple databases with 2PC protocol." },
          { title: "Saga Pattern", desc: "For microservices, use sagas with compensating transactions instead of distributed ACID." }
        ],
        metrics: [
          { level: "Serializable", downtime: "Strongest isolation", useCase: "Financial transactions" },
          { level: "Repeatable Read", downtime: "Prevents non-repeatable reads", useCase: "Reporting queries" },
          { level: "Read Committed", downtime: "Default in most DBs", useCase: "General applications" },
          { level: "Read Uncommitted", downtime: "Weakest, dirty reads", useCase: "Analytics (rare)" }
        ]
      },
      microservices: {
        title: "Microservices",
        subtitle: "Architectural style that structures an application as a collection of loosely coupled, independently deployable services.",
        badge: { text: "Architecture Pattern", color: "#ec4899", bg: "rgba(236, 72, 153, 0.15)" },
        color: "#ec4899",
        diagram: `
          <style>
            .ms-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .ms-architecture {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(236, 72, 153, 0.2);
            }
            .ms-arch-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .ms-arch-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #ec4899;
              border-radius: 50%;
            }
            .ms-diagram {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 16px;
            }
            .ms-clients {
              display: flex;
              gap: 12px;
              flex-wrap: wrap;
              justify-content: center;
            }
            .ms-client {
              padding: 10px 16px;
              background: rgba(6, 182, 212, 0.15);
              border: 1px solid rgba(6, 182, 212, 0.3);
              border-radius: 8px;
              font-size: 0.8rem;
              display: flex;
              align-items: center;
              gap: 6px;
            }
            .ms-gateway {
              padding: 16px 40px;
              background: linear-gradient(135deg, #ec4899, #db2777);
              border-radius: 12px;
              color: white;
              text-align: center;
              box-shadow: 0 8px 32px rgba(236, 72, 153, 0.3);
            }
            .ms-gateway-icon {
              font-size: 1.5rem;
              margin-bottom: 4px;
            }
            .ms-gateway-text {
              font-weight: 600;
            }
            .ms-gateway-sub {
              font-size: 0.7rem;
              opacity: 0.8;
            }
            .ms-arrow {
              color: #6b7280;
              font-size: 0.9rem;
            }
            .ms-services {
              display: flex;
              gap: 12px;
              flex-wrap: wrap;
              justify-content: center;
            }
            .ms-service {
              padding: 14px 18px;
              border-radius: 10px;
              text-align: center;
              min-width: 90px;
              border: 1px solid;
              transition: all 0.3s ease;
            }
            .ms-service:hover {
              transform: translateY(-3px);
            }
            .ms-service:nth-child(1) { background: rgba(59, 130, 246, 0.15); border-color: rgba(59, 130, 246, 0.4); }
            .ms-service:nth-child(2) { background: rgba(16, 185, 129, 0.15); border-color: rgba(16, 185, 129, 0.4); }
            .ms-service:nth-child(3) { background: rgba(245, 158, 11, 0.15); border-color: rgba(245, 158, 11, 0.4); }
            .ms-service:nth-child(4) { background: rgba(139, 92, 246, 0.15); border-color: rgba(139, 92, 246, 0.4); }
            .ms-service:nth-child(5) { background: rgba(239, 68, 68, 0.15); border-color: rgba(239, 68, 68, 0.4); }
            .ms-svc-icon {
              font-size: 1.5rem;
              margin-bottom: 6px;
            }
            .ms-svc-name {
              font-size: 0.8rem;
              font-weight: 500;
              margin-bottom: 4px;
            }
            .ms-svc-db {
              font-size: 0.65rem;
              color: #6b7280;
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 3px;
            }
            .ms-queue-layer {
              display: flex;
              align-items: center;
              gap: 12px;
              padding: 12px 20px;
              background: rgba(139, 92, 246, 0.1);
              border: 1px dashed rgba(139, 92, 246, 0.3);
              border-radius: 10px;
            }
            .ms-queue-icon {
              font-size: 1.2rem;
            }
            .ms-queue-text {
              font-size: 0.75rem;
              color: #a0a0b0;
            }
            
            /* Benefits */
            .ms-benefits {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .ms-ben-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .ms-ben-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .ms-ben-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .ms-ben-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .ms-ben {
              padding: 14px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
            }
            .ms-ben-icon {
              font-size: 1.3rem;
              margin-bottom: 6px;
            }
            .ms-ben-name {
              font-size: 0.8rem;
              font-weight: 500;
              color: #e5e5e5;
              margin-bottom: 2px;
            }
            .ms-ben-desc {
              font-size: 0.65rem;
              color: #6b7280;
            }
          </style>
          
          <div class="ms-viz">
            <!-- Architecture Diagram -->
            <div class="ms-architecture">
              <div class="ms-arch-title">Microservices Architecture</div>
              <div class="ms-diagram">
                <div class="ms-clients">
                  <div class="ms-client">üì± Mobile</div>
                  <div class="ms-client">üíª Web</div>
                  <div class="ms-client">üîå Partners</div>
                </div>
                <div class="ms-arrow">‚Üì</div>
                <div class="ms-gateway">
                  <div class="ms-gateway-icon">üö™</div>
                  <div class="ms-gateway-text">API Gateway</div>
                  <div class="ms-gateway-sub">Auth ‚Ä¢ Rate Limit ‚Ä¢ Route</div>
                </div>
                <div class="ms-arrow">‚Üì</div>
                <div class="ms-services">
                  <div class="ms-service">
                    <div class="ms-svc-icon">üë§</div>
                    <div class="ms-svc-name">Users</div>
                    <div class="ms-svc-db">üíæ PostgreSQL</div>
                  </div>
                  <div class="ms-service">
                    <div class="ms-svc-icon">üì¶</div>
                    <div class="ms-svc-name">Orders</div>
                    <div class="ms-svc-db">üíæ MongoDB</div>
                  </div>
                  <div class="ms-service">
                    <div class="ms-svc-icon">üí≥</div>
                    <div class="ms-svc-name">Payments</div>
                    <div class="ms-svc-db">üíæ PostgreSQL</div>
                  </div>
                  <div class="ms-service">
                    <div class="ms-svc-icon">üì¶</div>
                    <div class="ms-svc-name">Inventory</div>
                    <div class="ms-svc-db">üíæ Redis</div>
                  </div>
                  <div class="ms-service">
                    <div class="ms-svc-icon">üìß</div>
                    <div class="ms-svc-name">Notifications</div>
                    <div class="ms-svc-db">üíæ DynamoDB</div>
                  </div>
                </div>
                <div class="ms-arrow">‚Üë‚Üì</div>
                <div class="ms-queue-layer">
                  <span class="ms-queue-icon">üì¨</span>
                  <span class="ms-queue-text">Event Bus (Kafka/RabbitMQ) ‚Äî Async Communication</span>
                </div>
              </div>
            </div>
            
            <!-- Benefits -->
            <div class="ms-benefits">
              <div class="ms-ben-title">Key Benefits</div>
              <div class="ms-ben-grid">
                <div class="ms-ben">
                  <div class="ms-ben-icon">üöÄ</div>
                  <div class="ms-ben-name">Independent Deploy</div>
                  <div class="ms-ben-desc">Update without downtime</div>
                </div>
                <div class="ms-ben">
                  <div class="ms-ben-icon">üìà</div>
                  <div class="ms-ben-name">Scale Individually</div>
                  <div class="ms-ben-desc">Scale what's needed</div>
                </div>
                <div class="ms-ben">
                  <div class="ms-ben-icon">üîß</div>
                  <div class="ms-ben-name">Tech Flexibility</div>
                  <div class="ms-ben-desc">Best tool per job</div>
                </div>
                <div class="ms-ben">
                  <div class="ms-ben-icon">üë•</div>
                  <div class="ms-ben-name">Team Ownership</div>
                  <div class="ms-ben-desc">Autonomous teams</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Microservices</strong> architecture breaks down applications into small, independent services that communicate over well-defined APIs. Each service is owned by a small team and can be deployed independently.</p>
          <p>This approach enables scalability, technology diversity, and faster development cycles, but introduces complexity in service communication, data consistency, and operations.</p>
        `,
        keyPoints: [
          { icon: "üéØ", title: "Single Responsibility", desc: "Each service does one thing well, with clear boundaries and ownership.", color: "#ec4899" },
          { icon: "üöÄ", title: "Independent Deployment", desc: "Deploy, scale, and update services without affecting others.", color: "#3b82f6" },
          { icon: "üí¨", title: "API Communication", desc: "Services communicate via REST, gRPC, or async messaging.", color: "#10b981" },
          { icon: "üìä", title: "Decentralized Data", desc: "Each service manages its own database, avoiding shared state.", color: "#f59e0b" }
        ],
        formula: "Microservices = Small Services + Smart Endpoints + Dumb Pipes",
        strategies: [
          { title: "Domain-Driven Design", desc: "Use bounded contexts to identify service boundaries based on business domains." },
          { title: "API Gateway Pattern", desc: "Single entry point handles routing, authentication, rate limiting, and aggregation." },
          { title: "Service Mesh", desc: "Use Istio/Linkerd for service-to-service communication, observability, and security." },
          { title: "Event-Driven Architecture", desc: "Use events for loose coupling and eventual consistency between services." }
        ],
        metrics: [
          { level: "Service Count", downtime: "Number of services", useCase: "Complexity indicator" },
          { level: "Deploy Frequency", downtime: "Releases per day", useCase: "Development velocity" },
          { level: "Service Latency", downtime: "Inter-service calls", useCase: "Performance overhead" },
          { level: "Failure Rate", downtime: "Per-service errors", useCase: "Reliability monitoring" }
        ]
      },
      "message-queues": {
        title: "Message Queues",
        subtitle: "Asynchronous communication mechanism that decouples producers and consumers of messages.",
        badge: { text: "Architecture Pattern", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .mq-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .mq-flow {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(139, 92, 246, 0.2);
            }
            .mq-flow-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .mq-flow-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #8b5cf6;
              border-radius: 50%;
            }
            .mq-diagram {
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 16px;
              flex-wrap: wrap;
            }
            .mq-producers {
              display: flex;
              flex-direction: column;
              gap: 8px;
            }
            .mq-producer {
              padding: 12px 18px;
              background: rgba(59, 130, 246, 0.15);
              border: 1px solid rgba(59, 130, 246, 0.4);
              border-radius: 10px;
              display: flex;
              align-items: center;
              gap: 8px;
              font-size: 0.85rem;
              animation: produceMsg 2s ease-in-out infinite;
            }
            .mq-producer:nth-child(2) { animation-delay: 0.7s; }
            .mq-producer:nth-child(3) { animation-delay: 1.4s; }
            @keyframes produceMsg {
              0%, 100% { transform: translateX(0); }
              50% { transform: translateX(5px); }
            }
            .mq-arrows {
              display: flex;
              flex-direction: column;
              gap: 8px;
              color: #6b7280;
            }
            .mq-arrow {
              animation: arrowFlow 1s ease-in-out infinite;
            }
            .mq-arrow:nth-child(2) { animation-delay: 0.3s; }
            .mq-arrow:nth-child(3) { animation-delay: 0.6s; }
            @keyframes arrowFlow {
              0%, 100% { opacity: 0.4; }
              50% { opacity: 1; }
            }
            .mq-queue {
              padding: 20px 30px;
              background: linear-gradient(135deg, #8b5cf6, #6d28d9);
              border-radius: 14px;
              color: white;
              text-align: center;
              box-shadow: 0 8px 32px rgba(139, 92, 246, 0.3);
            }
            .mq-queue-icon {
              font-size: 2rem;
              margin-bottom: 6px;
            }
            .mq-queue-name {
              font-weight: 600;
              margin-bottom: 8px;
            }
            .mq-messages {
              display: flex;
              gap: 4px;
              justify-content: center;
            }
            .mq-msg {
              padding: 4px 10px;
              background: rgba(255, 255, 255, 0.25);
              border-radius: 4px;
              font-size: 0.7rem;
              animation: msgPulse 1.5s ease-in-out infinite;
            }
            .mq-msg:nth-child(1) { animation-delay: 0s; }
            .mq-msg:nth-child(2) { animation-delay: 0.3s; }
            .mq-msg:nth-child(3) { animation-delay: 0.6s; }
            .mq-msg:nth-child(4) { animation-delay: 0.9s; }
            @keyframes msgPulse {
              0%, 100% { opacity: 0.6; }
              50% { opacity: 1; }
            }
            .mq-queue-count {
              font-size: 0.7rem;
              opacity: 0.8;
              margin-top: 8px;
            }
            .mq-consumers {
              display: flex;
              flex-direction: column;
              gap: 8px;
            }
            .mq-consumer {
              padding: 12px 18px;
              background: rgba(16, 185, 129, 0.15);
              border: 1px solid rgba(16, 185, 129, 0.4);
              border-radius: 10px;
              display: flex;
              align-items: center;
              gap: 8px;
              font-size: 0.85rem;
            }
            
            /* Patterns */
            .mq-patterns {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .mq-pat-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .mq-pat-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .mq-pat-grid {
              display: grid;
              grid-template-columns: repeat(2, 1fr);
              gap: 16px;
            }
            @media (max-width: 600px) {
              .mq-pat-grid { grid-template-columns: 1fr; }
            }
            .mq-pattern {
              padding: 16px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              display: flex;
              align-items: flex-start;
              gap: 12px;
            }
            .mq-pat-icon {
              font-size: 1.5rem;
            }
            .mq-pat-content {
              flex: 1;
            }
            .mq-pat-name {
              font-weight: 500;
              font-size: 0.9rem;
              color: #e5e5e5;
              margin-bottom: 4px;
            }
            .mq-pat-desc {
              font-size: 0.75rem;
              color: #6b7280;
            }
          </style>
          
          <div class="mq-viz">
            <!-- Message Flow -->
            <div class="mq-flow">
              <div class="mq-flow-title">Asynchronous Message Flow</div>
              <div class="mq-diagram">
                <div class="mq-producers">
                  <div class="mq-producer">üì§ Order Service</div>
                  <div class="mq-producer">üì§ Payment Service</div>
                  <div class="mq-producer">üì§ User Service</div>
                </div>
                <div class="mq-arrows">
                  <span class="mq-arrow">‚Üí</span>
                  <span class="mq-arrow">‚Üí</span>
                  <span class="mq-arrow">‚Üí</span>
                </div>
                <div class="mq-queue">
                  <div class="mq-queue-icon">üì¨</div>
                  <div class="mq-queue-name">Message Queue</div>
                  <div class="mq-messages">
                    <span class="mq-msg">msg</span>
                    <span class="mq-msg">msg</span>
                    <span class="mq-msg">msg</span>
                    <span class="mq-msg">msg</span>
                  </div>
                  <div class="mq-queue-count">4 pending messages</div>
                </div>
                <div class="mq-arrows">
                  <span class="mq-arrow">‚Üí</span>
                  <span class="mq-arrow">‚Üí</span>
                  <span class="mq-arrow">‚Üí</span>
                </div>
                <div class="mq-consumers">
                  <div class="mq-consumer">üì• Email Worker</div>
                  <div class="mq-consumer">üì• Analytics Worker</div>
                  <div class="mq-consumer">üì• Notification Worker</div>
                </div>
              </div>
            </div>
            
            <!-- Patterns -->
            <div class="mq-patterns">
              <div class="mq-pat-title">Messaging Patterns</div>
              <div class="mq-pat-grid">
                <div class="mq-pattern">
                  <span class="mq-pat-icon">üì§</span>
                  <div class="mq-pat-content">
                    <div class="mq-pat-name">Point-to-Point</div>
                    <div class="mq-pat-desc">One producer, one consumer. Each message processed once.</div>
                  </div>
                </div>
                <div class="mq-pattern">
                  <span class="mq-pat-icon">üì¢</span>
                  <div class="mq-pat-content">
                    <div class="mq-pat-name">Pub/Sub</div>
                    <div class="mq-pat-desc">Publish to topic, multiple subscribers receive copies.</div>
                  </div>
                </div>
                <div class="mq-pattern">
                  <span class="mq-pat-icon">üîÑ</span>
                  <div class="mq-pat-content">
                    <div class="mq-pat-name">Request/Reply</div>
                    <div class="mq-pat-desc">Async RPC with correlation IDs for response matching.</div>
                  </div>
                </div>
                <div class="mq-pattern">
                  <span class="mq-pat-icon">üíÄ</span>
                  <div class="mq-pat-content">
                    <div class="mq-pat-name">Dead Letter Queue</div>
                    <div class="mq-pat-desc">Failed messages stored for later analysis/retry.</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Message Queues</strong> enable asynchronous communication by allowing components to send messages without waiting for immediate processing. Messages are stored until consumers are ready.</p>
          <p>This pattern improves resilience (producers don't fail if consumers are down), enables load leveling, and allows independent scaling of components.</p>
        `,
        keyPoints: [
          { icon: "üì§", title: "Decoupling", desc: "Producers and consumers operate independently, improving system resilience.", color: "#8b5cf6" },
          { icon: "üìä", title: "Load Leveling", desc: "Buffer traffic spikes, processing messages at sustainable rates.", color: "#3b82f6" },
          { icon: "üîÑ", title: "Guaranteed Delivery", desc: "Messages persist until acknowledged, surviving failures.", color: "#10b981" },
          { icon: "üì¢", title: "Pub/Sub", desc: "Publish to topics, multiple subscribers receive copies.", color: "#f59e0b" }
        ],
        formula: "Throughput = Messages Produced ‚â§ Queue Capacity ‚â• Messages Consumed",
        strategies: [
          { title: "Dead Letter Queues", desc: "Route failed messages to a separate queue for analysis and reprocessing." },
          { title: "Idempotent Consumers", desc: "Design consumers to handle duplicate messages safely (at-least-once delivery)." },
          { title: "Message Ordering", desc: "Use partitioned queues when order matters; distribute for parallelism otherwise." },
          { title: "Backpressure Handling", desc: "Implement flow control when consumers can't keep up with producers." }
        ],
        metrics: [
          { level: "Kafka", downtime: "High throughput, distributed", useCase: "Event streaming, logs" },
          { level: "RabbitMQ", downtime: "Feature-rich, AMQP", useCase: "Complex routing, RPC" },
          { level: "SQS", downtime: "Managed, serverless", useCase: "AWS-native workloads" },
          { level: "Redis Streams", downtime: "In-memory, fast", useCase: "Real-time messaging" }
        ]
      },
      "api-gateway": {
        title: "API Gateway",
        subtitle: "A single entry point for all client requests that handles cross-cutting concerns and routes to appropriate services.",
        badge: { text: "Architecture Pattern", color: "#06b6d4", bg: "rgba(6, 182, 212, 0.15)" },
        color: "#06b6d4",
        diagram: `
          <style>
            .apigw-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .apigw-flow {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(6, 182, 212, 0.2);
            }
            .apigw-flow-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .apigw-flow-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #06b6d4;
              border-radius: 50%;
            }
            .apigw-diagram {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 12px;
            }
            .apigw-clients {
              display: flex;
              gap: 10px;
              flex-wrap: wrap;
              justify-content: center;
            }
            .apigw-client {
              padding: 10px 16px;
              background: rgba(6, 182, 212, 0.15);
              border: 1px solid rgba(6, 182, 212, 0.4);
              border-radius: 8px;
              font-size: 0.8rem;
              display: flex;
              align-items: center;
              gap: 6px;
            }
            .apigw-arrow {
              color: #06b6d4;
              font-size: 1rem;
            }
            .apigw-gateway {
              padding: 20px 50px;
              background: linear-gradient(135deg, #06b6d4, #0891b2);
              border-radius: 14px;
              color: white;
              text-align: center;
              box-shadow: 0 8px 32px rgba(6, 182, 212, 0.3);
            }
            .apigw-gw-icon {
              font-size: 2rem;
              margin-bottom: 6px;
            }
            .apigw-gw-name {
              font-weight: 700;
              font-size: 1.1rem;
            }
            .apigw-features {
              display: flex;
              gap: 8px;
              margin-top: 10px;
              flex-wrap: wrap;
              justify-content: center;
            }
            .apigw-feature {
              padding: 4px 10px;
              background: rgba(255, 255, 255, 0.2);
              border-radius: 12px;
              font-size: 0.65rem;
            }
            .apigw-services {
              display: flex;
              gap: 12px;
              flex-wrap: wrap;
              justify-content: center;
            }
            .apigw-service {
              padding: 14px 20px;
              border-radius: 10px;
              text-align: center;
              min-width: 100px;
            }
            .apigw-service:nth-child(1) { background: rgba(59, 130, 246, 0.15); border: 1px solid rgba(59, 130, 246, 0.4); }
            .apigw-service:nth-child(2) { background: rgba(16, 185, 129, 0.15); border: 1px solid rgba(16, 185, 129, 0.4); }
            .apigw-service:nth-child(3) { background: rgba(245, 158, 11, 0.15); border: 1px solid rgba(245, 158, 11, 0.4); }
            .apigw-service:nth-child(4) { background: rgba(139, 92, 246, 0.15); border: 1px solid rgba(139, 92, 246, 0.4); }
            .apigw-svc-icon {
              font-size: 1.3rem;
              margin-bottom: 4px;
            }
            .apigw-svc-name {
              font-size: 0.8rem;
              font-weight: 500;
            }
            .apigw-service:nth-child(1) .apigw-svc-name { color: #3b82f6; }
            .apigw-service:nth-child(2) .apigw-svc-name { color: #10b981; }
            .apigw-service:nth-child(3) .apigw-svc-name { color: #f59e0b; }
            .apigw-service:nth-child(4) .apigw-svc-name { color: #8b5cf6; }
            
            /* Responsibilities */
            .apigw-resp {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .apigw-resp-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .apigw-resp-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .apigw-resp-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .apigw-resp-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .apigw-resp-item {
              padding: 14px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
            }
            .apigw-resp-icon {
              font-size: 1.4rem;
              margin-bottom: 6px;
            }
            .apigw-resp-name {
              font-size: 0.8rem;
              font-weight: 500;
              color: #e5e5e5;
            }
          </style>
          
          <div class="apigw-viz">
            <!-- API Flow -->
            <div class="apigw-flow">
              <div class="apigw-flow-title">API Gateway Architecture</div>
              <div class="apigw-diagram">
                <div class="apigw-clients">
                  <div class="apigw-client">üì± Mobile App</div>
                  <div class="apigw-client">üíª Web App</div>
                  <div class="apigw-client">üîå Third Party</div>
                  <div class="apigw-client">üñ•Ô∏è Internal</div>
                </div>
                <div class="apigw-arrow">‚Üì</div>
                <div class="apigw-gateway">
                  <div class="apigw-gw-icon">üö™</div>
                  <div class="apigw-gw-name">API Gateway</div>
                  <div class="apigw-features">
                    <span class="apigw-feature">üîê Auth</span>
                    <span class="apigw-feature">üö¶ Rate Limit</span>
                    <span class="apigw-feature">üîÄ Route</span>
                    <span class="apigw-feature">üìä Analytics</span>
                  </div>
                </div>
                <div class="apigw-arrow">‚Üì</div>
                <div class="apigw-services">
                  <div class="apigw-service">
                    <div class="apigw-svc-icon">üë§</div>
                    <div class="apigw-svc-name">Users</div>
                  </div>
                  <div class="apigw-service">
                    <div class="apigw-svc-icon">üì¶</div>
                    <div class="apigw-svc-name">Orders</div>
                  </div>
                  <div class="apigw-service">
                    <div class="apigw-svc-icon">üí≥</div>
                    <div class="apigw-svc-name">Payments</div>
                  </div>
                  <div class="apigw-service">
                    <div class="apigw-svc-icon">üìß</div>
                    <div class="apigw-svc-name">Notifications</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Responsibilities -->
            <div class="apigw-resp">
              <div class="apigw-resp-title">Gateway Responsibilities</div>
              <div class="apigw-resp-grid">
                <div class="apigw-resp-item">
                  <div class="apigw-resp-icon">üîê</div>
                  <div class="apigw-resp-name">Authentication</div>
                </div>
                <div class="apigw-resp-item">
                  <div class="apigw-resp-icon">üö¶</div>
                  <div class="apigw-resp-name">Rate Limiting</div>
                </div>
                <div class="apigw-resp-item">
                  <div class="apigw-resp-icon">üîÑ</div>
                  <div class="apigw-resp-name">Request Transform</div>
                </div>
                <div class="apigw-resp-item">
                  <div class="apigw-resp-icon">‚öñÔ∏è</div>
                  <div class="apigw-resp-name">Load Balancing</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p>An <strong>API Gateway</strong> sits between clients and backend services, providing a unified interface. It handles authentication, rate limiting, request routing, load balancing, and response aggregation.</p>
          <p>This centralizes cross-cutting concerns, simplifies client code, and allows backend services to focus on business logic rather than common infrastructure concerns.</p>
        `,
        keyPoints: [
          { icon: "üîê", title: "Authentication", desc: "Validate tokens, API keys, and enforce security policies at the edge.", color: "#06b6d4" },
          { icon: "üö¶", title: "Rate Limiting", desc: "Protect services from abuse by limiting requests per client.", color: "#ef4444" },
          { icon: "üîÄ", title: "Request Routing", desc: "Route requests to appropriate backend services based on path, headers.", color: "#3b82f6" },
          { icon: "üìä", title: "Response Aggregation", desc: "Combine responses from multiple services into a single response.", color: "#10b981" }
        ],
        formula: "Client ‚Üí Gateway ‚Üí [Auth + Rate Limit + Transform] ‚Üí Service",
        strategies: [
          { title: "Backend for Frontend (BFF)", desc: "Create specialized gateways for each client type (mobile, web) with tailored APIs." },
          { title: "Request/Response Transformation", desc: "Adapt request/response formats between clients and services." },
          { title: "Circuit Breaker Integration", desc: "Fail fast and return cached/fallback responses when services are down." },
          { title: "API Versioning", desc: "Manage multiple API versions, routing to appropriate service versions." }
        ],
        metrics: [
          { level: "Kong", downtime: "Open source, plugins", useCase: "Flexible, self-hosted" },
          { level: "AWS API Gateway", downtime: "Serverless, managed", useCase: "AWS Lambda integration" },
          { level: "Apigee", downtime: "Enterprise features", useCase: "API management platform" },
          { level: "NGINX", downtime: "High performance", useCase: "Custom gateway builds" }
        ]
      },
      cdn: {
        title: "CDN",
        subtitle: "Content Delivery Network - A distributed network of servers that delivers content to users from geographically close locations.",
        badge: { text: "Architecture Pattern", color: "#10b981", bg: "rgba(16, 185, 129, 0.15)" },
        color: "#10b981",
        diagram: `
          <style>
            .cdn-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .cdn-network {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .cdn-network-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .cdn-network-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .cdn-diagram {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 16px;
            }
            .cdn-origin {
              padding: 18px 40px;
              background: linear-gradient(135deg, #10b981, #059669);
              border-radius: 12px;
              color: white;
              text-align: center;
              box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
            }
            .cdn-origin-icon {
              font-size: 1.8rem;
              margin-bottom: 4px;
            }
            .cdn-origin-text {
              font-weight: 600;
            }
            .cdn-arrows {
              display: flex;
              gap: 30px;
              color: #10b981;
            }
            .cdn-arrow {
              animation: cdnPush 1.5s ease-in-out infinite;
            }
            .cdn-arrow:nth-child(2) { animation-delay: 0.5s; }
            .cdn-arrow:nth-child(3) { animation-delay: 1s; }
            @keyframes cdnPush {
              0%, 100% { transform: translateY(0); opacity: 0.5; }
              50% { transform: translateY(4px); opacity: 1; }
            }
            .cdn-edges {
              display: flex;
              gap: 24px;
              flex-wrap: wrap;
              justify-content: center;
            }
            .cdn-edge {
              text-align: center;
              transition: all 0.3s ease;
            }
            .cdn-edge:hover {
              transform: translateY(-3px);
            }
            .cdn-edge-globe {
              width: 70px;
              height: 70px;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              margin: 0 auto 8px;
              font-size: 2rem;
              animation: globePulse 2s ease-in-out infinite;
            }
            .cdn-edge:nth-child(1) .cdn-edge-globe { background: rgba(59, 130, 246, 0.2); border: 2px solid rgba(59, 130, 246, 0.5); animation-delay: 0s; }
            .cdn-edge:nth-child(2) .cdn-edge-globe { background: rgba(139, 92, 246, 0.2); border: 2px solid rgba(139, 92, 246, 0.5); animation-delay: 0.7s; }
            .cdn-edge:nth-child(3) .cdn-edge-globe { background: rgba(245, 158, 11, 0.2); border: 2px solid rgba(245, 158, 11, 0.5); animation-delay: 1.4s; }
            @keyframes globePulse {
              0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.3); }
              50% { box-shadow: 0 0 0 8px rgba(16, 185, 129, 0); }
            }
            .cdn-edge-name {
              font-size: 0.85rem;
              font-weight: 500;
              margin-bottom: 2px;
            }
            .cdn-edge:nth-child(1) .cdn-edge-name { color: #3b82f6; }
            .cdn-edge:nth-child(2) .cdn-edge-name { color: #8b5cf6; }
            .cdn-edge:nth-child(3) .cdn-edge-name { color: #f59e0b; }
            .cdn-edge-latency {
              font-size: 0.7rem;
              color: #6b7280;
            }
            .cdn-users {
              display: flex;
              gap: 20px;
              flex-wrap: wrap;
              justify-content: center;
              margin-top: 12px;
            }
            .cdn-user {
              display: flex;
              align-items: center;
              gap: 4px;
              font-size: 0.75rem;
              color: #a0a0b0;
            }
            
            /* Benefits */
            .cdn-benefits {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(59, 130, 246, 0.2);
            }
            .cdn-ben-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .cdn-ben-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #3b82f6;
              border-radius: 50%;
            }
            .cdn-ben-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .cdn-ben-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .cdn-ben {
              padding: 14px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
            }
            .cdn-ben-icon {
              font-size: 1.4rem;
              margin-bottom: 6px;
            }
            .cdn-ben-name {
              font-size: 0.8rem;
              font-weight: 500;
              color: #e5e5e5;
              margin-bottom: 2px;
            }
            .cdn-ben-desc {
              font-size: 0.65rem;
              color: #6b7280;
            }
          </style>
          
          <div class="cdn-viz">
            <!-- CDN Network -->
            <div class="cdn-network">
              <div class="cdn-network-title">Global Content Distribution</div>
              <div class="cdn-diagram">
                <div class="cdn-origin">
                  <div class="cdn-origin-icon">üè¢</div>
                  <div class="cdn-origin-text">Origin Server</div>
                </div>
                <div class="cdn-arrows">
                  <span class="cdn-arrow">‚ÜôÔ∏è</span>
                  <span class="cdn-arrow">‚¨áÔ∏è</span>
                  <span class="cdn-arrow">‚ÜòÔ∏è</span>
                </div>
                <div class="cdn-edges">
                  <div class="cdn-edge">
                    <div class="cdn-edge-globe">üåç</div>
                    <div class="cdn-edge-name">Europe</div>
                    <div class="cdn-edge-latency">~20ms</div>
                  </div>
                  <div class="cdn-edge">
                    <div class="cdn-edge-globe">üåé</div>
                    <div class="cdn-edge-name">Americas</div>
                    <div class="cdn-edge-latency">~15ms</div>
                  </div>
                  <div class="cdn-edge">
                    <div class="cdn-edge-globe">üåè</div>
                    <div class="cdn-edge-name">Asia Pacific</div>
                    <div class="cdn-edge-latency">~25ms</div>
                  </div>
                </div>
                <div class="cdn-users">
                  <span class="cdn-user">üë§ User ‚Üí Nearest Edge</span>
                  <span class="cdn-user">‚ö° Low Latency</span>
                  <span class="cdn-user">üíæ Cached Content</span>
                </div>
              </div>
            </div>
            
            <!-- Benefits -->
            <div class="cdn-benefits">
              <div class="cdn-ben-title">CDN Benefits</div>
              <div class="cdn-ben-grid">
                <div class="cdn-ben">
                  <div class="cdn-ben-icon">‚ö°</div>
                  <div class="cdn-ben-name">Speed</div>
                  <div class="cdn-ben-desc">Reduced latency</div>
                </div>
                <div class="cdn-ben">
                  <div class="cdn-ben-icon">üõ°Ô∏è</div>
                  <div class="cdn-ben-name">DDoS Protection</div>
                  <div class="cdn-ben-desc">Absorb attacks</div>
                </div>
                <div class="cdn-ben">
                  <div class="cdn-ben-icon">üìà</div>
                  <div class="cdn-ben-name">Scalability</div>
                  <div class="cdn-ben-desc">Handle traffic spikes</div>
                </div>
                <div class="cdn-ben">
                  <div class="cdn-ben-icon">üí∞</div>
                  <div class="cdn-ben-name">Cost Savings</div>
                  <div class="cdn-ben-desc">Reduce origin load</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p>A <strong>CDN</strong> caches content at edge locations worldwide, serving users from the geographically closest server. This dramatically reduces latency and offloads traffic from origin servers.</p>
          <p>CDNs are essential for delivering static assets (images, CSS, JS), streaming media, and even dynamic content through edge computing capabilities.</p>
        `,
        keyPoints: [
          { icon: "üåç", title: "Geographic Distribution", desc: "Edge servers in 100+ locations ensure content is always nearby.", color: "#10b981" },
          { icon: "‚ö°", title: "Reduced Latency", desc: "Serve from edge instead of distant origin - milliseconds vs seconds.", color: "#3b82f6" },
          { icon: "üõ°Ô∏è", title: "DDoS Protection", desc: "Absorb attack traffic at the edge before it reaches origin.", color: "#ef4444" },
          { icon: "üí∞", title: "Bandwidth Savings", desc: "Reduce origin bandwidth costs by serving cached content.", color: "#f59e0b" }
        ],
        formula: "Latency = Round Trip Time to Nearest Edge ‚â™ RTT to Origin",
        strategies: [
          { title: "Cache-Control Headers", desc: "Set appropriate TTLs and cache directives for different content types." },
          { title: "Cache Invalidation", desc: "Purge or refresh cached content when origin content changes." },
          { title: "Edge Computing", desc: "Run logic at the edge for personalization and dynamic content." },
          { title: "Origin Shield", desc: "Add intermediate cache layer to protect origin from edge cache misses." }
        ],
        metrics: [
          { level: "Cloudflare", downtime: "Global, security focus", useCase: "Web apps, DDoS protection" },
          { level: "AWS CloudFront", downtime: "AWS integrated", useCase: "S3, Lambda@Edge" },
          { level: "Fastly", downtime: "Real-time purge", useCase: "Dynamic content, streaming" },
          { level: "Akamai", downtime: "Enterprise, largest", useCase: "Media, enterprise" }
        ]
      },
      "database-sharding": {
        title: "Database Sharding",
        subtitle: "Horizontal partitioning of data across multiple database instances to handle larger datasets and higher throughput.",
        badge: { text: "Architecture Pattern", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" },
        color: "#f59e0b",
        diagram: `
          <style>
            .shard-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .shard-flow {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .shard-flow-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .shard-flow-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .shard-diagram {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 14px;
            }
            .shard-query {
              padding: 12px 24px;
              background: rgba(6, 182, 212, 0.15);
              border: 1px solid rgba(6, 182, 212, 0.4);
              border-radius: 8px;
              font-size: 0.8rem;
              font-family: 'JetBrains Mono', monospace;
              color: #06b6d4;
            }
            .shard-arrow {
              color: #6b7280;
              font-size: 0.9rem;
            }
            .shard-router {
              padding: 18px 50px;
              background: linear-gradient(135deg, #f59e0b, #d97706);
              border-radius: 12px;
              color: white;
              text-align: center;
              box-shadow: 0 8px 32px rgba(245, 158, 11, 0.3);
            }
            .shard-router-icon {
              font-size: 1.8rem;
              margin-bottom: 4px;
            }
            .shard-router-text {
              font-weight: 600;
            }
            .shard-router-logic {
              font-size: 0.7rem;
              opacity: 0.9;
              margin-top: 4px;
              font-family: 'JetBrains Mono', monospace;
            }
            .shard-arrows {
              display: flex;
              gap: 50px;
              color: #f59e0b;
            }
            .shard-arr {
              animation: shardRoute 1s ease-in-out infinite;
            }
            .shard-arr:nth-child(2) { animation-delay: 0.3s; }
            .shard-arr:nth-child(3) { animation-delay: 0.6s; }
            @keyframes shardRoute {
              0%, 100% { opacity: 0.4; }
              50% { opacity: 1; }
            }
            .shard-nodes {
              display: flex;
              gap: 16px;
              flex-wrap: wrap;
              justify-content: center;
            }
            .shard-node {
              padding: 18px 24px;
              border-radius: 12px;
              text-align: center;
              min-width: 110px;
              transition: all 0.3s ease;
            }
            .shard-node:hover {
              transform: translateY(-3px);
            }
            .shard-node:nth-child(1) { background: rgba(59, 130, 246, 0.15); border: 1px solid rgba(59, 130, 246, 0.4); }
            .shard-node:nth-child(2) { background: rgba(16, 185, 129, 0.15); border: 1px solid rgba(16, 185, 129, 0.4); }
            .shard-node:nth-child(3) { background: rgba(139, 92, 246, 0.15); border: 1px solid rgba(139, 92, 246, 0.4); }
            .shard-node-icon {
              font-size: 1.8rem;
              margin-bottom: 6px;
            }
            .shard-node-name {
              font-weight: 600;
              font-size: 0.9rem;
              margin-bottom: 4px;
            }
            .shard-node:nth-child(1) .shard-node-name { color: #3b82f6; }
            .shard-node:nth-child(2) .shard-node-name { color: #10b981; }
            .shard-node:nth-child(3) .shard-node-name { color: #8b5cf6; }
            .shard-node-key {
              font-size: 0.7rem;
              color: #6b7280;
              font-family: 'JetBrains Mono', monospace;
            }
            .shard-node-size {
              font-size: 0.65rem;
              color: #6b7280;
              margin-top: 4px;
            }
            
            /* Considerations */
            .shard-consider {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(239, 68, 68, 0.2);
            }
            .shard-consider-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .shard-consider-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #ef4444;
              border-radius: 50%;
            }
            .shard-consider-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .shard-consider-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .shard-cons {
              padding: 14px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
            }
            .shard-cons-icon {
              font-size: 1.3rem;
              margin-bottom: 6px;
            }
            .shard-cons-name {
              font-size: 0.8rem;
              font-weight: 500;
              color: #e5e5e5;
              margin-bottom: 2px;
            }
            .shard-cons-desc {
              font-size: 0.65rem;
              color: #6b7280;
            }
          </style>
          
          <div class="shard-viz">
            <!-- Sharding Flow -->
            <div class="shard-flow">
              <div class="shard-flow-title">Database Sharding Architecture</div>
              <div class="shard-diagram">
                <div class="shard-query">SELECT * FROM users WHERE user_id = 12345</div>
                <div class="shard-arrow">‚Üì</div>
                <div class="shard-router">
                  <div class="shard-router-icon">üóÑÔ∏è</div>
                  <div class="shard-router-text">Shard Router</div>
                  <div class="shard-router-logic">12345 % 3 = 0 ‚Üí Shard 0</div>
                </div>
                <div class="shard-arrows">
                  <span class="shard-arr">‚ÜôÔ∏è</span>
                  <span class="shard-arr">‚¨áÔ∏è</span>
                  <span class="shard-arr">‚ÜòÔ∏è</span>
                </div>
                <div class="shard-nodes">
                  <div class="shard-node">
                    <div class="shard-node-icon">üíæ</div>
                    <div class="shard-node-name">Shard 0</div>
                    <div class="shard-node-key">id % 3 = 0</div>
                    <div class="shard-node-size">~33% of data</div>
                  </div>
                  <div class="shard-node">
                    <div class="shard-node-icon">üíæ</div>
                    <div class="shard-node-name">Shard 1</div>
                    <div class="shard-node-key">id % 3 = 1</div>
                    <div class="shard-node-size">~33% of data</div>
                  </div>
                  <div class="shard-node">
                    <div class="shard-node-icon">üíæ</div>
                    <div class="shard-node-name">Shard 2</div>
                    <div class="shard-node-key">id % 3 = 2</div>
                    <div class="shard-node-size">~33% of data</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Considerations -->
            <div class="shard-consider">
              <div class="shard-consider-title">Sharding Challenges</div>
              <div class="shard-consider-grid">
                <div class="shard-cons">
                  <div class="shard-cons-icon">üîÄ</div>
                  <div class="shard-cons-name">Cross-Shard Joins</div>
                  <div class="shard-cons-desc">Complex queries</div>
                </div>
                <div class="shard-cons">
                  <div class="shard-cons-icon">‚öñÔ∏è</div>
                  <div class="shard-cons-name">Rebalancing</div>
                  <div class="shard-cons-desc">Data migration</div>
                </div>
                <div class="shard-cons">
                  <div class="shard-cons-icon">üî•</div>
                  <div class="shard-cons-name">Hotspots</div>
                  <div class="shard-cons-desc">Uneven load</div>
                </div>
                <div class="shard-cons">
                  <div class="shard-cons-icon">üîë</div>
                  <div class="shard-cons-name">Key Selection</div>
                  <div class="shard-cons-desc">Critical choice</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Database Sharding</strong> distributes data across multiple database instances (shards), with each shard containing a subset of the data. This enables horizontal scaling beyond single-node limits.</p>
          <p>Sharding is essential when a single database can't handle the data volume or query load, but it adds complexity in query routing, joins, and data rebalancing.</p>
        `,
        keyPoints: [
          { icon: "üîë", title: "Shard Key Selection", desc: "Choose a key that distributes data evenly and matches query patterns.", color: "#f59e0b" },
          { icon: "üîÄ", title: "Shard Routing", desc: "Application or proxy layer routes queries to correct shard.", color: "#3b82f6" },
          { icon: "‚öñÔ∏è", title: "Rebalancing", desc: "Redistribute data when adding shards or fixing hotspots.", color: "#8b5cf6" },
          { icon: "üîó", title: "Cross-Shard Queries", desc: "Joins and aggregations across shards are complex and slow.", color: "#ef4444" }
        ],
        formula: "Shard = hash(shard_key) % number_of_shards",
        strategies: [
          { title: "Consistent Hashing", desc: "Minimize data movement when adding/removing shards using hash ring." },
          { title: "Shard-Nothing Architecture", desc: "Design so queries only need data from one shard when possible." },
          { title: "Global Tables", desc: "Replicate small, frequently-joined tables to all shards." },
          { title: "Vitess/ProxySQL", desc: "Use sharding middleware to abstract complexity from applications." }
        ],
        metrics: [
          { level: "Horizontal Scale", downtime: "Add more shards", useCase: "Linear capacity growth" },
          { level: "Shard Skew", downtime: "Data distribution", useCase: "Balance monitoring" },
          { level: "Cross-Shard %", downtime: "Multi-shard queries", useCase: "Design effectiveness" },
          { level: "Rebalance Time", downtime: "Migration duration", useCase: "Operational overhead" }
        ]
      },
      "fault-tolerance": {
        title: "Fault Tolerance",
        subtitle: "The ability of a system to continue operating correctly even when some components fail.",
        badge: { text: "Resilience", color: "#ef4444", bg: "rgba(239, 68, 68, 0.15)" },
        color: "#ef4444",
        diagram: `
          <style>
            .ft-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .ft-demo {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(239, 68, 68, 0.2);
            }
            .ft-demo-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .ft-demo-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #ef4444;
              border-radius: 50%;
            }
            .ft-servers {
              display: flex;
              justify-content: center;
              gap: 16px;
              margin-bottom: 20px;
              flex-wrap: wrap;
            }
            .ft-server {
              padding: 18px 24px;
              border-radius: 12px;
              text-align: center;
              min-width: 100px;
              border: 2px solid;
              transition: all 0.3s ease;
            }
            .ft-server.healthy {
              background: rgba(16, 185, 129, 0.15);
              border-color: rgba(16, 185, 129, 0.5);
            }
            .ft-server.failed {
              background: rgba(239, 68, 68, 0.15);
              border-color: rgba(239, 68, 68, 0.5);
              opacity: 0.6;
              animation: ftFailPulse 2s ease-in-out infinite;
            }
            @keyframes ftFailPulse {
              0%, 100% { opacity: 0.4; }
              50% { opacity: 0.7; }
            }
            .ft-server-icon {
              font-size: 1.8rem;
              margin-bottom: 6px;
            }
            .ft-server-name {
              font-size: 0.85rem;
              font-weight: 500;
            }
            .ft-server.healthy .ft-server-name { color: #10b981; }
            .ft-server.failed .ft-server-name { color: #ef4444; }
            .ft-server-status {
              font-size: 0.7rem;
              margin-top: 4px;
            }
            .ft-server.healthy .ft-server-status { color: #059669; }
            .ft-server.failed .ft-server-status { color: #dc2626; }
            .ft-result {
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 12px;
              padding: 16px 24px;
              background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(6, 182, 212, 0.2));
              border: 1px solid rgba(16, 185, 129, 0.3);
              border-radius: 12px;
            }
            .ft-result-icon {
              font-size: 1.5rem;
            }
            .ft-result-text {
              font-weight: 600;
              color: #10b981;
            }
            .ft-result-sub {
              font-size: 0.8rem;
              color: #6b7280;
            }
            
            /* Patterns */
            .ft-patterns {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(139, 92, 246, 0.2);
            }
            .ft-pat-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .ft-pat-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #8b5cf6;
              border-radius: 50%;
            }
            .ft-pat-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .ft-pat-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .ft-pattern {
              padding: 16px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
            }
            .ft-pat-icon {
              font-size: 1.5rem;
              margin-bottom: 8px;
            }
            .ft-pat-name {
              font-size: 0.8rem;
              font-weight: 500;
              color: #e5e5e5;
              margin-bottom: 4px;
            }
            .ft-pat-desc {
              font-size: 0.65rem;
              color: #6b7280;
            }
          </style>
          
          <div class="ft-viz">
            <!-- Failure Demo -->
            <div class="ft-demo">
              <div class="ft-demo-title">System Continues Despite Failures</div>
              <div class="ft-servers">
                <div class="ft-server healthy">
                  <div class="ft-server-icon">‚úÖ</div>
                  <div class="ft-server-name">Server 1</div>
                  <div class="ft-server-status">Healthy</div>
                </div>
                <div class="ft-server failed">
                  <div class="ft-server-icon">üí•</div>
                  <div class="ft-server-name">Server 2</div>
                  <div class="ft-server-status">Failed</div>
                </div>
                <div class="ft-server healthy">
                  <div class="ft-server-icon">‚úÖ</div>
                  <div class="ft-server-name">Server 3</div>
                  <div class="ft-server-status">Healthy</div>
                </div>
                <div class="ft-server healthy">
                  <div class="ft-server-icon">‚úÖ</div>
                  <div class="ft-server-name">Server 4</div>
                  <div class="ft-server-status">Healthy</div>
                </div>
              </div>
              <div class="ft-result">
                <span class="ft-result-icon">üõ°Ô∏è</span>
                <div>
                  <div class="ft-result-text">System Still Operational</div>
                  <div class="ft-result-sub">75% capacity ‚Ä¢ Traffic rerouted automatically</div>
                </div>
              </div>
            </div>
            
            <!-- Patterns -->
            <div class="ft-patterns">
              <div class="ft-pat-title">Fault Tolerance Patterns</div>
              <div class="ft-pat-grid">
                <div class="ft-pattern">
                  <div class="ft-pat-icon">üîÑ</div>
                  <div class="ft-pat-name">Redundancy</div>
                  <div class="ft-pat-desc">Multiple instances</div>
                </div>
                <div class="ft-pattern">
                  <div class="ft-pat-icon">üß±</div>
                  <div class="ft-pat-name">Bulkhead</div>
                  <div class="ft-pat-desc">Isolate failures</div>
                </div>
                <div class="ft-pattern">
                  <div class="ft-pat-icon">‚è±Ô∏è</div>
                  <div class="ft-pat-name">Timeout</div>
                  <div class="ft-pat-desc">Fail fast</div>
                </div>
                <div class="ft-pattern">
                  <div class="ft-pat-icon">üîÅ</div>
                  <div class="ft-pat-name">Retry</div>
                  <div class="ft-pat-desc">Exponential backoff</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Fault Tolerance</strong> is the property that enables a system to continue operating properly in the event of failure of some of its components.</p>
          <p>Fault-tolerant systems anticipate failures and are designed to handle them gracefully, often transparently to users. This requires redundancy, failure detection, and automatic recovery mechanisms.</p>
        `,
        keyPoints: [
          { icon: "üîÑ", title: "Redundancy", desc: "Run multiple instances so failure of one doesn't cause system failure.", color: "#ef4444" },
          { icon: "‚ù§Ô∏è", title: "Health Checks", desc: "Continuously monitor component health to detect failures quickly.", color: "#3b82f6" },
          { icon: "üîÄ", title: "Failover", desc: "Automatically route traffic away from failed components.", color: "#10b981" },
          { icon: "üîô", title: "Recovery", desc: "Restart failed components and restore state from backups.", color: "#8b5cf6" }
        ],
        formula: "System Availability = 1 - (Component Failure Rate)^Redundancy",
        strategies: [
          { title: "N+1 Redundancy", desc: "Run one more instance than needed so one can fail without impact." },
          { title: "Bulkhead Pattern", desc: "Isolate components so failure in one doesn't cascade to others." },
          { title: "Timeout & Retry", desc: "Set timeouts on calls and retry with exponential backoff." },
          { title: "Chaos Engineering", desc: "Intentionally inject failures to test and improve fault tolerance." }
        ],
        metrics: [
          { level: "MTBF", downtime: "Mean Time Between Failures", useCase: "Component reliability" },
          { level: "MTTR", downtime: "Mean Time To Recovery", useCase: "Recovery speed" },
          { level: "Blast Radius", downtime: "Failure impact scope", useCase: "Isolation effectiveness" },
          { level: "Recovery Success", downtime: "Auto-recovery rate", useCase: "Self-healing ability" }
        ]
      },
      "circuit-breaker": {
        title: "Circuit Breaker",
        subtitle: "A pattern that prevents cascading failures by stopping calls to a failing service.",
        badge: { text: "Resilience", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .cb-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .cb-states {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(139, 92, 246, 0.2);
            }
            .cb-states-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 24px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .cb-states-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #8b5cf6;
              border-radius: 50%;
            }
            .cb-state-machine {
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 16px;
              flex-wrap: wrap;
            }
            .cb-state {
              text-align: center;
              padding: 20px;
              border-radius: 16px;
              min-width: 120px;
              transition: all 0.3s ease;
            }
            .cb-state:hover {
              transform: scale(1.05);
            }
            .cb-state.closed {
              background: rgba(16, 185, 129, 0.15);
              border: 2px solid rgba(16, 185, 129, 0.5);
            }
            .cb-state.open {
              background: rgba(239, 68, 68, 0.15);
              border: 2px solid rgba(239, 68, 68, 0.5);
            }
            .cb-state.half-open {
              background: rgba(245, 158, 11, 0.15);
              border: 2px solid rgba(245, 158, 11, 0.5);
            }
            .cb-state-circle {
              width: 60px;
              height: 60px;
              border-radius: 50%;
              margin: 0 auto 12px;
              display: flex;
              align-items: center;
              justify-content: center;
              font-size: 1.8rem;
            }
            .cb-state.closed .cb-state-circle { background: rgba(16, 185, 129, 0.3); }
            .cb-state.open .cb-state-circle { background: rgba(239, 68, 68, 0.3); animation: openPulse 1s ease-in-out infinite; }
            .cb-state.half-open .cb-state-circle { background: rgba(245, 158, 11, 0.3); animation: testPulse 1.5s ease-in-out infinite; }
            @keyframes openPulse {
              0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
              50% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            }
            @keyframes testPulse {
              0%, 100% { opacity: 0.7; }
              50% { opacity: 1; }
            }
            .cb-state-name {
              font-weight: 600;
              font-size: 1rem;
              margin-bottom: 4px;
            }
            .cb-state.closed .cb-state-name { color: #10b981; }
            .cb-state.open .cb-state-name { color: #ef4444; }
            .cb-state.half-open .cb-state-name { color: #f59e0b; }
            .cb-state-desc {
              font-size: 0.75rem;
              color: #6b7280;
              margin-bottom: 8px;
            }
            .cb-state-action {
              font-size: 0.7rem;
              padding: 4px 10px;
              border-radius: 12px;
              display: inline-block;
            }
            .cb-state.closed .cb-state-action { background: rgba(16, 185, 129, 0.2); color: #10b981; }
            .cb-state.open .cb-state-action { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
            .cb-state.half-open .cb-state-action { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
            .cb-arrow {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 4px;
              color: #6b7280;
            }
            .cb-arrow-icon {
              font-size: 1.5rem;
              color: #8b5cf6;
            }
            .cb-arrow-label {
              font-size: 0.65rem;
              text-align: center;
              max-width: 80px;
            }
            
            /* Timeline */
            .cb-timeline {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .cb-timeline-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .cb-timeline-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .cb-timeline-bar {
              display: flex;
              height: 40px;
              border-radius: 8px;
              overflow: hidden;
              margin-bottom: 12px;
            }
            .cb-tl-segment {
              display: flex;
              align-items: center;
              justify-content: center;
              font-size: 0.7rem;
              font-weight: 500;
            }
            .cb-tl-closed { flex: 4; background: linear-gradient(90deg, #10b981, #059669); color: white; }
            .cb-tl-open { flex: 2; background: linear-gradient(90deg, #ef4444, #dc2626); color: white; }
            .cb-tl-half { flex: 1; background: linear-gradient(90deg, #f59e0b, #d97706); color: white; }
            .cb-tl-closed2 { flex: 3; background: linear-gradient(90deg, #059669, #10b981); color: white; }
            .cb-timeline-labels {
              display: flex;
              justify-content: space-between;
              font-size: 0.7rem;
              color: #6b7280;
            }
          </style>
          
          <div class="cb-viz">
            <!-- State Machine -->
            <div class="cb-states">
              <div class="cb-states-title">Circuit Breaker State Machine</div>
              <div class="cb-state-machine">
                <div class="cb-state closed">
                  <div class="cb-state-circle">üü¢</div>
                  <div class="cb-state-name">CLOSED</div>
                  <div class="cb-state-desc">Normal operation</div>
                  <div class="cb-state-action">‚úì Requests pass through</div>
                </div>
                <div class="cb-arrow">
                  <span class="cb-arrow-icon">‚Üí</span>
                  <span class="cb-arrow-label">Failures exceed threshold</span>
                </div>
                <div class="cb-state open">
                  <div class="cb-state-circle">üî¥</div>
                  <div class="cb-state-name">OPEN</div>
                  <div class="cb-state-desc">Circuit tripped</div>
                  <div class="cb-state-action">‚úó Fail fast immediately</div>
                </div>
                <div class="cb-arrow">
                  <span class="cb-arrow-icon">‚Üí</span>
                  <span class="cb-arrow-label">Timeout expires</span>
                </div>
                <div class="cb-state half-open">
                  <div class="cb-state-circle">üü°</div>
                  <div class="cb-state-name">HALF-OPEN</div>
                  <div class="cb-state-desc">Testing recovery</div>
                  <div class="cb-state-action">‚ö° Limited requests</div>
                </div>
              </div>
            </div>
            
            <!-- Timeline -->
            <div class="cb-timeline">
              <div class="cb-timeline-title">Circuit Breaker Timeline Example</div>
              <div class="cb-timeline-bar">
                <div class="cb-tl-segment cb-tl-closed">CLOSED</div>
                <div class="cb-tl-segment cb-tl-open">OPEN</div>
                <div class="cb-tl-segment cb-tl-half">TEST</div>
                <div class="cb-tl-segment cb-tl-closed2">CLOSED</div>
              </div>
              <div class="cb-timeline-labels">
                <span>Normal</span>
                <span>‚Üê Service fails</span>
                <span>Recovery test ‚Üí</span>
                <span>Healthy</span>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p>The <strong>Circuit Breaker</strong> pattern prevents an application from repeatedly trying to execute an operation that's likely to fail, allowing it to fail fast and recover gracefully.</p>
          <p>Like an electrical circuit breaker, it "trips" when failures exceed a threshold, preventing cascading failures and giving the failing service time to recover.</p>
        `,
        keyPoints: [
          { icon: "üü¢", title: "Closed State", desc: "Normal operation - requests pass through, failures are counted.", color: "#10b981" },
          { icon: "üî¥", title: "Open State", desc: "Circuit tripped - requests fail immediately without calling service.", color: "#ef4444" },
          { icon: "üü°", title: "Half-Open State", desc: "Testing recovery - limited requests allowed to check if service recovered.", color: "#f59e0b" },
          { icon: "‚ö°", title: "Fail Fast", desc: "Return errors immediately instead of waiting for timeouts.", color: "#8b5cf6" }
        ],
        formula: "Open when: Failure Rate > Threshold within Time Window",
        strategies: [
          { title: "Threshold Configuration", desc: "Set failure rate and time window thresholds appropriate to service SLAs." },
          { title: "Fallback Responses", desc: "Return cached data, default values, or degraded functionality when open." },
          { title: "Health Check Endpoints", desc: "Use dedicated health endpoints to test service recovery." },
          { title: "Monitoring & Alerts", desc: "Alert when circuits open to trigger investigation and response." }
        ],
        metrics: [
          { level: "Hystrix", downtime: "Netflix, Java", useCase: "Original implementation" },
          { level: "Resilience4j", downtime: "Lightweight, Java", useCase: "Modern alternative" },
          { level: "Polly", downtime: ".NET library", useCase: "C# applications" },
          { level: "Istio", downtime: "Service mesh", useCase: "Infrastructure-level" }
        ]
      },
      "rate-limiting": {
        title: "Rate Limiting",
        subtitle: "Controlling the rate of requests to protect services from overload and abuse.",
        badge: { text: "Resilience", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" },
        color: "#f59e0b",
        diagram: `
          <style>
            .rl-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .rl-bucket {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .rl-bucket-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .rl-bucket-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .rl-flow {
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 20px;
              flex-wrap: wrap;
            }
            .rl-requests {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 8px;
            }
            .rl-req-row {
              display: flex;
              gap: 4px;
            }
            .rl-req {
              width: 24px;
              height: 24px;
              background: rgba(59, 130, 246, 0.3);
              border: 1px solid rgba(59, 130, 246, 0.5);
              border-radius: 4px;
              display: flex;
              align-items: center;
              justify-content: center;
              font-size: 0.65rem;
              animation: reqFlow 1.5s ease-in-out infinite;
            }
            .rl-req:nth-child(2) { animation-delay: 0.2s; }
            .rl-req:nth-child(3) { animation-delay: 0.4s; }
            .rl-req:nth-child(4) { animation-delay: 0.6s; }
            .rl-req:nth-child(5) { animation-delay: 0.8s; }
            @keyframes reqFlow {
              0%, 100% { transform: translateX(0); }
              50% { transform: translateX(3px); }
            }
            .rl-req-label {
              font-size: 0.7rem;
              color: #6b7280;
            }
            .rl-arrow {
              color: #6b7280;
              font-size: 1.2rem;
            }
            .rl-limiter {
              position: relative;
              padding: 24px 32px;
              background: linear-gradient(135deg, #f59e0b, #d97706);
              border-radius: 14px;
              color: white;
              text-align: center;
              box-shadow: 0 8px 32px rgba(245, 158, 11, 0.3);
            }
            .rl-limiter-icon {
              font-size: 2rem;
              margin-bottom: 6px;
            }
            .rl-limiter-name {
              font-weight: 600;
              font-size: 1rem;
            }
            .rl-limiter-config {
              font-size: 0.75rem;
              opacity: 0.9;
              margin-top: 4px;
            }
            .rl-bucket-visual {
              margin-top: 12px;
              padding: 8px 12px;
              background: rgba(0, 0, 0, 0.2);
              border-radius: 8px;
            }
            .rl-tokens {
              display: flex;
              gap: 4px;
              justify-content: center;
            }
            .rl-token {
              width: 16px;
              height: 16px;
              background: #fff;
              border-radius: 50%;
              opacity: 0.9;
            }
            .rl-token.used {
              opacity: 0.2;
            }
            .rl-token-label {
              font-size: 0.6rem;
              text-align: center;
              margin-top: 4px;
              opacity: 0.8;
            }
            .rl-output {
              display: flex;
              flex-direction: column;
              gap: 12px;
            }
            .rl-allowed {
              padding: 14px 20px;
              background: rgba(16, 185, 129, 0.15);
              border: 1px solid rgba(16, 185, 129, 0.4);
              border-radius: 10px;
              text-align: center;
            }
            .rl-allowed-icon {
              font-size: 1.3rem;
              margin-bottom: 4px;
            }
            .rl-allowed-text {
              font-size: 0.8rem;
              color: #10b981;
              font-weight: 500;
            }
            .rl-rejected {
              padding: 14px 20px;
              background: rgba(239, 68, 68, 0.15);
              border: 1px solid rgba(239, 68, 68, 0.4);
              border-radius: 10px;
              text-align: center;
            }
            .rl-rejected-icon {
              font-size: 1.3rem;
              margin-bottom: 4px;
            }
            .rl-rejected-text {
              font-size: 0.8rem;
              color: #ef4444;
              font-weight: 500;
            }
            .rl-rejected-code {
              font-size: 0.65rem;
              color: #6b7280;
            }
            
            /* Algorithms */
            .rl-algorithms {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(139, 92, 246, 0.2);
            }
            .rl-algo-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .rl-algo-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #8b5cf6;
              border-radius: 50%;
            }
            .rl-algo-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .rl-algo-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .rl-algo {
              padding: 16px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
            }
            .rl-algo-icon {
              font-size: 1.5rem;
              margin-bottom: 8px;
            }
            .rl-algo-name {
              font-size: 0.8rem;
              font-weight: 500;
              color: #e5e5e5;
              margin-bottom: 4px;
            }
            .rl-algo-desc {
              font-size: 0.65rem;
              color: #6b7280;
            }
          </style>
          
          <div class="rl-viz">
            <!-- Token Bucket Flow -->
            <div class="rl-bucket">
              <div class="rl-bucket-title">Token Bucket Rate Limiting</div>
              <div class="rl-flow">
                <div class="rl-requests">
                  <div class="rl-req-row">
                    <div class="rl-req">üì®</div>
                    <div class="rl-req">üì®</div>
                    <div class="rl-req">üì®</div>
                    <div class="rl-req">üì®</div>
                    <div class="rl-req">üì®</div>
                  </div>
                  <div class="rl-req-label">Incoming Requests</div>
                </div>
                <div class="rl-arrow">‚Üí</div>
                <div class="rl-limiter">
                  <div class="rl-limiter-icon">üö¶</div>
                  <div class="rl-limiter-name">Rate Limiter</div>
                  <div class="rl-limiter-config">100 req/min</div>
                  <div class="rl-bucket-visual">
                    <div class="rl-tokens">
                      <div class="rl-token"></div>
                      <div class="rl-token"></div>
                      <div class="rl-token"></div>
                      <div class="rl-token used"></div>
                      <div class="rl-token used"></div>
                    </div>
                    <div class="rl-token-label">3/5 tokens available</div>
                  </div>
                </div>
                <div class="rl-arrow">‚Üí</div>
                <div class="rl-output">
                  <div class="rl-allowed">
                    <div class="rl-allowed-icon">‚úÖ</div>
                    <div class="rl-allowed-text">3 Allowed</div>
                  </div>
                  <div class="rl-rejected">
                    <div class="rl-rejected-icon">‚ùå</div>
                    <div class="rl-rejected-text">2 Rejected</div>
                    <div class="rl-rejected-code">HTTP 429</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Algorithms -->
            <div class="rl-algorithms">
              <div class="rl-algo-title">Rate Limiting Algorithms</div>
              <div class="rl-algo-grid">
                <div class="rl-algo">
                  <div class="rl-algo-icon">ü™£</div>
                  <div class="rl-algo-name">Token Bucket</div>
                  <div class="rl-algo-desc">Allows bursts, smooth average</div>
                </div>
                <div class="rl-algo">
                  <div class="rl-algo-icon">üíß</div>
                  <div class="rl-algo-name">Leaky Bucket</div>
                  <div class="rl-algo-desc">Fixed output rate</div>
                </div>
                <div class="rl-algo">
                  <div class="rl-algo-icon">ü™ü</div>
                  <div class="rl-algo-name">Fixed Window</div>
                  <div class="rl-algo-desc">Reset each interval</div>
                </div>
                <div class="rl-algo">
                  <div class="rl-algo-icon">üìä</div>
                  <div class="rl-algo-name">Sliding Window</div>
                  <div class="rl-algo-desc">Smooth rolling limit</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Rate Limiting</strong> restricts the number of requests a client can make in a given time period. It protects services from being overwhelmed and ensures fair resource allocation.</p>
          <p>Rate limits can be applied per user, per API key, per IP address, or globally. They're essential for API security, cost control, and maintaining service quality.</p>
        `,
        keyPoints: [
          { icon: "ü™£", title: "Token Bucket", desc: "Tokens added at fixed rate; requests consume tokens. Allows bursts up to bucket size.", color: "#f59e0b" },
          { icon: "üíß", title: "Leaky Bucket", desc: "Requests queue and process at fixed rate. Smooths traffic, no bursts.", color: "#3b82f6" },
          { icon: "ü™ü", title: "Fixed Window", desc: "Count requests in fixed time windows. Simple but allows edge bursts.", color: "#8b5cf6" },
          { icon: "üîÑ", title: "Sliding Window", desc: "Rolling time window for smoother limiting. More accurate but complex.", color: "#10b981" }
        ],
        formula: "Rate Limit = Max Requests / Time Window (e.g., 100/minute)",
        strategies: [
          { title: "Tiered Limits", desc: "Different limits for different user tiers (free vs premium) or endpoints." },
          { title: "Distributed Rate Limiting", desc: "Use Redis or similar for consistent limits across multiple servers." },
          { title: "Graceful Rejection", desc: "Return 429 with Retry-After header telling client when to retry." },
          { title: "Request Prioritization", desc: "Allow critical requests through even when rate limited." }
        ],
        metrics: [
          { level: "Per-User", downtime: "By API key/user ID", useCase: "Fair usage per account" },
          { level: "Per-IP", downtime: "By client IP", useCase: "DDoS protection" },
          { level: "Global", downtime: "All requests", useCase: "Overall capacity protection" },
          { level: "Per-Endpoint", downtime: "By API route", useCase: "Protect expensive operations" }
        ]
      },
      "graceful-degradation": {
        title: "Graceful Degradation",
        subtitle: "Maintaining partial functionality when some components fail rather than complete system failure.",
        badge: { text: "Resilience", color: "#10b981", bg: "rgba(16, 185, 129, 0.15)" },
        color: "#10b981",
        diagram: `
          <style>
            .gd-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .gd-levels {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(16, 185, 129, 0.2);
            }
            .gd-levels-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .gd-levels-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #10b981;
              border-radius: 50%;
            }
            .gd-bars {
              display: flex;
              align-items: flex-end;
              justify-content: center;
              gap: 20px;
              height: 180px;
              margin-bottom: 16px;
            }
            .gd-bar {
              display: flex;
              flex-direction: column;
              align-items: center;
              text-align: center;
            }
            .gd-bar-fill {
              width: 80px;
              border-radius: 10px 10px 0 0;
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: flex-end;
              padding-bottom: 12px;
              color: white;
              transition: all 0.3s ease;
            }
            .gd-bar.full .gd-bar-fill {
              height: 160px;
              background: linear-gradient(180deg, #10b981, #059669);
            }
            .gd-bar.degraded .gd-bar-fill {
              height: 112px;
              background: linear-gradient(180deg, #f59e0b, #d97706);
            }
            .gd-bar.minimal .gd-bar-fill {
              height: 64px;
              background: linear-gradient(180deg, #ef4444, #dc2626);
            }
            .gd-bar-percent {
              font-size: 1.3rem;
              font-weight: 700;
            }
            .gd-bar-label {
              font-size: 0.85rem;
              font-weight: 500;
              margin-top: 8px;
            }
            .gd-bar.full .gd-bar-label { color: #10b981; }
            .gd-bar.degraded .gd-bar-label { color: #f59e0b; }
            .gd-bar.minimal .gd-bar-label { color: #ef4444; }
            .gd-bar-features {
              font-size: 0.7rem;
              color: #6b7280;
              margin-top: 4px;
            }
            .gd-message {
              text-align: center;
              padding: 12px 20px;
              background: rgba(16, 185, 129, 0.1);
              border: 1px dashed rgba(16, 185, 129, 0.3);
              border-radius: 10px;
              color: #10b981;
              font-size: 0.85rem;
            }
            
            /* Fallback strategies */
            .gd-strategies {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(245, 158, 11, 0.2);
            }
            .gd-strat-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .gd-strat-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #f59e0b;
              border-radius: 50%;
            }
            .gd-strat-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .gd-strat-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .gd-strat {
              padding: 14px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
            }
            .gd-strat-icon {
              font-size: 1.4rem;
              margin-bottom: 6px;
            }
            .gd-strat-name {
              font-size: 0.8rem;
              font-weight: 500;
              color: #e5e5e5;
              margin-bottom: 3px;
            }
            .gd-strat-desc {
              font-size: 0.65rem;
              color: #6b7280;
            }
          </style>
          
          <div class="gd-viz">
            <!-- Service Levels -->
            <div class="gd-levels">
              <div class="gd-levels-title">Service Level Degradation</div>
              <div class="gd-bars">
                <div class="gd-bar full">
                  <div class="gd-bar-fill">
                    <span class="gd-bar-percent">100%</span>
                  </div>
                  <div class="gd-bar-label">Full Service</div>
                  <div class="gd-bar-features">All features enabled</div>
                </div>
                <div class="gd-bar degraded">
                  <div class="gd-bar-fill">
                    <span class="gd-bar-percent">70%</span>
                  </div>
                  <div class="gd-bar-label">Degraded</div>
                  <div class="gd-bar-features">Core features only</div>
                </div>
                <div class="gd-bar minimal">
                  <div class="gd-bar-fill">
                    <span class="gd-bar-percent">30%</span>
                  </div>
                  <div class="gd-bar-label">Minimal</div>
                  <div class="gd-bar-features">Read-only mode</div>
                </div>
              </div>
              <div class="gd-message">
                üí° Better to serve limited features than none at all
              </div>
            </div>
            
            <!-- Fallback Strategies -->
            <div class="gd-strategies">
              <div class="gd-strat-title">Fallback Strategies</div>
              <div class="gd-strat-grid">
                <div class="gd-strat">
                  <div class="gd-strat-icon">üö©</div>
                  <div class="gd-strat-name">Feature Flags</div>
                  <div class="gd-strat-desc">Disable failing features</div>
                </div>
                <div class="gd-strat">
                  <div class="gd-strat-icon">üíæ</div>
                  <div class="gd-strat-name">Cached Data</div>
                  <div class="gd-strat-desc">Serve stale content</div>
                </div>
                <div class="gd-strat">
                  <div class="gd-strat-icon">üìÑ</div>
                  <div class="gd-strat-name">Static Fallback</div>
                  <div class="gd-strat-desc">Pre-generated pages</div>
                </div>
                <div class="gd-strat">
                  <div class="gd-strat-icon">üì¢</div>
                  <div class="gd-strat-name">User Notice</div>
                  <div class="gd-strat-desc">Inform about status</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Graceful Degradation</strong> is a design principle where a system continues to provide service at a reduced level of functionality when some components fail.</p>
          <p>Rather than complete failure, the system falls back to simpler functionality, cached data, or reduced features. Users may experience degraded service, but the core experience remains available.</p>
        `,
        keyPoints: [
          { icon: "üìâ", title: "Reduced Functionality", desc: "Disable non-critical features to maintain core functionality.", color: "#10b981" },
          { icon: "üíæ", title: "Cached Fallbacks", desc: "Serve stale cached data when fresh data is unavailable.", color: "#3b82f6" },
          { icon: "üîÑ", title: "Default Values", desc: "Return sensible defaults when personalization services fail.", color: "#8b5cf6" },
          { icon: "üì¢", title: "User Communication", desc: "Inform users about degraded state and expected recovery.", color: "#f59e0b" }
        ],
        formula: "Availability = Core Features Always + Optional Features When Possible",
        strategies: [
          { title: "Feature Flags", desc: "Quickly disable features that depend on failing services." },
          { title: "Static Fallbacks", desc: "Pre-generate static versions of dynamic content for emergencies." },
          { title: "Read-Only Mode", desc: "Disable writes but allow reads when database is overloaded." },
          { title: "Priority Queues", desc: "Process critical requests first, delay non-critical during overload." }
        ],
        metrics: [
          { level: "Feature Toggle", downtime: "LaunchDarkly, Flagsmith", useCase: "Runtime feature control" },
          { level: "Fallback Cache", downtime: "Stale-while-revalidate", useCase: "Content availability" },
          { level: "Load Shedding", downtime: "Drop low-priority", useCase: "Protect critical paths" },
          { level: "Async Processing", downtime: "Queue for later", useCase: "Handle burst traffic" }
        ]
      },
      "disaster-recovery": {
        title: "Disaster Recovery",
        subtitle: "Strategies and procedures for recovering systems and data after catastrophic failures.",
        badge: { text: "Resilience", color: "#dc2626", bg: "rgba(220, 38, 38, 0.15)" },
        color: "#dc2626",
        diagram: `
          <style>
            .dr-viz {
              display: flex;
              flex-direction: column;
              gap: 24px;
            }
            .dr-failover {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(220, 38, 38, 0.2);
            }
            .dr-failover-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 20px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .dr-failover-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #dc2626;
              border-radius: 50%;
            }
            .dr-sites {
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 30px;
              flex-wrap: wrap;
              margin-bottom: 20px;
            }
            .dr-site {
              padding: 20px 30px;
              border-radius: 14px;
              text-align: center;
              min-width: 140px;
            }
            .dr-site.primary {
              background: rgba(239, 68, 68, 0.15);
              border: 2px dashed rgba(239, 68, 68, 0.5);
              animation: drFail 2s ease-in-out infinite;
            }
            @keyframes drFail {
              0%, 100% { opacity: 0.5; }
              50% { opacity: 0.8; }
            }
            .dr-site.dr {
              background: rgba(16, 185, 129, 0.15);
              border: 2px solid rgba(16, 185, 129, 0.5);
            }
            .dr-site-icon {
              font-size: 2.5rem;
              margin-bottom: 8px;
            }
            .dr-site-name {
              font-weight: 600;
              font-size: 1rem;
              margin-bottom: 4px;
            }
            .dr-site.primary .dr-site-name { color: #ef4444; }
            .dr-site.dr .dr-site-name { color: #10b981; }
            .dr-site-status {
              font-size: 0.75rem;
              padding: 3px 10px;
              border-radius: 10px;
              display: inline-block;
            }
            .dr-site.primary .dr-site-status { background: rgba(239, 68, 68, 0.2); color: #f87171; }
            .dr-site.dr .dr-site-status { background: rgba(16, 185, 129, 0.2); color: #34d399; }
            .dr-arrow {
              font-size: 2rem;
              color: #10b981;
              animation: drArrow 1s ease-in-out infinite;
            }
            @keyframes drArrow {
              0%, 100% { transform: translateX(0); }
              50% { transform: translateX(5px); }
            }
            .dr-metrics {
              display: flex;
              justify-content: center;
              gap: 20px;
            }
            .dr-metric {
              padding: 14px 24px;
              background: linear-gradient(135deg, rgba(220, 38, 38, 0.2), rgba(139, 92, 246, 0.2));
              border-radius: 10px;
              text-align: center;
            }
            .dr-metric-value {
              font-size: 1.3rem;
              font-weight: 700;
              color: #e5e5e5;
            }
            .dr-metric-label {
              font-size: 0.7rem;
              color: #6b7280;
              margin-top: 2px;
            }
            
            /* DR Strategies */
            .dr-strategies {
              background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9));
              border-radius: 16px;
              padding: 24px;
              border: 1px solid rgba(139, 92, 246, 0.2);
            }
            .dr-strat-title {
              font-size: 0.75rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              color: #6b7280;
              margin-bottom: 16px;
              display: flex;
              align-items: center;
              gap: 8px;
            }
            .dr-strat-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: #8b5cf6;
              border-radius: 50%;
            }
            .dr-strat-grid {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 12px;
            }
            @media (max-width: 700px) {
              .dr-strat-grid { grid-template-columns: repeat(2, 1fr); }
            }
            .dr-strat {
              padding: 14px;
              background: rgba(30, 35, 50, 0.6);
              border-radius: 10px;
              text-align: center;
              border: 1px solid rgba(255, 255, 255, 0.05);
            }
            .dr-strat-icon {
              font-size: 1.4rem;
              margin-bottom: 6px;
            }
            .dr-strat-name {
              font-size: 0.8rem;
              font-weight: 500;
              color: #e5e5e5;
              margin-bottom: 4px;
            }
            .dr-strat-rto {
              font-size: 0.65rem;
              color: #6b7280;
              margin-bottom: 6px;
            }
            .dr-strat-cost {
              font-size: 0.6rem;
              padding: 2px 8px;
              border-radius: 8px;
              display: inline-block;
            }
            .dr-strat:nth-child(1) .dr-strat-cost { background: rgba(16, 185, 129, 0.2); color: #10b981; }
            .dr-strat:nth-child(2) .dr-strat-cost { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
            .dr-strat:nth-child(3) .dr-strat-cost { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
            .dr-strat:nth-child(4) .dr-strat-cost { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
          </style>
          
          <div class="dr-viz">
            <!-- Failover Demo -->
            <div class="dr-failover">
              <div class="dr-failover-title">Disaster Recovery Failover</div>
              <div class="dr-sites">
                <div class="dr-site primary">
                  <div class="dr-site-icon">üí•</div>
                  <div class="dr-site-name">Primary Site</div>
                  <div class="dr-site-status">FAILED</div>
                </div>
                <div class="dr-arrow">‚û°Ô∏è</div>
                <div class="dr-site dr">
                  <div class="dr-site-icon">üè¢</div>
                  <div class="dr-site-name">DR Site</div>
                  <div class="dr-site-status">ACTIVE</div>
                </div>
              </div>
              <div class="dr-metrics">
                <div class="dr-metric">
                  <div class="dr-metric-value">4h</div>
                  <div class="dr-metric-label">RTO (Recovery Time)</div>
                </div>
                <div class="dr-metric">
                  <div class="dr-metric-value">1h</div>
                  <div class="dr-metric-label">RPO (Data Loss)</div>
                </div>
              </div>
            </div>
            
            <!-- DR Strategies -->
            <div class="dr-strategies">
              <div class="dr-strat-title">DR Strategy Tiers</div>
              <div class="dr-strat-grid">
                <div class="dr-strat">
                  <div class="dr-strat-icon">üíæ</div>
                  <div class="dr-strat-name">Backup & Restore</div>
                  <div class="dr-strat-rto">RTO: Hours-Days</div>
                  <div class="dr-strat-cost">$ Low Cost</div>
                </div>
                <div class="dr-strat">
                  <div class="dr-strat-icon">üî•</div>
                  <div class="dr-strat-name">Pilot Light</div>
                  <div class="dr-strat-rto">RTO: 10s of min</div>
                  <div class="dr-strat-cost">$$ Medium</div>
                </div>
                <div class="dr-strat">
                  <div class="dr-strat-icon">üå°Ô∏è</div>
                  <div class="dr-strat-name">Warm Standby</div>
                  <div class="dr-strat-rto">RTO: Minutes</div>
                  <div class="dr-strat-cost">$$$ Higher</div>
                </div>
                <div class="dr-strat">
                  <div class="dr-strat-icon">üîÑ</div>
                  <div class="dr-strat-name">Active-Active</div>
                  <div class="dr-strat-rto">RTO: Near-Zero</div>
                  <div class="dr-strat-cost">$$$$ Highest</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `
          <p><strong>Disaster Recovery</strong> encompasses the policies, tools, and procedures to enable recovery of critical systems and data after a disaster - whether natural, hardware failure, or human error.</p>
          <p>DR planning defines Recovery Time Objective (RTO - how quickly to recover) and Recovery Point Objective (RPO - how much data loss is acceptable).</p>
        `,
        keyPoints: [
          { icon: "‚è±Ô∏è", title: "RTO", desc: "Recovery Time Objective - maximum acceptable downtime after disaster.", color: "#dc2626" },
          { icon: "üíæ", title: "RPO", desc: "Recovery Point Objective - maximum acceptable data loss (time-based).", color: "#3b82f6" },
          { icon: "üåç", title: "Geographic Redundancy", desc: "DR site in different region to survive regional disasters.", color: "#10b981" },
          { icon: "üîÑ", title: "Failover Testing", desc: "Regularly test DR procedures to ensure they work when needed.", color: "#8b5cf6" }
        ],
        formula: "DR Cost ‚àù 1/(RTO √ó RPO) ‚Äî Lower objectives = Higher cost",
        strategies: [
          { title: "Backup & Restore", desc: "Cheapest option - restore from backups. Highest RTO/RPO." },
          { title: "Pilot Light", desc: "Core systems running at DR site, scale up when needed." },
          { title: "Warm Standby", desc: "Scaled-down copy running, quickly scales to full capacity." },
          { title: "Multi-Site Active-Active", desc: "Full capacity at both sites. Lowest RTO/RPO, highest cost." }
        ],
        metrics: [
          { level: "Backup & Restore", downtime: "Hours to days", useCase: "Non-critical, cost-sensitive" },
          { level: "Pilot Light", downtime: "10s of minutes", useCase: "Core business systems" },
          { level: "Warm Standby", downtime: "Minutes", useCase: "Production workloads" },
          { level: "Active-Active", downtime: "Near-zero", useCase: "Mission-critical systems" }
        ]
      },
      "data-modeling": {
        title: "Data Modeling",
        subtitle: "The process of designing the structure, relationships, and constraints of data to optimize storage and access patterns.",
        badge: { text: "Data Management", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .dm-viz { display: flex; flex-direction: column; gap: 24px; }
            .dm-models { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
            .dm-model { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 16px; padding: 20px; width: 180px; text-align: center; }
            .dm-model-icon { font-size: 2.5rem; margin-bottom: 12px; }
            .dm-model-name { font-weight: 600; font-size: 1.1rem; color: #8b5cf6; margin-bottom: 8px; }
            .dm-model-desc { font-size: 0.8rem; color: #a0a0b0; }
            .dm-example { background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2); border-radius: 12px; padding: 20px; }
            .dm-example-title { font-weight: 600; color: #8b5cf6; margin-bottom: 16px; }
            .dm-table { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .dm-entity { background: rgba(30, 35, 50, 0.8); border-radius: 8px; padding: 12px; min-width: 120px; }
            .dm-entity-name { font-weight: 600; color: #e5e5e5; font-size: 0.9rem; margin-bottom: 8px; border-bottom: 1px solid rgba(139, 92, 246, 0.3); padding-bottom: 6px; }
            .dm-entity-fields { font-size: 0.75rem; color: #a0a0b0; }
            .dm-arrow { font-size: 1.5rem; color: #8b5cf6; align-self: center; }
          </style>
          <div class="dm-viz">
            <div class="dm-models">
              <div class="dm-model"><div class="dm-model-icon">üìä</div><div class="dm-model-name">Relational</div><div class="dm-model-desc">Tables, rows, foreign keys. SQL databases.</div></div>
              <div class="dm-model"><div class="dm-model-icon">üìÑ</div><div class="dm-model-name">Document</div><div class="dm-model-desc">JSON/BSON documents. Flexible schema.</div></div>
              <div class="dm-model"><div class="dm-model-icon">üîó</div><div class="dm-model-name">Graph</div><div class="dm-model-desc">Nodes and edges. Relationship-centric.</div></div>
              <div class="dm-model"><div class="dm-model-icon">üìã</div><div class="dm-model-name">Key-Value</div><div class="dm-model-desc">Simple pairs. Ultra-fast lookups.</div></div>
            </div>
            <div class="dm-example">
              <div class="dm-example-title">Entity Relationship Example</div>
              <div class="dm-table">
                <div class="dm-entity"><div class="dm-entity-name">üë§ User</div><div class="dm-entity-fields">id (PK)<br>name<br>email</div></div>
                <span class="dm-arrow">1:N ‚Üí</span>
                <div class="dm-entity"><div class="dm-entity-name">üì¶ Order</div><div class="dm-entity-fields">id (PK)<br>user_id (FK)<br>total</div></div>
                <span class="dm-arrow">N:M ‚Üî</span>
                <div class="dm-entity"><div class="dm-entity-name">üè∑Ô∏è Product</div><div class="dm-entity-fields">id (PK)<br>name<br>price</div></div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Data Modeling</strong> is the process of creating a visual representation of data structures and their relationships. It defines how data is stored, organized, and manipulated in a database system.</p><p>Good data modeling optimizes for query patterns, ensures data integrity, and balances normalization with performance needs.</p>`,
        keyPoints: [
          { icon: "üèóÔ∏è", title: "Conceptual Model", desc: "High-level business entities and relationships, independent of technology.", color: "#8b5cf6" },
          { icon: "üìê", title: "Logical Model", desc: "Detailed structure with attributes, keys, and relationships without physical considerations.", color: "#3b82f6" },
          { icon: "üíæ", title: "Physical Model", desc: "Implementation-specific design including indexes, partitions, and storage details.", color: "#10b981" },
          { icon: "‚öñÔ∏è", title: "Normalization", desc: "Organizing data to reduce redundancy (1NF, 2NF, 3NF) vs denormalization for read performance.", color: "#f59e0b" }
        ],
        formula: "Model Quality = Query Efficiency √ó Data Integrity √ó Flexibility",
        strategies: [
          { title: "Start with Queries", desc: "Design your data model based on access patterns and query requirements, not just entities." },
          { title: "Normalize First", desc: "Start normalized (3NF), then selectively denormalize for performance-critical queries." },
          { title: "Use Appropriate Types", desc: "Choose the right database type (relational, document, graph) based on data relationships." },
          { title: "Version Your Models", desc: "Plan for schema evolution from the start with migration strategies." }
        ],
        metrics: [
          { level: "1NF", downtime: "Atomic values only", useCase: "Basic data integrity" },
          { level: "2NF", downtime: "No partial dependencies", useCase: "Reduce redundancy" },
          { level: "3NF", downtime: "No transitive dependencies", useCase: "Full normalization" },
          { level: "BCNF", downtime: "Every determinant is a key", useCase: "Strict normalization" }
        ]
      },
      "schema-evolution": {
        title: "Schema Evolution",
        subtitle: "Managing changes to database schemas over time without breaking existing applications or losing data.",
        badge: { text: "Data Management", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .se-viz { display: flex; flex-direction: column; gap: 24px; }
            .se-timeline { display: flex; align-items: center; gap: 8px; padding: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 12px; overflow-x: auto; }
            .se-version { background: rgba(30, 35, 50, 0.8); border: 2px solid #8b5cf6; border-radius: 8px; padding: 12px 16px; min-width: 100px; text-align: center; }
            .se-version-num { font-size: 0.7rem; color: #8b5cf6; margin-bottom: 4px; }
            .se-version-change { font-size: 0.8rem; color: #e5e5e5; }
            .se-arrow { font-size: 1.5rem; color: #8b5cf6; }
            .se-compat { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .se-compat-card { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 200px; text-align: center; }
            .se-compat-icon { font-size: 2rem; margin-bottom: 8px; }
            .se-compat-type { font-weight: 600; font-size: 1rem; margin-bottom: 6px; }
            .se-compat-desc { font-size: 0.75rem; color: #a0a0b0; }
            .se-good { border: 1px solid rgba(34, 197, 94, 0.3); color: #22c55e; }
            .se-bad { border: 1px solid rgba(239, 68, 68, 0.3); color: #ef4444; }
          </style>
          <div class="se-viz">
            <div class="se-timeline">
              <div class="se-version"><div class="se-version-num">v1.0</div><div class="se-version-change">Initial Schema</div></div>
              <span class="se-arrow">‚Üí</span>
              <div class="se-version"><div class="se-version-num">v1.1</div><div class="se-version-change">+ email field</div></div>
              <span class="se-arrow">‚Üí</span>
              <div class="se-version"><div class="se-version-num">v1.2</div><div class="se-version-change">+ address table</div></div>
              <span class="se-arrow">‚Üí</span>
              <div class="se-version"><div class="se-version-num">v2.0</div><div class="se-version-change">Rename column</div></div>
            </div>
            <div class="se-compat">
              <div class="se-compat-card se-good"><div class="se-compat-icon">‚úÖ</div><div class="se-compat-type">Backward Compatible</div><div class="se-compat-desc">Old code reads new data<br>(Add optional field, add table)</div></div>
              <div class="se-compat-card se-good"><div class="se-compat-icon">‚úÖ</div><div class="se-compat-type">Forward Compatible</div><div class="se-compat-desc">New code reads old data<br>(Ignore unknown fields)</div></div>
              <div class="se-compat-card se-bad"><div class="se-compat-icon">‚ö†Ô∏è</div><div class="se-compat-type">Breaking Change</div><div class="se-compat-desc">Rename, remove, or change type<br>(Requires migration)</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Schema Evolution</strong> refers to the ability to modify a database schema while maintaining compatibility with existing data and applications. It's crucial for long-running systems that need to adapt to changing requirements.</p><p>Key challenges include managing backward/forward compatibility, coordinating deployments, and migrating existing data safely.</p>`,
        keyPoints: [
          { icon: "‚¨ÜÔ∏è", title: "Additive Changes", desc: "Adding new optional fields or tables is safest - always backward compatible.", color: "#22c55e" },
          { icon: "üîÑ", title: "Migration Scripts", desc: "Version-controlled scripts (Flyway, Liquibase) to evolve schema incrementally.", color: "#3b82f6" },
          { icon: "ü§ù", title: "Compatibility", desc: "Maintain backward/forward compatibility during rolling deployments.", color: "#f59e0b" },
          { icon: "üìã", title: "Expand-Contract", desc: "Add new, migrate data, deprecate old - safe pattern for breaking changes.", color: "#8b5cf6" }
        ],
        formula: "Safe Evolution = Backward Compatible + Forward Compatible Changes",
        strategies: [
          { title: "Expand-Contract Pattern", desc: "Add new column/table, migrate data, update code, then remove old - never break compatibility." },
          { title: "Use Migration Tools", desc: "Version control schema changes with tools like Flyway, Liquibase, or Alembic." },
          { title: "Never Delete Immediately", desc: "Deprecate first, monitor for usage, then delete after confirmation period." },
          { title: "Test Rollbacks", desc: "Every migration should have a tested rollback path for failed deployments." }
        ],
        metrics: [
          { level: "Add Column", downtime: "Zero downtime", useCase: "New optional fields" },
          { level: "Add Table", downtime: "Zero downtime", useCase: "New entities" },
          { level: "Rename Column", downtime: "Expand-contract", useCase: "2-phase deployment" },
          { level: "Change Type", downtime: "Data migration", useCase: "Careful planning needed" }
        ]
      },
      "indexing-strategies": {
        title: "Indexing Strategies",
        subtitle: "Techniques for creating and optimizing database indexes to improve query performance.",
        badge: { text: "Data Management", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .idx-viz { display: flex; flex-direction: column; gap: 24px; }
            .idx-comparison { display: flex; gap: 20px; align-items: center; justify-content: center; flex-wrap: wrap; }
            .idx-box { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 20px; text-align: center; width: 200px; }
            .idx-box-title { font-size: 0.8rem; color: #a0a0b0; margin-bottom: 8px; }
            .idx-box-value { font-size: 2rem; font-weight: 700; }
            .idx-slow { color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); }
            .idx-fast { color: #22c55e; border: 1px solid rgba(34, 197, 94, 0.3); }
            .idx-arrow { font-size: 2rem; color: #8b5cf6; }
            .idx-types { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; }
            .idx-type { background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2); border-radius: 10px; padding: 14px; text-align: center; }
            .idx-type-icon { font-size: 1.5rem; margin-bottom: 6px; }
            .idx-type-name { font-weight: 600; color: #8b5cf6; font-size: 0.9rem; margin-bottom: 4px; }
            .idx-type-desc { font-size: 0.7rem; color: #a0a0b0; }
          </style>
          <div class="idx-viz">
            <div class="idx-comparison">
              <div class="idx-box idx-slow"><div class="idx-box-title">Without Index (Full Scan)</div><div class="idx-box-value">O(n)</div></div>
              <span class="idx-arrow">‚Üí üöÄ ‚Üí</span>
              <div class="idx-box idx-fast"><div class="idx-box-title">With B-Tree Index</div><div class="idx-box-value">O(log n)</div></div>
            </div>
            <div class="idx-types">
              <div class="idx-type"><div class="idx-type-icon">üå≥</div><div class="idx-type-name">B-Tree</div><div class="idx-type-desc">Range queries, sorting, equality</div></div>
              <div class="idx-type"><div class="idx-type-icon">#Ô∏è‚É£</div><div class="idx-type-name">Hash</div><div class="idx-type-desc">Exact match lookups only</div></div>
              <div class="idx-type"><div class="idx-type-icon">üìù</div><div class="idx-type-name">Full-Text</div><div class="idx-type-desc">Text search, tokenization</div></div>
              <div class="idx-type"><div class="idx-type-icon">üó∫Ô∏è</div><div class="idx-type-name">Spatial</div><div class="idx-type-desc">Geographic, geometry data</div></div>
              <div class="idx-type"><div class="idx-type-icon">üîó</div><div class="idx-type-name">Composite</div><div class="idx-type-desc">Multiple columns combined</div></div>
              <div class="idx-type"><div class="idx-type-icon">üìé</div><div class="idx-type-name">Covering</div><div class="idx-type-desc">All query data in index</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Indexing</strong> is a database optimization technique that creates data structures (indexes) to speed up data retrieval. Without indexes, databases must scan entire tables to find matching rows.</p><p>Proper indexing strategy balances read performance gains against write overhead and storage costs.</p>`,
        keyPoints: [
          { icon: "üå≥", title: "B-Tree Index", desc: "Most common type. Supports equality, range queries, and ORDER BY. Default in most databases.", color: "#8b5cf6" },
          { icon: "üîó", title: "Composite Index", desc: "Index on multiple columns. Order matters - leftmost prefix rule applies.", color: "#3b82f6" },
          { icon: "üìé", title: "Covering Index", desc: "Index contains all columns needed by query - avoids table lookup.", color: "#22c55e" },
          { icon: "‚ö†Ô∏è", title: "Write Overhead", desc: "Each index adds write cost. Over-indexing hurts insert/update performance.", color: "#ef4444" }
        ],
        formula: "Query Time = O(log n) with index vs O(n) full scan",
        strategies: [
          { title: "Index Query Patterns", desc: "Create indexes based on actual query patterns, especially WHERE, JOIN, and ORDER BY clauses." },
          { title: "Composite Index Order", desc: "Put high-cardinality and equality columns first, range columns last." },
          { title: "Monitor and Tune", desc: "Use EXPLAIN plans to verify index usage. Remove unused indexes regularly." },
          { title: "Consider Partial Indexes", desc: "Index only a subset of rows (e.g., active users only) to reduce size and overhead." }
        ],
        metrics: [
          { level: "Primary Key", downtime: "Unique, clustered", useCase: "Row identification" },
          { level: "Secondary", downtime: "Non-clustered", useCase: "Query optimization" },
          { level: "Unique", downtime: "Enforces uniqueness", useCase: "Constraints + lookup" },
          { level: "Partial", downtime: "Filtered subset", useCase: "Conditional queries" }
        ]
      },
      "data-migration": {
        title: "Data Migration",
        subtitle: "The process of transferring data between storage systems, formats, or computing environments.",
        badge: { text: "Data Management", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .mig-viz { display: flex; flex-direction: column; gap: 24px; }
            .mig-flow { display: flex; align-items: center; gap: 12px; justify-content: center; flex-wrap: wrap; padding: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 12px; }
            .mig-db { background: rgba(30, 35, 50, 0.8); border: 2px solid; border-radius: 12px; padding: 16px 24px; text-align: center; }
            .mig-source { border-color: #ef4444; }
            .mig-target { border-color: #22c55e; }
            .mig-db-icon { font-size: 2rem; margin-bottom: 6px; }
            .mig-db-label { font-size: 0.8rem; color: #a0a0b0; }
            .mig-db-name { font-weight: 600; color: #e5e5e5; }
            .mig-arrow { display: flex; flex-direction: column; align-items: center; gap: 4px; }
            .mig-arrow-icon { font-size: 2rem; color: #8b5cf6; }
            .mig-arrow-label { font-size: 0.7rem; color: #8b5cf6; }
            .mig-phases { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }
            .mig-phase { background: rgba(30, 35, 50, 0.8); border-radius: 8px; padding: 12px 16px; text-align: center; flex: 1; min-width: 100px; }
            .mig-phase-num { font-size: 1.2rem; font-weight: 700; color: #8b5cf6; }
            .mig-phase-name { font-size: 0.75rem; color: #a0a0b0; margin-top: 4px; }
          </style>
          <div class="mig-viz">
            <div class="mig-flow">
              <div class="mig-db mig-source"><div class="mig-db-icon">üóÑÔ∏è</div><div class="mig-db-label">Source</div><div class="mig-db-name">Old System</div></div>
              <div class="mig-arrow"><div class="mig-arrow-icon">‚Üí ETL ‚Üí</div><div class="mig-arrow-label">Extract, Transform, Load</div></div>
              <div class="mig-db mig-target"><div class="mig-db-icon">‚òÅÔ∏è</div><div class="mig-db-label">Target</div><div class="mig-db-name">New System</div></div>
            </div>
            <div class="mig-phases">
              <div class="mig-phase"><div class="mig-phase-num">1</div><div class="mig-phase-name">Analyze</div></div>
              <div class="mig-phase"><div class="mig-phase-num">2</div><div class="mig-phase-name">Plan</div></div>
              <div class="mig-phase"><div class="mig-phase-num">3</div><div class="mig-phase-name">Design</div></div>
              <div class="mig-phase"><div class="mig-phase-num">4</div><div class="mig-phase-name">Test</div></div>
              <div class="mig-phase"><div class="mig-phase-num">5</div><div class="mig-phase-name">Migrate</div></div>
              <div class="mig-phase"><div class="mig-phase-num">6</div><div class="mig-phase-name">Validate</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Data Migration</strong> is the process of moving data from one system to another while transforming it to fit the new environment. This includes database upgrades, cloud migrations, and system consolidations.</p><p>Successful migrations require careful planning, validation, and often dual-running systems during transition.</p>`,
        keyPoints: [
          { icon: "üìã", title: "ETL Pipeline", desc: "Extract from source, Transform to target format, Load into new system.", color: "#8b5cf6" },
          { icon: "‚úÖ", title: "Data Validation", desc: "Verify completeness, accuracy, and integrity after migration.", color: "#22c55e" },
          { icon: "üîÑ", title: "Dual-Running", desc: "Run both systems in parallel during transition to ensure correctness.", color: "#3b82f6" },
          { icon: "‚Ü©Ô∏è", title: "Rollback Plan", desc: "Always have a tested path to revert if migration fails.", color: "#ef4444" }
        ],
        formula: "Migration Success = Complete Data + Zero Downtime + Validated Results",
        strategies: [
          { title: "Big Bang vs Phased", desc: "Choose between single cutover (faster, riskier) or incremental migration (slower, safer)." },
          { title: "Shadow Traffic", desc: "Replay production traffic to new system and compare results before cutover." },
          { title: "Data Reconciliation", desc: "Automated comparison of source and target data to ensure nothing is lost or corrupted." },
          { title: "Feature Flags", desc: "Toggle traffic between old and new systems for gradual rollout." }
        ],
        metrics: [
          { level: "Big Bang", downtime: "Single cutover", useCase: "Simple systems, short window" },
          { level: "Phased", downtime: "Incremental", useCase: "Complex systems, low risk" },
          { level: "Parallel", downtime: "Both systems run", useCase: "Critical systems, validation" },
          { level: "Online", downtime: "Zero downtime", useCase: "High availability required" }
        ]
      },
      "backup-restore": {
        title: "Backup & Restore",
        subtitle: "Strategies for creating copies of data and recovering from data loss or system failures.",
        badge: { text: "Data Management", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .br-viz { display: flex; flex-direction: column; gap: 24px; }
            .br-types { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .br-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 12px; padding: 16px; width: 150px; text-align: center; }
            .br-type-icon { font-size: 2rem; margin-bottom: 8px; }
            .br-type-name { font-weight: 600; color: #8b5cf6; font-size: 0.95rem; margin-bottom: 4px; }
            .br-type-desc { font-size: 0.7rem; color: #a0a0b0; }
            .br-321 { background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 12px; padding: 20px; text-align: center; }
            .br-321-title { font-weight: 600; color: #22c55e; font-size: 1.1rem; margin-bottom: 12px; }
            .br-321-rule { display: flex; justify-content: center; gap: 24px; flex-wrap: wrap; }
            .br-321-item { font-size: 2rem; font-weight: 700; color: #22c55e; }
            .br-321-item span { display: block; font-size: 0.75rem; font-weight: 400; color: #a0a0b0; }
          </style>
          <div class="br-viz">
            <div class="br-types">
              <div class="br-type"><div class="br-type-icon">üì∏</div><div class="br-type-name">Full Backup</div><div class="br-type-desc">Complete copy of all data</div></div>
              <div class="br-type"><div class="br-type-icon">üìù</div><div class="br-type-name">Incremental</div><div class="br-type-desc">Only changes since last backup</div></div>
              <div class="br-type"><div class="br-type-icon">üîÑ</div><div class="br-type-name">Differential</div><div class="br-type-desc">Changes since last full backup</div></div>
              <div class="br-type"><div class="br-type-icon">‚è±Ô∏è</div><div class="br-type-name">Continuous</div><div class="br-type-desc">Real-time replication (CDP)</div></div>
            </div>
            <div class="br-321">
              <div class="br-321-title">3-2-1 Backup Rule</div>
              <div class="br-321-rule">
                <div class="br-321-item">3<span>Total copies</span></div>
                <div class="br-321-item">2<span>Different media</span></div>
                <div class="br-321-item">1<span>Offsite location</span></div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Backup & Restore</strong> encompasses strategies and processes for protecting data against loss and recovering from failures. It's a fundamental aspect of disaster recovery and business continuity.</p><p>Key considerations include backup frequency, retention policies, storage location, and recovery time objectives.</p>`,
        keyPoints: [
          { icon: "üéØ", title: "RPO", desc: "Recovery Point Objective - maximum acceptable data loss (e.g., 1 hour).", color: "#ef4444" },
          { icon: "‚è∞", title: "RTO", desc: "Recovery Time Objective - maximum acceptable downtime for recovery.", color: "#f59e0b" },
          { icon: "üîê", title: "Encryption", desc: "Encrypt backups at rest and in transit to protect sensitive data.", color: "#8b5cf6" },
          { icon: "üß™", title: "Test Restores", desc: "Regularly test restoration process - untested backups may fail.", color: "#22c55e" }
        ],
        formula: "Backup Strategy = RPO √ó RTO √ó Cost √ó Complexity",
        strategies: [
          { title: "3-2-1 Rule", desc: "Keep 3 copies on 2 different media types with 1 offsite location." },
          { title: "Automated Backups", desc: "Schedule regular automated backups with monitoring and alerting." },
          { title: "Immutable Backups", desc: "Write-once storage protects against ransomware and accidental deletion." },
          { title: "Regular Testing", desc: "Perform periodic restore drills to validate backup integrity and procedures." }
        ],
        metrics: [
          { level: "Full + Daily Incremental", downtime: "24h RPO", useCase: "Standard applications" },
          { level: "Hourly Incremental", downtime: "1h RPO", useCase: "Important systems" },
          { level: "Continuous (CDP)", downtime: "Minutes RPO", useCase: "Critical databases" },
          { level: "Synchronous Replication", downtime: "Zero RPO", useCase: "Mission-critical" }
        ]
      },
      "data-retention": {
        title: "Data Retention & Archival",
        subtitle: "Policies and mechanisms for storing, aging, and disposing of data over its lifecycle.",
        badge: { text: "Data Management", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .ret-viz { display: flex; flex-direction: column; gap: 24px; }
            .ret-lifecycle { display: flex; align-items: center; gap: 8px; padding: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 12px; overflow-x: auto; }
            .ret-stage { background: rgba(30, 35, 50, 0.8); border-radius: 8px; padding: 12px 16px; text-align: center; min-width: 90px; }
            .ret-stage-icon { font-size: 1.5rem; margin-bottom: 4px; }
            .ret-stage-name { font-size: 0.75rem; color: #e5e5e5; margin-bottom: 2px; }
            .ret-stage-time { font-size: 0.65rem; color: #a0a0b0; }
            .ret-hot { border: 1px solid #ef4444; }
            .ret-warm { border: 1px solid #f59e0b; }
            .ret-cold { border: 1px solid #3b82f6; }
            .ret-archive { border: 1px solid #8b5cf6; }
            .ret-delete { border: 1px solid #6b7280; }
            .ret-arrow { color: #8b5cf6; font-size: 1.2rem; }
            .ret-tiers { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; }
            .ret-tier { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 10px; padding: 14px; text-align: center; }
            .ret-tier-name { font-weight: 600; font-size: 0.9rem; margin-bottom: 4px; }
            .ret-tier-cost { font-size: 0.7rem; color: #a0a0b0; }
          </style>
          <div class="ret-viz">
            <div class="ret-lifecycle">
              <div class="ret-stage ret-hot"><div class="ret-stage-icon">üî•</div><div class="ret-stage-name">Hot</div><div class="ret-stage-time">0-30 days</div></div>
              <span class="ret-arrow">‚Üí</span>
              <div class="ret-stage ret-warm"><div class="ret-stage-icon">üå°Ô∏è</div><div class="ret-stage-name">Warm</div><div class="ret-stage-time">30-90 days</div></div>
              <span class="ret-arrow">‚Üí</span>
              <div class="ret-stage ret-cold"><div class="ret-stage-icon">‚ùÑÔ∏è</div><div class="ret-stage-name">Cold</div><div class="ret-stage-time">90-365 days</div></div>
              <span class="ret-arrow">‚Üí</span>
              <div class="ret-stage ret-archive"><div class="ret-stage-icon">üì¶</div><div class="ret-stage-name">Archive</div><div class="ret-stage-time">1-7 years</div></div>
              <span class="ret-arrow">‚Üí</span>
              <div class="ret-stage ret-delete"><div class="ret-stage-icon">üóëÔ∏è</div><div class="ret-stage-name">Delete</div><div class="ret-stage-time">After policy</div></div>
            </div>
            <div class="ret-tiers">
              <div class="ret-tier"><div class="ret-tier-name" style="color:#ef4444">Hot Storage</div><div class="ret-tier-cost">$$$$  ‚Ä¢  Fast access</div></div>
              <div class="ret-tier"><div class="ret-tier-name" style="color:#f59e0b">Warm Storage</div><div class="ret-tier-cost">$$$  ‚Ä¢  Moderate access</div></div>
              <div class="ret-tier"><div class="ret-tier-name" style="color:#3b82f6">Cold Storage</div><div class="ret-tier-cost">$$  ‚Ä¢  Infrequent access</div></div>
              <div class="ret-tier"><div class="ret-tier-name" style="color:#8b5cf6">Archive</div><div class="ret-tier-cost">$  ‚Ä¢  Rare access</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Data Retention & Archival</strong> defines how long data is kept, where it's stored at each stage of its lifecycle, and when it's deleted. Proper policies balance accessibility, cost, and compliance requirements.</p><p>Tiered storage moves data to cheaper, slower storage as it ages, optimizing costs while maintaining required access.</p>`,
        keyPoints: [
          { icon: "üìú", title: "Compliance", desc: "Regulatory requirements (GDPR, HIPAA, SOX) dictate minimum and maximum retention periods.", color: "#ef4444" },
          { icon: "üí∞", title: "Cost Optimization", desc: "Move aging data to cheaper tiers - archive storage costs ~90% less than hot.", color: "#22c55e" },
          { icon: "üîÑ", title: "Lifecycle Rules", desc: "Automated policies transition and delete data based on age and access patterns.", color: "#3b82f6" },
          { icon: "üóëÔ∏è", title: "Secure Deletion", desc: "Cryptographic erasure or physical destruction for sensitive data disposal.", color: "#8b5cf6" }
        ],
        formula: "Retention Cost = Œ£(Data Size √ó Tier Cost √ó Duration)",
        strategies: [
          { title: "Define Policies by Data Class", desc: "Different retention periods for logs (30d), transactions (7y), user data (account lifetime)." },
          { title: "Automate Lifecycle", desc: "Use cloud lifecycle policies (S3 Lifecycle, Azure Blob) to auto-tier and delete." },
          { title: "Legal Hold Support", desc: "Override deletion for data subject to litigation or investigation holds." },
          { title: "Audit Trail", desc: "Log all retention actions for compliance auditing and legal discovery." }
        ],
        metrics: [
          { level: "S3 Standard", downtime: "Hot tier", useCase: "Frequent access" },
          { level: "S3 Infrequent Access", downtime: "Warm tier", useCase: "Monthly access" },
          { level: "S3 Glacier", downtime: "Cold tier (minutes)", useCase: "Quarterly access" },
          { level: "Glacier Deep Archive", downtime: "Archive (hours)", useCase: "Yearly access" }
        ]
      },
      "eventual-consistency": {
        title: "Eventual Consistency",
        subtitle: "A consistency model where all replicas will eventually converge to the same state given enough time.",
        badge: { text: "Data Management", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .ec-viz { display: flex; flex-direction: column; gap: 24px; }
            .ec-timeline { background: rgba(139, 92, 246, 0.1); border-radius: 12px; padding: 20px; }
            .ec-timeline-title { font-size: 0.85rem; color: #8b5cf6; margin-bottom: 16px; font-weight: 600; }
            .ec-nodes { display: flex; gap: 24px; justify-content: center; flex-wrap: wrap; }
            .ec-node { text-align: center; }
            .ec-node-icon { font-size: 2rem; margin-bottom: 8px; }
            .ec-node-values { display: flex; flex-direction: column; gap: 4px; }
            .ec-value { background: rgba(30, 35, 50, 0.8); padding: 6px 12px; border-radius: 6px; font-size: 0.8rem; font-family: monospace; }
            .ec-stale { border: 1px solid #f59e0b; color: #f59e0b; }
            .ec-current { border: 1px solid #22c55e; color: #22c55e; }
            .ec-time { font-size: 0.65rem; color: #a0a0b0; margin-top: 2px; }
            .ec-compare { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
            .ec-model { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 180px; text-align: center; }
            .ec-model-name { font-weight: 600; font-size: 0.95rem; margin-bottom: 6px; }
            .ec-model-desc { font-size: 0.7rem; color: #a0a0b0; }
          </style>
          <div class="ec-viz">
            <div class="ec-timeline">
              <div class="ec-timeline-title">Replication Convergence Over Time</div>
              <div class="ec-nodes">
                <div class="ec-node"><div class="ec-node-icon">üñ•Ô∏è Node A</div><div class="ec-node-values"><div class="ec-value ec-current">v=42 ‚úì</div><div class="ec-time">t=0: Write</div></div></div>
                <div class="ec-node"><div class="ec-node-icon">üñ•Ô∏è Node B</div><div class="ec-node-values"><div class="ec-value ec-stale">v=41 ‚è≥</div><div class="ec-time">t=0: Stale</div></div></div>
                <div class="ec-node"><div class="ec-node-icon">üñ•Ô∏è Node C</div><div class="ec-node-values"><div class="ec-value ec-stale">v=41 ‚è≥</div><div class="ec-time">t=0: Stale</div></div></div>
              </div>
              <div style="text-align:center; margin: 16px 0; color: #8b5cf6; font-size: 1.5rem;">‚Üì Eventually (ms to seconds) ‚Üì</div>
              <div class="ec-nodes">
                <div class="ec-node"><div class="ec-node-values"><div class="ec-value ec-current">v=42 ‚úì</div></div></div>
                <div class="ec-node"><div class="ec-node-values"><div class="ec-value ec-current">v=42 ‚úì</div></div></div>
                <div class="ec-node"><div class="ec-node-values"><div class="ec-value ec-current">v=42 ‚úì</div></div></div>
              </div>
            </div>
            <div class="ec-compare">
              <div class="ec-model" style="border:1px solid #22c55e"><div class="ec-model-name" style="color:#22c55e">Strong Consistency</div><div class="ec-model-desc">Read always sees latest write. Higher latency.</div></div>
              <div class="ec-model" style="border:1px solid #8b5cf6"><div class="ec-model-name" style="color:#8b5cf6">Eventual Consistency</div><div class="ec-model-desc">Temporary staleness OK. Lower latency, higher availability.</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Eventual Consistency</strong> is a consistency model used in distributed systems where replicas are allowed to diverge temporarily but will eventually converge to the same state.</p><p>It trades immediate consistency for higher availability and lower latency, making it ideal for systems where temporary staleness is acceptable.</p>`,
        keyPoints: [
          { icon: "‚è±Ô∏è", title: "Convergence Window", desc: "Time between write and all replicas syncing - typically milliseconds to seconds.", color: "#8b5cf6" },
          { icon: "üìñ", title: "Read-Your-Writes", desc: "Session consistency ensures users see their own updates immediately.", color: "#3b82f6" },
          { icon: "üîÑ", title: "Conflict Resolution", desc: "Last-write-wins, vector clocks, or CRDTs handle concurrent updates.", color: "#f59e0b" },
          { icon: "‚úÖ", title: "Use Cases", desc: "Social media feeds, shopping carts, DNS - where staleness is acceptable.", color: "#22c55e" }
        ],
        formula: "Availability > Immediate Consistency (CAP trade-off)",
        strategies: [
          { title: "Choose Appropriate Scope", desc: "Use eventual consistency for non-critical data, strong for financial transactions." },
          { title: "Implement Read-Your-Writes", desc: "Route reads to the same node as writes for session consistency." },
          { title: "Use CRDTs", desc: "Conflict-free Replicated Data Types automatically resolve concurrent updates." },
          { title: "Set Expectations", desc: "UI should handle and communicate potential staleness to users." }
        ],
        metrics: [
          { level: "Strong", downtime: "All nodes sync", useCase: "Financial, inventory" },
          { level: "Eventual", downtime: "Async replication", useCase: "Social, caching" },
          { level: "Causal", downtime: "Preserve ordering", useCase: "Collaborative editing" },
          { level: "Read-Your-Writes", downtime: "Session sticky", useCase: "User-facing apps" }
        ]
      },
      "idempotency": {
        title: "Idempotency",
        subtitle: "The property where an operation produces the same result regardless of how many times it's executed.",
        badge: { text: "Data Management", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .idem-viz { display: flex; flex-direction: column; gap: 24px; }
            .idem-demo { display: flex; gap: 24px; justify-content: center; flex-wrap: wrap; }
            .idem-box { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 20px; width: 200px; text-align: center; }
            .idem-good { border: 1px solid rgba(34, 197, 94, 0.3); }
            .idem-bad { border: 1px solid rgba(239, 68, 68, 0.3); }
            .idem-title { font-weight: 600; font-size: 0.9rem; margin-bottom: 12px; }
            .idem-code { background: rgba(0,0,0,0.3); padding: 8px 12px; border-radius: 6px; font-family: monospace; font-size: 0.75rem; margin-bottom: 8px; }
            .idem-result { font-size: 0.8rem; color: #a0a0b0; }
            .idem-key { background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 12px; padding: 16px; text-align: center; }
            .idem-key-title { font-weight: 600; color: #8b5cf6; margin-bottom: 12px; }
            .idem-key-flow { display: flex; align-items: center; justify-content: center; gap: 8px; flex-wrap: wrap; }
            .idem-key-item { background: rgba(30, 35, 50, 0.8); padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; }
          </style>
          <div class="idem-viz">
            <div class="idem-demo">
              <div class="idem-box idem-good"><div class="idem-title" style="color:#22c55e">‚úÖ Idempotent</div><div class="idem-code">PUT /user/123<br>{ "name": "John" }</div><div class="idem-result">Run 1x or 10x ‚Üí same state</div></div>
              <div class="idem-box idem-bad"><div class="idem-title" style="color:#ef4444">‚ùå Not Idempotent</div><div class="idem-code">POST /account/deposit<br>{ "amount": 100 }</div><div class="idem-result">Run 10x ‚Üí $1000 added!</div></div>
              <div class="idem-box idem-good"><div class="idem-title" style="color:#22c55e">‚úÖ Made Idempotent</div><div class="idem-code">POST /account/deposit<br>{ "key": "txn-123" }</div><div class="idem-result">Duplicate key ‚Üí no-op</div></div>
            </div>
            <div class="idem-key">
              <div class="idem-key-title">Idempotency Key Pattern</div>
              <div class="idem-key-flow">
                <div class="idem-key-item">Client generates UUID</div>
                <span style="color:#8b5cf6">‚Üí</span>
                <div class="idem-key-item">Send with request</div>
                <span style="color:#8b5cf6">‚Üí</span>
                <div class="idem-key-item">Server checks cache</div>
                <span style="color:#8b5cf6">‚Üí</span>
                <div class="idem-key-item">Return cached or execute</div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Idempotency</strong> ensures that performing an operation multiple times has the same effect as performing it once. This is crucial in distributed systems where network failures may cause retries.</p><p>Without idempotency, retried operations could result in duplicate charges, double-counted votes, or corrupted data.</p>`,
        keyPoints: [
          { icon: "üîë", title: "Idempotency Keys", desc: "Unique client-generated IDs that servers use to detect and ignore duplicates.", color: "#8b5cf6" },
          { icon: "üíæ", title: "Request Deduplication", desc: "Store processed request IDs and return cached responses for duplicates.", color: "#3b82f6" },
          { icon: "üîÑ", title: "Natural Idempotency", desc: "PUT, DELETE are naturally idempotent. POST typically needs explicit handling.", color: "#22c55e" },
          { icon: "‚ö†Ô∏è", title: "TTL Considerations", desc: "Idempotency caches need appropriate TTL - long enough for retries, short enough for storage.", color: "#f59e0b" }
        ],
        formula: "f(f(x)) = f(x) ‚Äî Applying operation twice equals applying once",
        strategies: [
          { title: "Use Idempotency Keys", desc: "Require unique request IDs for non-idempotent operations (payments, orders)." },
          { title: "Design Idempotent APIs", desc: "Use PUT for updates, include version/ETag for optimistic locking." },
          { title: "Database Constraints", desc: "Use unique constraints on business keys to prevent duplicate records." },
          { title: "Transactional Outbox", desc: "Store idempotency state in same transaction as business logic." }
        ],
        metrics: [
          { level: "GET", downtime: "Naturally idempotent", useCase: "Read operations" },
          { level: "PUT", downtime: "Naturally idempotent", useCase: "Full updates" },
          { level: "DELETE", downtime: "Naturally idempotent", useCase: "Remove resources" },
          { level: "POST", downtime: "Needs idempotency key", useCase: "Create operations" }
        ]
      },
      "data-privacy": {
        title: "Data Privacy & Compliance",
        subtitle: "Protecting personal data and ensuring compliance with regulations like GDPR, CCPA, and HIPAA.",
        badge: { text: "Data Management", color: "#8b5cf6", bg: "rgba(139, 92, 246, 0.15)" },
        color: "#8b5cf6",
        diagram: `
          <style>
            .dp-viz { display: flex; flex-direction: column; gap: 24px; }
            .dp-regs { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .dp-reg { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 12px; padding: 16px; width: 140px; text-align: center; }
            .dp-reg-icon { font-size: 2rem; margin-bottom: 8px; }
            .dp-reg-name { font-weight: 600; color: #8b5cf6; font-size: 0.95rem; margin-bottom: 4px; }
            .dp-reg-region { font-size: 0.7rem; color: #a0a0b0; }
            .dp-pii { background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 16px; }
            .dp-pii-title { font-weight: 600; color: #ef4444; margin-bottom: 12px; }
            .dp-pii-list { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }
            .dp-pii-item { background: rgba(30, 35, 50, 0.8); padding: 6px 12px; border-radius: 6px; font-size: 0.75rem; color: #e5e5e5; }
            .dp-rights { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; }
            .dp-right { background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.2); border-radius: 8px; padding: 10px; text-align: center; font-size: 0.75rem; color: #22c55e; }
          </style>
          <div class="dp-viz">
            <div class="dp-regs">
              <div class="dp-reg"><div class="dp-reg-icon">üá™üá∫</div><div class="dp-reg-name">GDPR</div><div class="dp-reg-region">European Union</div></div>
              <div class="dp-reg"><div class="dp-reg-icon">üá∫üá∏</div><div class="dp-reg-name">CCPA</div><div class="dp-reg-region">California, USA</div></div>
              <div class="dp-reg"><div class="dp-reg-icon">üè•</div><div class="dp-reg-name">HIPAA</div><div class="dp-reg-region">Healthcare, USA</div></div>
              <div class="dp-reg"><div class="dp-reg-icon">üí≥</div><div class="dp-reg-name">PCI-DSS</div><div class="dp-reg-region">Payment Cards</div></div>
            </div>
            <div class="dp-pii">
              <div class="dp-pii-title">‚ö†Ô∏è PII - Personally Identifiable Information</div>
              <div class="dp-pii-list">
                <div class="dp-pii-item">Full Name</div>
                <div class="dp-pii-item">Email</div>
                <div class="dp-pii-item">Phone</div>
                <div class="dp-pii-item">SSN</div>
                <div class="dp-pii-item">Address</div>
                <div class="dp-pii-item">DOB</div>
                <div class="dp-pii-item">IP Address</div>
                <div class="dp-pii-item">Biometrics</div>
              </div>
            </div>
            <div class="dp-rights">
              <div class="dp-right">üìã Right to Access</div>
              <div class="dp-right">‚úèÔ∏è Right to Rectify</div>
              <div class="dp-right">üóëÔ∏è Right to Erasure</div>
              <div class="dp-right">üì¶ Right to Portability</div>
              <div class="dp-right">üö´ Right to Object</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Data Privacy & Compliance</strong> involves protecting personal information and meeting regulatory requirements. This includes identifying PII, implementing proper controls, and providing user rights.</p><p>Non-compliance can result in severe fines (up to 4% of global revenue for GDPR) and reputational damage.</p>`,
        keyPoints: [
          { icon: "üîç", title: "Data Discovery", desc: "Know where PII exists across all systems - databases, logs, backups, caches.", color: "#8b5cf6" },
          { icon: "üîê", title: "Encryption & Masking", desc: "Encrypt PII at rest and in transit. Mask in non-production environments.", color: "#3b82f6" },
          { icon: "üìù", title: "Consent Management", desc: "Track and respect user consent for data collection and processing purposes.", color: "#22c55e" },
          { icon: "üóëÔ∏è", title: "Data Deletion", desc: "Implement processes to honor deletion requests across all systems.", color: "#ef4444" }
        ],
        formula: "Compliance = Policy + Technical Controls + Audit Trail",
        strategies: [
          { title: "Data Classification", desc: "Classify all data by sensitivity level with appropriate handling procedures." },
          { title: "Privacy by Design", desc: "Build privacy considerations into system architecture from the start." },
          { title: "Audit Logging", desc: "Log all access to PII for compliance auditing and breach investigation." },
          { title: "Regular Assessments", desc: "Conduct privacy impact assessments and penetration testing regularly." }
        ],
        metrics: [
          { level: "GDPR", downtime: "Up to ‚Ç¨20M or 4% revenue", useCase: "EU citizens" },
          { level: "CCPA", downtime: "Up to $7,500 per violation", useCase: "CA residents" },
          { level: "HIPAA", downtime: "Up to $1.5M per category/year", useCase: "Healthcare data" },
          { level: "PCI-DSS", downtime: "Fines + lose card processing", useCase: "Payment data" }
        ]
      },
      "monolith-modular": {
        title: "Monolith vs Modular Monolith",
        subtitle: "Comparing traditional monolithic architecture with well-structured modular monolith design.",
        badge: { text: "Architecture", color: "#10b981", bg: "rgba(16, 185, 129, 0.15)" },
        color: "#10b981",
        diagram: `
          <style>
            .mm-viz { display: flex; flex-direction: column; gap: 24px; }
            .mm-compare { display: flex; gap: 24px; justify-content: center; flex-wrap: wrap; }
            .mm-arch { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 16px; padding: 20px; width: 220px; text-align: center; }
            .mm-title { font-weight: 600; font-size: 1rem; margin-bottom: 12px; }
            .mm-diagram { background: rgba(30, 35, 50, 0.8); border-radius: 8px; padding: 12px; margin-bottom: 12px; min-height: 100px; display: flex; flex-direction: column; gap: 4px; justify-content: center; }
            .mm-block { padding: 6px; border-radius: 4px; font-size: 0.7rem; }
            .mm-pros { font-size: 0.7rem; color: #22c55e; text-align: left; }
            .mm-cons { font-size: 0.7rem; color: #ef4444; text-align: left; margin-top: 6px; }
            .mm-trad { border: 1px solid rgba(239, 68, 68, 0.3); }
            .mm-mod { border: 1px solid rgba(16, 185, 129, 0.3); }
            .mm-micro { border: 1px solid rgba(59, 130, 246, 0.3); }
          </style>
          <div class="mm-viz">
            <div class="mm-compare">
              <div class="mm-arch mm-trad">
                <div class="mm-title" style="color:#ef4444">Big Ball of Mud</div>
                <div class="mm-diagram"><div class="mm-block" style="background:#ef4444;color:#fff">Everything Mixed Together<br>üçù Spaghetti Code</div></div>
                <div class="mm-cons">‚úó No boundaries<br>‚úó Hard to change<br>‚úó Difficult testing</div>
              </div>
              <div class="mm-arch mm-mod">
                <div class="mm-title" style="color:#10b981">Modular Monolith</div>
                <div class="mm-diagram">
                  <div class="mm-block" style="background:#10b981;color:#fff">üì¶ Users</div>
                  <div class="mm-block" style="background:#059669;color:#fff">üì¶ Orders</div>
                  <div class="mm-block" style="background:#047857;color:#fff">üì¶ Products</div>
                </div>
                <div class="mm-pros">‚úì Clear boundaries<br>‚úì Single deployment<br>‚úì Easy refactoring</div>
              </div>
              <div class="mm-arch mm-micro">
                <div class="mm-title" style="color:#3b82f6">Microservices</div>
                <div class="mm-diagram" style="flex-direction:row;flex-wrap:wrap;gap:6px;justify-content:center;">
                  <div class="mm-block" style="background:#3b82f6;color:#fff">üî≤</div>
                  <div class="mm-block" style="background:#3b82f6;color:#fff">üî≤</div>
                  <div class="mm-block" style="background:#3b82f6;color:#fff">üî≤</div>
                </div>
                <div class="mm-pros">‚úì Independent scaling<br>‚úì Tech flexibility</div>
                <div class="mm-cons">‚úó Complex ops<br>‚úó Network overhead</div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Modular Monolith</strong> is an architectural style that combines the simplicity of a monolith with the organizational benefits of modularity. Code is organized into well-defined modules with clear boundaries and interfaces.</p><p>It's often a better starting point than microservices, allowing teams to extract services later if needed.</p>`,
        keyPoints: [
          { icon: "üì¶", title: "Module Boundaries", desc: "Each module owns its domain, data, and API. No direct database access across modules.", color: "#10b981" },
          { icon: "üöÄ", title: "Single Deployment", desc: "Simpler operations - one artifact, one database, easier debugging.", color: "#3b82f6" },
          { icon: "üîÑ", title: "Migration Path", desc: "Modules can be extracted to services when scale or team structure requires.", color: "#f59e0b" },
          { icon: "üß™", title: "Testability", desc: "Modules can be tested in isolation with clear interfaces.", color: "#8b5cf6" }
        ],
        formula: "Start Modular Monolith ‚Üí Extract Services When Needed",
        strategies: [
          { title: "Define Module Contracts", desc: "Each module exposes a public API; internals are private. No reaching into other modules." },
          { title: "Separate Module Schemas", desc: "Each module has its own database schema or namespace - no cross-module table access." },
          { title: "Use Events for Integration", desc: "Modules communicate via in-process events, easy to convert to async messaging later." },
          { title: "Team Alignment", desc: "Align modules with team ownership for clear responsibility and reduced coordination." }
        ],
        metrics: [
          { level: "Monolith", downtime: "1 deployment, 1 DB", useCase: "Simple, small team" },
          { level: "Modular Monolith", downtime: "1 deployment, structured", useCase: "Growing complexity" },
          { level: "Microservices", downtime: "N deployments, N DBs", useCase: "Scale, large teams" },
          { level: "Serverless", downtime: "Function-level", useCase: "Event-driven, variable load" }
        ]
      },
      "event-driven": {
        title: "Event-Driven Architecture",
        subtitle: "A design pattern where system components communicate through the production and consumption of events.",
        badge: { text: "Architecture", color: "#10b981", bg: "rgba(16, 185, 129, 0.15)" },
        color: "#10b981",
        diagram: `
          <style>
            .eda-viz { display: flex; flex-direction: column; gap: 24px; }
            .eda-flow { display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap; padding: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 12px; }
            .eda-producer { background: #3b82f6; color: white; padding: 12px 20px; border-radius: 8px; font-weight: 600; }
            .eda-broker { background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 16px 24px; border-radius: 12px; font-weight: 600; font-size: 1.1rem; }
            .eda-consumers { display: flex; flex-direction: column; gap: 6px; }
            .eda-consumer { background: #8b5cf6; color: white; padding: 8px 16px; border-radius: 6px; font-size: 0.85rem; }
            .eda-arrow { font-size: 1.5rem; color: #10b981; }
            .eda-event { background: rgba(30, 35, 50, 0.8); border: 1px solid #10b981; border-radius: 8px; padding: 8px 12px; font-family: monospace; font-size: 0.75rem; color: #10b981; }
            .eda-types { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .eda-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 10px; padding: 14px; width: 150px; text-align: center; }
            .eda-type-icon { font-size: 1.5rem; margin-bottom: 6px; }
            .eda-type-name { font-weight: 600; color: #10b981; font-size: 0.85rem; }
          </style>
          <div class="eda-viz">
            <div class="eda-flow">
              <div class="eda-producer">Producer</div>
              <span class="eda-arrow">‚Üí</span>
              <div class="eda-event">{ "type": "OrderCreated" }</div>
              <span class="eda-arrow">‚Üí</span>
              <div class="eda-broker">üì® Event Broker</div>
              <span class="eda-arrow">‚Üí</span>
              <div class="eda-consumers">
                <div class="eda-consumer">üìß Notification</div>
                <div class="eda-consumer">üì¶ Inventory</div>
                <div class="eda-consumer">üí≥ Billing</div>
              </div>
            </div>
            <div class="eda-types">
              <div class="eda-type"><div class="eda-type-icon">üì¢</div><div class="eda-type-name">Pub/Sub</div></div>
              <div class="eda-type"><div class="eda-type-icon">üì¨</div><div class="eda-type-name">Event Sourcing</div></div>
              <div class="eda-type"><div class="eda-type-icon">üîÑ</div><div class="eda-type-name">Stream Processing</div></div>
              <div class="eda-type"><div class="eda-type-icon">üìã</div><div class="eda-type-name">CQRS</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Event-Driven Architecture</strong> is a design paradigm where the flow of the program is determined by events - significant changes in state that are broadcast to interested parties.</p><p>It enables loose coupling, scalability, and real-time processing, but adds complexity in debugging and maintaining consistency.</p>`,
        keyPoints: [
          { icon: "üîì", title: "Loose Coupling", desc: "Producers don't know about consumers. Add new consumers without changing producers.", color: "#10b981" },
          { icon: "üìà", title: "Scalability", desc: "Consumers process independently and can scale based on their own load.", color: "#3b82f6" },
          { icon: "‚è±Ô∏è", title: "Async Processing", desc: "Non-blocking operations improve responsiveness and throughput.", color: "#f59e0b" },
          { icon: "‚ö†Ô∏è", title: "Eventual Consistency", desc: "State across services converges over time, not immediately.", color: "#ef4444" }
        ],
        formula: "Event = { type, timestamp, payload, metadata }",
        strategies: [
          { title: "Design Events as Facts", desc: "Events are immutable facts about what happened, not commands for what to do." },
          { title: "Include Context", desc: "Events should contain enough information for consumers without additional lookups." },
          { title: "Idempotent Consumers", desc: "Design consumers to handle duplicate events safely (at-least-once delivery)." },
          { title: "Schema Evolution", desc: "Plan for event schema changes with versioning and backward compatibility." }
        ],
        metrics: [
          { level: "Kafka", downtime: "High throughput, durable", useCase: "Event streaming" },
          { level: "RabbitMQ", downtime: "Flexible routing", useCase: "Task queues" },
          { level: "AWS EventBridge", downtime: "Serverless, rules-based", useCase: "Cloud-native events" },
          { level: "Redis Pub/Sub", downtime: "Low latency, ephemeral", useCase: "Real-time notifications" }
        ]
      },
      "cqrs": {
        title: "CQRS",
        subtitle: "Command Query Responsibility Segregation - separating read and write operations into different models.",
        badge: { text: "Architecture", color: "#10b981", bg: "rgba(16, 185, 129, 0.15)" },
        color: "#10b981",
        diagram: `
          <style>
            .cqrs-viz { display: flex; flex-direction: column; gap: 24px; }
            .cqrs-flow { display: flex; gap: 24px; justify-content: center; flex-wrap: wrap; }
            .cqrs-side { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 20px; width: 200px; }
            .cqrs-write { border: 1px solid rgba(239, 68, 68, 0.3); }
            .cqrs-read { border: 1px solid rgba(59, 130, 246, 0.3); }
            .cqrs-title { font-weight: 600; font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
            .cqrs-stack { display: flex; flex-direction: column; gap: 6px; }
            .cqrs-layer { padding: 8px; border-radius: 6px; text-align: center; font-size: 0.8rem; }
            .cqrs-sync { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 16px; background: rgba(16, 185, 129, 0.1); border-radius: 8px; }
            .cqrs-sync-icon { font-size: 1.5rem; color: #10b981; }
            .cqrs-sync-text { font-size: 0.85rem; color: #a0a0b0; }
          </style>
          <div class="cqrs-viz">
            <div class="cqrs-flow">
              <div class="cqrs-side cqrs-write">
                <div class="cqrs-title" style="color:#ef4444">‚úèÔ∏è Command Side</div>
                <div class="cqrs-stack">
                  <div class="cqrs-layer" style="background:#ef4444;color:white">Commands</div>
                  <div class="cqrs-layer" style="background:rgba(239,68,68,0.3);color:#ef4444">Command Handlers</div>
                  <div class="cqrs-layer" style="background:rgba(239,68,68,0.2);color:#ef4444">Domain Model</div>
                  <div class="cqrs-layer" style="background:rgba(239,68,68,0.1);color:#ef4444">Write DB</div>
                </div>
              </div>
              <div class="cqrs-side cqrs-read">
                <div class="cqrs-title" style="color:#3b82f6">üìñ Query Side</div>
                <div class="cqrs-stack">
                  <div class="cqrs-layer" style="background:#3b82f6;color:white">Queries</div>
                  <div class="cqrs-layer" style="background:rgba(59,130,246,0.3);color:#3b82f6">Query Handlers</div>
                  <div class="cqrs-layer" style="background:rgba(59,130,246,0.2);color:#3b82f6">Read Model</div>
                  <div class="cqrs-layer" style="background:rgba(59,130,246,0.1);color:#3b82f6">Read DB (Optimized)</div>
                </div>
              </div>
            </div>
            <div class="cqrs-sync">
              <span class="cqrs-sync-icon">üîÑ</span>
              <span class="cqrs-sync-text">Events sync Write ‚Üí Read models (eventually consistent)</span>
            </div>
          </div>
        `,
        definition: `<p><strong>CQRS</strong> separates the responsibility for handling commands (writes) from queries (reads) into different models. This allows each side to be optimized independently for its specific workload.</p><p>Often combined with Event Sourcing, CQRS enables complex domains, high scalability, and optimized read performance.</p>`,
        keyPoints: [
          { icon: "‚úèÔ∏è", title: "Commands", desc: "Intent to change state. Validated, processed by domain logic, may be rejected.", color: "#ef4444" },
          { icon: "üìñ", title: "Queries", desc: "Requests for data. Never modify state. Can be heavily cached and optimized.", color: "#3b82f6" },
          { icon: "üìä", title: "Read Models", desc: "Denormalized views optimized for specific queries. Multiple views from same data.", color: "#10b981" },
          { icon: "‚è±Ô∏è", title: "Eventual Consistency", desc: "Read models updated asynchronously. Slight lag between write and read.", color: "#f59e0b" }
        ],
        formula: "CQRS = Separate Write Model + Separate Read Model(s)",
        strategies: [
          { title: "Start Simple", desc: "CQRS adds complexity. Use only when read/write patterns differ significantly." },
          { title: "Event Sourcing Synergy", desc: "Events from write side naturally project to read models, enabling audit and replay." },
          { title: "Multiple Read Models", desc: "Create specialized read models for different query patterns (list, detail, reports)." },
          { title: "Handle Staleness", desc: "UI should account for eventual consistency - optimistic updates, loading states." }
        ],
        metrics: [
          { level: "Same Model", downtime: "Traditional CRUD", useCase: "Simple applications" },
          { level: "Separate Models", downtime: "CQRS", useCase: "Complex domains" },
          { level: "+ Event Sourcing", downtime: "Full audit trail", useCase: "Financial, legal" },
          { level: "+ Multiple DBs", downtime: "Polyglot persistence", useCase: "Extreme scale" }
        ]
      },
      "saga-pattern": {
        title: "Saga Pattern",
        subtitle: "Managing distributed transactions across multiple services through a sequence of local transactions.",
        badge: { text: "Architecture", color: "#10b981", bg: "rgba(16, 185, 129, 0.15)" },
        color: "#10b981",
        diagram: `
          <style>
            .saga-viz { display: flex; flex-direction: column; gap: 24px; }
            .saga-flow { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; justify-content: center; padding: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 12px; }
            .saga-step { background: rgba(30, 35, 50, 0.8); border: 2px solid #10b981; border-radius: 8px; padding: 10px 14px; text-align: center; }
            .saga-step-num { font-size: 0.7rem; color: #10b981; }
            .saga-step-name { font-size: 0.8rem; color: #e5e5e5; }
            .saga-arrow { color: #10b981; font-size: 1.2rem; }
            .saga-fail { border-color: #ef4444 !important; }
            .saga-fail .saga-step-num { color: #ef4444; }
            .saga-comp { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; margin-top: 12px; }
            .saga-comp-step { background: rgba(239, 68, 68, 0.2); border: 1px dashed #ef4444; border-radius: 6px; padding: 8px 12px; font-size: 0.75rem; color: #ef4444; }
            .saga-types { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
            .saga-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 10px; padding: 16px; width: 180px; text-align: center; }
            .saga-type-icon { font-size: 2rem; margin-bottom: 8px; }
            .saga-type-name { font-weight: 600; color: #10b981; font-size: 0.9rem; margin-bottom: 4px; }
            .saga-type-desc { font-size: 0.7rem; color: #a0a0b0; }
          </style>
          <div class="saga-viz">
            <div class="saga-flow">
              <div class="saga-step"><div class="saga-step-num">T1</div><div class="saga-step-name">Create Order</div></div>
              <span class="saga-arrow">‚Üí</span>
              <div class="saga-step"><div class="saga-step-num">T2</div><div class="saga-step-name">Reserve Stock</div></div>
              <span class="saga-arrow">‚Üí</span>
              <div class="saga-step saga-fail"><div class="saga-step-num">T3 ‚úó</div><div class="saga-step-name">Charge Payment</div></div>
              <span class="saga-arrow" style="color:#ef4444">‚Üê Compensate</span>
            </div>
            <div class="saga-comp">
              <div class="saga-comp-step">C2: Release Stock</div>
              <div class="saga-comp-step">C1: Cancel Order</div>
            </div>
            <div class="saga-types">
              <div class="saga-type"><div class="saga-type-icon">üé≠</div><div class="saga-type-name">Choreography</div><div class="saga-type-desc">Services react to events. Decentralized, harder to trace.</div></div>
              <div class="saga-type"><div class="saga-type-icon">üéØ</div><div class="saga-type-name">Orchestration</div><div class="saga-type-desc">Central coordinator controls flow. Easier debugging.</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Saga Pattern</strong> manages data consistency across microservices through a sequence of local transactions. If any step fails, compensating transactions are executed to undo previous steps.</p><p>Unlike distributed transactions (2PC), sagas don't lock resources and provide eventual consistency.</p>`,
        keyPoints: [
          { icon: "üìù", title: "Local Transactions", desc: "Each service executes its own ACID transaction. No distributed locks.", color: "#10b981" },
          { icon: "‚Ü©Ô∏è", title: "Compensating Actions", desc: "Semantic undo operations that reverse the effect of completed steps.", color: "#ef4444" },
          { icon: "üé≠", title: "Choreography", desc: "Services publish events, others react. Loose coupling, complex tracing.", color: "#3b82f6" },
          { icon: "üéØ", title: "Orchestration", desc: "Central saga coordinator directs flow. Easier debugging, single point of failure.", color: "#8b5cf6" }
        ],
        formula: "Saga = T1 ‚Üí T2 ‚Üí T3... + C3 ‚Üê C2 ‚Üê C1 (on failure)",
        strategies: [
          { title: "Design Compensations First", desc: "Plan how to undo each step before implementing. Some actions can't be undone." },
          { title: "Idempotent Steps", desc: "Both transactions and compensations must handle retries safely." },
          { title: "Saga State Tracking", desc: "Persist saga state to handle failures mid-saga and enable recovery." },
          { title: "Timeouts and Deadlines", desc: "Set timeouts for each step and overall saga to prevent hanging transactions." }
        ],
        metrics: [
          { level: "2PC", downtime: "Strong consistency, locks", useCase: "Single database" },
          { level: "Saga Choreography", downtime: "Event-driven, decentralized", useCase: "Simple workflows" },
          { level: "Saga Orchestration", downtime: "Central control, traceable", useCase: "Complex workflows" },
          { level: "TCC", downtime: "Try-Confirm-Cancel", useCase: "Reservation patterns" }
        ]
      },
      "hexagonal-architecture": {
        title: "Hexagonal / Clean Architecture",
        subtitle: "Isolating business logic from external concerns through ports and adapters.",
        badge: { text: "Architecture", color: "#10b981", bg: "rgba(16, 185, 129, 0.15)" },
        color: "#10b981",
        diagram: `
          <style>
            .hex-viz { display: flex; flex-direction: column; gap: 24px; align-items: center; }
            .hex-layers { position: relative; width: 280px; height: 200px; }
            .hex-layer { position: absolute; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-weight: 600; text-align: center; }
            .hex-outer { width: 100%; height: 100%; background: rgba(59, 130, 246, 0.2); border: 2px solid #3b82f6; left: 0; top: 0; font-size: 0.75rem; color: #3b82f6; padding: 8px; }
            .hex-middle { width: 70%; height: 70%; background: rgba(16, 185, 129, 0.3); border: 2px solid #10b981; left: 15%; top: 15%; font-size: 0.8rem; color: #10b981; }
            .hex-inner { width: 40%; height: 40%; background: rgba(245, 158, 11, 0.4); border: 2px solid #f59e0b; left: 30%; top: 30%; font-size: 0.85rem; color: #f59e0b; }
            .hex-ports { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .hex-port { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 8px; padding: 10px 14px; text-align: center; width: 130px; }
            .hex-port-type { font-size: 0.7rem; color: #a0a0b0; }
            .hex-port-name { font-size: 0.85rem; font-weight: 600; color: #10b981; }
          </style>
          <div class="hex-viz">
            <div class="hex-layers">
              <div class="hex-layer hex-outer">Infrastructure<br>(DB, API, UI)</div>
              <div class="hex-layer hex-middle">Application<br>Services</div>
              <div class="hex-layer hex-inner">Domain<br>Core</div>
            </div>
            <div class="hex-ports">
              <div class="hex-port"><div class="hex-port-type">Driving Port</div><div class="hex-port-name">REST API</div></div>
              <div class="hex-port"><div class="hex-port-type">Driving Port</div><div class="hex-port-name">CLI</div></div>
              <div class="hex-port"><div class="hex-port-type">Driven Port</div><div class="hex-port-name">Database</div></div>
              <div class="hex-port"><div class="hex-port-type">Driven Port</div><div class="hex-port-name">Email</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Hexagonal Architecture</strong> (Ports & Adapters) isolates the core business logic from external concerns like databases, APIs, and UIs. The domain is at the center, accessed through ports with adapters.</p><p>This enables testability, flexibility to swap implementations, and protects business logic from infrastructure changes.</p>`,
        keyPoints: [
          { icon: "üéØ", title: "Domain Core", desc: "Pure business logic with no external dependencies. Easily testable.", color: "#f59e0b" },
          { icon: "üîå", title: "Ports", desc: "Interfaces that define how the application interacts with the outside world.", color: "#10b981" },
          { icon: "üîÑ", title: "Adapters", desc: "Implementations of ports - REST controllers, database repos, message handlers.", color: "#3b82f6" },
          { icon: "‚¨ÜÔ∏è", title: "Dependency Inversion", desc: "Outer layers depend on inner layers, never the reverse.", color: "#8b5cf6" }
        ],
        formula: "Core ‚Üí Application ‚Üí Infrastructure (dependencies point inward)",
        strategies: [
          { title: "Define Ports as Interfaces", desc: "Use interfaces for all external interactions - persistence, messaging, external APIs." },
          { title: "Keep Domain Pure", desc: "No framework dependencies, no I/O in domain layer. Pure business logic only." },
          { title: "Use Dependency Injection", desc: "Wire adapters to ports at application startup for flexibility and testing." },
          { title: "Test Domain Independently", desc: "Unit test domain with mock adapters. Integration test with real adapters." }
        ],
        metrics: [
          { level: "Domain Layer", downtime: "Business logic", useCase: "Entities, value objects" },
          { level: "Application Layer", downtime: "Use cases", useCase: "Orchestration" },
          { level: "Ports", downtime: "Interfaces", useCase: "Contracts" },
          { level: "Adapters", downtime: "Implementations", useCase: "Infrastructure" }
        ]
      },
      "service-mesh": {
        title: "Service Mesh",
        subtitle: "A dedicated infrastructure layer for handling service-to-service communication.",
        badge: { text: "Architecture", color: "#10b981", bg: "rgba(16, 185, 129, 0.15)" },
        color: "#10b981",
        diagram: `
          <style>
            .sm-viz { display: flex; flex-direction: column; gap: 24px; }
            .sm-cluster { background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 12px; padding: 20px; }
            .sm-services { display: flex; gap: 24px; justify-content: center; flex-wrap: wrap; }
            .sm-service { text-align: center; }
            .sm-app { background: #3b82f6; color: white; padding: 12px 20px; border-radius: 8px 8px 0 0; font-size: 0.85rem; font-weight: 600; }
            .sm-sidecar { background: #10b981; color: white; padding: 8px 20px; border-radius: 0 0 8px 8px; font-size: 0.75rem; }
            .sm-connection { display: flex; align-items: center; justify-content: center; margin: 16px 0; }
            .sm-conn-line { height: 2px; background: linear-gradient(90deg, #10b981, #3b82f6, #10b981); flex: 1; max-width: 200px; }
            .sm-conn-label { background: rgba(30, 35, 50, 0.8); padding: 4px 12px; border-radius: 4px; font-size: 0.7rem; color: #10b981; margin: 0 8px; }
            .sm-features { display: grid; grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); gap: 8px; }
            .sm-feature { background: rgba(30, 35, 50, 0.8); border-radius: 6px; padding: 10px; text-align: center; font-size: 0.75rem; color: #e5e5e5; }
          </style>
          <div class="sm-viz">
            <div class="sm-cluster">
              <div class="sm-services">
                <div class="sm-service"><div class="sm-app">Service A</div><div class="sm-sidecar">üîó Envoy Proxy</div></div>
                <div class="sm-service"><div class="sm-app">Service B</div><div class="sm-sidecar">üîó Envoy Proxy</div></div>
                <div class="sm-service"><div class="sm-app">Service C</div><div class="sm-sidecar">üîó Envoy Proxy</div></div>
              </div>
              <div class="sm-connection">
                <div class="sm-conn-line"></div>
                <div class="sm-conn-label">mTLS + Observability</div>
                <div class="sm-conn-line"></div>
              </div>
            </div>
            <div class="sm-features">
              <div class="sm-feature">üîí mTLS</div>
              <div class="sm-feature">‚öñÔ∏è Load Balancing</div>
              <div class="sm-feature">üîÅ Retries</div>
              <div class="sm-feature">üìä Metrics</div>
              <div class="sm-feature">üîç Tracing</div>
              <div class="sm-feature">üö¶ Traffic Control</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Service Mesh</strong> is a dedicated infrastructure layer that handles service-to-service communication. It typically uses sidecar proxies deployed alongside each service to manage traffic, security, and observability.</p><p>Popular implementations include Istio, Linkerd, and Consul Connect.</p>`,
        keyPoints: [
          { icon: "üîó", title: "Sidecar Proxy", desc: "Each service has a proxy (Envoy) that handles all network traffic.", color: "#10b981" },
          { icon: "üîí", title: "mTLS", desc: "Automatic mutual TLS encryption between all services.", color: "#3b82f6" },
          { icon: "üìä", title: "Observability", desc: "Automatic metrics, tracing, and logging for all service calls.", color: "#f59e0b" },
          { icon: "üö¶", title: "Traffic Management", desc: "Canary deployments, A/B testing, circuit breaking, rate limiting.", color: "#8b5cf6" }
        ],
        formula: "Service Mesh = Sidecar Proxies + Control Plane",
        strategies: [
          { title: "Start with Observability", desc: "Deploy mesh for visibility first, then add security and traffic policies." },
          { title: "Gradual Rollout", desc: "Add services to the mesh incrementally, not all at once." },
          { title: "Understand Overhead", desc: "Sidecars add latency and resource consumption. Measure impact." },
          { title: "Use Managed Options", desc: "Consider managed meshes (AWS App Mesh, GKE with Istio) to reduce ops burden." }
        ],
        metrics: [
          { level: "Istio", downtime: "Full featured, complex", useCase: "Enterprise Kubernetes" },
          { level: "Linkerd", downtime: "Lightweight, simple", useCase: "Kubernetes" },
          { level: "Consul Connect", downtime: "Multi-platform", useCase: "VMs + Kubernetes" },
          { level: "AWS App Mesh", downtime: "Managed, AWS native", useCase: "AWS workloads" }
        ]
      },
      "bff": {
        title: "Backend for Frontend (BFF)",
        subtitle: "Creating dedicated backend services tailored to specific frontend requirements.",
        badge: { text: "Architecture", color: "#10b981", bg: "rgba(16, 185, 129, 0.15)" },
        color: "#10b981",
        diagram: `
          <style>
            .bff-viz { display: flex; flex-direction: column; gap: 20px; }
            .bff-clients { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
            .bff-stack { text-align: center; }
            .bff-client { background: #3b82f6; color: white; padding: 10px 20px; border-radius: 8px; font-size: 0.85rem; font-weight: 600; }
            .bff-arrow { font-size: 1.2rem; color: #10b981; margin: 8px 0; }
            .bff-backend { background: #10b981; color: white; padding: 10px 16px; border-radius: 8px; font-size: 0.8rem; }
            .bff-services { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin-top: 16px; padding-top: 16px; border-top: 1px dashed rgba(16, 185, 129, 0.3); }
            .bff-service { background: rgba(139, 92, 246, 0.2); border: 1px solid #8b5cf6; color: #8b5cf6; padding: 10px 16px; border-radius: 8px; font-size: 0.8rem; }
          </style>
          <div class="bff-viz">
            <div class="bff-clients">
              <div class="bff-stack">
                <div class="bff-client">üì± Mobile App</div>
                <div class="bff-arrow">‚Üì</div>
                <div class="bff-backend">Mobile BFF</div>
              </div>
              <div class="bff-stack">
                <div class="bff-client">üíª Web App</div>
                <div class="bff-arrow">‚Üì</div>
                <div class="bff-backend">Web BFF</div>
              </div>
              <div class="bff-stack">
                <div class="bff-client">‚åö Wearable</div>
                <div class="bff-arrow">‚Üì</div>
                <div class="bff-backend">IoT BFF</div>
              </div>
            </div>
            <div class="bff-services">
              <div class="bff-service">üë§ User Service</div>
              <div class="bff-service">üì¶ Order Service</div>
              <div class="bff-service">üí≥ Payment Service</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Backend for Frontend (BFF)</strong> is a pattern where a dedicated backend is created for each type of frontend client (web, mobile, IoT). Each BFF aggregates and tailors data specifically for its client's needs.</p><p>This eliminates the "one API fits all" problem and allows frontend teams to own their backend interface.</p>`,
        keyPoints: [
          { icon: "üì±", title: "Client-Specific", desc: "Each frontend type gets an API tailored to its exact needs and constraints.", color: "#3b82f6" },
          { icon: "üîó", title: "Aggregation", desc: "BFF combines data from multiple microservices into client-friendly responses.", color: "#10b981" },
          { icon: "üë•", title: "Team Ownership", desc: "Frontend teams can own and evolve their BFF independently.", color: "#f59e0b" },
          { icon: "‚ö°", title: "Optimization", desc: "Reduce payload size, minimize roundtrips, optimize for network conditions.", color: "#8b5cf6" }
        ],
        formula: "BFF = API Gateway + Client-Specific Aggregation",
        strategies: [
          { title: "One BFF per Client Type", desc: "Web, mobile, and third-party each get their own BFF. Share code where possible." },
          { title: "Frontend Team Ownership", desc: "Frontend developers own their BFF - reduces cross-team coordination." },
          { title: "Keep BFFs Thin", desc: "BFFs should aggregate and transform, not contain business logic." },
          { title: "Consider GraphQL", desc: "GraphQL can provide similar benefits with a single flexible endpoint." }
        ],
        metrics: [
          { level: "Generic API", downtime: "One size fits all", useCase: "Simple apps" },
          { level: "BFF Pattern", downtime: "Per-client backend", useCase: "Multi-client apps" },
          { level: "GraphQL", downtime: "Flexible queries", useCase: "Variable data needs" },
          { level: "API Gateway + BFF", downtime: "Full separation", useCase: "Large teams" }
        ]
      },
      "strangler-fig": {
        title: "Strangler Fig Pattern",
        subtitle: "Incrementally replacing a legacy system by gradually routing traffic to new implementations.",
        badge: { text: "Architecture", color: "#10b981", bg: "rgba(16, 185, 129, 0.15)" },
        color: "#10b981",
        diagram: `
          <style>
            .sf-viz { display: flex; flex-direction: column; gap: 20px; }
            .sf-phases { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .sf-phase { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 160px; text-align: center; }
            .sf-phase-num { font-size: 0.7rem; color: #a0a0b0; margin-bottom: 8px; }
            .sf-bars { display: flex; height: 60px; border-radius: 6px; overflow: hidden; }
            .sf-legacy { background: #ef4444; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.7rem; }
            .sf-new { background: #10b981; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.7rem; }
            .sf-router { background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 12px; padding: 16px; text-align: center; }
            .sf-router-title { font-weight: 600; color: #10b981; margin-bottom: 12px; }
            .sf-router-flow { display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap; }
            .sf-router-item { padding: 8px 14px; border-radius: 6px; font-size: 0.8rem; }
          </style>
          <div class="sf-viz">
            <div class="sf-phases">
              <div class="sf-phase"><div class="sf-phase-num">Phase 1</div><div class="sf-bars"><div class="sf-legacy" style="width:100%">Legacy</div></div></div>
              <div class="sf-phase"><div class="sf-phase-num">Phase 2</div><div class="sf-bars"><div class="sf-legacy" style="width:70%">70%</div><div class="sf-new" style="width:30%">30%</div></div></div>
              <div class="sf-phase"><div class="sf-phase-num">Phase 3</div><div class="sf-bars"><div class="sf-legacy" style="width:30%">30%</div><div class="sf-new" style="width:70%">70%</div></div></div>
              <div class="sf-phase"><div class="sf-phase-num">Phase 4</div><div class="sf-bars"><div class="sf-new" style="width:100%">New ‚úì</div></div></div>
            </div>
            <div class="sf-router">
              <div class="sf-router-title">üîÄ Strangler Facade (Router)</div>
              <div class="sf-router-flow">
                <div class="sf-router-item" style="background:#3b82f6;color:white">Request</div>
                <span style="color:#10b981">‚Üí</span>
                <div class="sf-router-item" style="background:rgba(16,185,129,0.3);color:#10b981">Route Decision</div>
                <span style="color:#10b981">‚Üí</span>
                <div class="sf-router-item" style="background:#ef4444;color:white">Legacy</div>
                <span style="color:#a0a0b0">or</span>
                <div class="sf-router-item" style="background:#10b981;color:white">New</div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Strangler Fig Pattern</strong> is a migration strategy where a new system is gradually built around the edges of an existing legacy system. Traffic is incrementally routed to the new implementation until the old system can be decommissioned.</p><p>Named after strangler fig trees that grow around host trees, eventually replacing them.</p>`,
        keyPoints: [
          { icon: "üîÄ", title: "Facade/Router", desc: "A routing layer directs traffic to legacy or new system based on rules.", color: "#10b981" },
          { icon: "üìà", title: "Incremental", desc: "Migrate feature by feature, reducing risk and enabling continuous delivery.", color: "#3b82f6" },
          { icon: "üîÑ", title: "Parallel Running", desc: "Both systems run simultaneously during migration for comparison and fallback.", color: "#f59e0b" },
          { icon: "üóëÔ∏è", title: "Eventual Removal", desc: "Once all traffic migrates, legacy system is decommissioned.", color: "#ef4444" }
        ],
        formula: "Migration = Extract Feature ‚Üí Build New ‚Üí Route Traffic ‚Üí Repeat",
        strategies: [
          { title: "Start at the Edge", desc: "Begin with features that have fewer dependencies and clearer boundaries." },
          { title: "Use Feature Flags", desc: "Toggle traffic between old and new for testing and gradual rollout." },
          { title: "Compare Results", desc: "Run both systems and compare outputs to verify correctness." },
          { title: "Keep Legacy Running", desc: "Don't remove legacy code until new system is proven in production." }
        ],
        metrics: [
          { level: "Big Bang", downtime: "High risk, fast", useCase: "Small systems" },
          { level: "Strangler", downtime: "Low risk, incremental", useCase: "Large legacy systems" },
          { level: "Branch by Abstraction", downtime: "Codebase migration", useCase: "Library replacement" },
          { level: "Feature Toggles", downtime: "Traffic control", useCase: "Gradual rollout" }
        ]
      },
      "retries-backoff": {
        title: "Retries with Backoff",
        subtitle: "Automatically retrying failed operations with increasing delays to handle transient failures.",
        badge: { text: "Resilience", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" },
        color: "#f59e0b",
        diagram: `
          <style>
            .rb-viz { display: flex; flex-direction: column; gap: 24px; }
            .rb-timeline { display: flex; align-items: flex-end; gap: 8px; justify-content: center; flex-wrap: wrap; padding: 20px; background: rgba(245, 158, 11, 0.1); border-radius: 12px; }
            .rb-attempt { display: flex; flex-direction: column; align-items: center; gap: 4px; }
            .rb-bar { width: 50px; background: linear-gradient(to top, #f59e0b, #fbbf24); border-radius: 4px 4px 0 0; display: flex; align-items: flex-end; justify-content: center; padding-bottom: 4px; color: white; font-size: 0.7rem; font-weight: 600; }
            .rb-label { font-size: 0.7rem; color: #a0a0b0; }
            .rb-status { font-size: 1rem; }
            .rb-types { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .rb-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 10px; padding: 14px; width: 150px; text-align: center; }
            .rb-type-name { font-weight: 600; color: #f59e0b; font-size: 0.9rem; margin-bottom: 4px; }
            .rb-type-formula { font-size: 0.7rem; color: #a0a0b0; font-family: monospace; }
          </style>
          <div class="rb-viz">
            <div class="rb-timeline">
              <div class="rb-attempt"><div class="rb-status">‚ùå</div><div class="rb-bar" style="height:20px">0s</div><div class="rb-label">Attempt 1</div></div>
              <div class="rb-attempt"><div class="rb-status">‚ùå</div><div class="rb-bar" style="height:40px">1s</div><div class="rb-label">Attempt 2</div></div>
              <div class="rb-attempt"><div class="rb-status">‚ùå</div><div class="rb-bar" style="height:60px">2s</div><div class="rb-label">Attempt 3</div></div>
              <div class="rb-attempt"><div class="rb-status">‚ùå</div><div class="rb-bar" style="height:80px">4s</div><div class="rb-label">Attempt 4</div></div>
              <div class="rb-attempt"><div class="rb-status">‚úÖ</div><div class="rb-bar" style="height:100px;background:linear-gradient(to top, #22c55e, #4ade80)">8s</div><div class="rb-label">Attempt 5</div></div>
            </div>
            <div class="rb-types">
              <div class="rb-type"><div class="rb-type-name">Fixed</div><div class="rb-type-formula">delay = constant</div></div>
              <div class="rb-type"><div class="rb-type-name">Exponential</div><div class="rb-type-formula">delay = base √ó 2^n</div></div>
              <div class="rb-type"><div class="rb-type-name">+ Jitter</div><div class="rb-type-formula">delay ¬± random</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Retries with Backoff</strong> is a resilience pattern where failed operations are automatically retried after a delay. Exponential backoff increases the delay between retries to avoid overwhelming a recovering service.</p><p>Adding jitter (randomness) prevents thundering herd problems when many clients retry simultaneously.</p>`,
        keyPoints: [
          { icon: "üîÑ", title: "Transient Failures", desc: "Retries help with temporary issues like network blips or brief service overload.", color: "#f59e0b" },
          { icon: "üìà", title: "Exponential Backoff", desc: "Double delay each retry: 1s, 2s, 4s, 8s... Gives service time to recover.", color: "#3b82f6" },
          { icon: "üé≤", title: "Jitter", desc: "Add randomness to prevent synchronized retry storms from multiple clients.", color: "#10b981" },
          { icon: "üõë", title: "Max Retries", desc: "Set limits to avoid infinite retries. Fail fast if service is truly down.", color: "#ef4444" }
        ],
        formula: "Delay = min(base √ó 2^attempt + random_jitter, max_delay)",
        strategies: [
          { title: "Identify Retryable Errors", desc: "Retry 503, 429, timeouts. Don't retry 400, 401, 404 - they won't succeed." },
          { title: "Use Jitter", desc: "Add random delay (0-100% of calculated delay) to spread retry load." },
          { title: "Set Reasonable Limits", desc: "Max 3-5 retries with reasonable max delay (30s-60s) before giving up." },
          { title: "Combine with Circuit Breaker", desc: "Stop retrying entirely when circuit opens to prevent cascade failures." }
        ],
        metrics: [
          { level: "Fixed Delay", downtime: "Same wait each time", useCase: "Simple cases" },
          { level: "Linear Backoff", downtime: "Delay increases linearly", useCase: "Moderate load" },
          { level: "Exponential", downtime: "Delay doubles", useCase: "Burst recovery" },
          { level: "Exponential + Jitter", downtime: "Best practice", useCase: "Production systems" }
        ]
      },
      "timeouts": {
        title: "Timeouts",
        subtitle: "Setting time limits on operations to prevent indefinite waiting and resource exhaustion.",
        badge: { text: "Resilience", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" },
        color: "#f59e0b",
        diagram: `
          <style>
            .to-viz { display: flex; flex-direction: column; gap: 24px; }
            .to-timeline { background: rgba(245, 158, 11, 0.1); border-radius: 12px; padding: 20px; }
            .to-bar { display: flex; align-items: center; gap: 8px; margin-bottom: 12px; }
            .to-bar-label { width: 100px; font-size: 0.8rem; color: #a0a0b0; }
            .to-bar-track { flex: 1; height: 24px; background: rgba(30, 35, 50, 0.8); border-radius: 4px; overflow: hidden; display: flex; }
            .to-bar-fill { height: 100%; display: flex; align-items: center; justify-content: flex-end; padding-right: 8px; font-size: 0.7rem; color: white; font-weight: 600; }
            .to-success { background: linear-gradient(90deg, #22c55e, #4ade80); }
            .to-timeout { background: linear-gradient(90deg, #3b82f6, #ef4444); }
            .to-types { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .to-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 8px; padding: 12px; width: 130px; text-align: center; }
            .to-type-icon { font-size: 1.5rem; margin-bottom: 6px; }
            .to-type-name { font-weight: 600; color: #f59e0b; font-size: 0.85rem; }
            .to-type-val { font-size: 0.7rem; color: #a0a0b0; }
          </style>
          <div class="to-viz">
            <div class="to-timeline">
              <div class="to-bar"><div class="to-bar-label">Normal (200ms)</div><div class="to-bar-track"><div class="to-bar-fill to-success" style="width:20%">‚úì</div></div></div>
              <div class="to-bar"><div class="to-bar-label">Slow (800ms)</div><div class="to-bar-track"><div class="to-bar-fill to-success" style="width:80%">‚úì</div></div></div>
              <div class="to-bar"><div class="to-bar-label">Timeout! (>1s)</div><div class="to-bar-track"><div class="to-bar-fill to-timeout" style="width:100%">‚è±Ô∏è TIMEOUT</div></div></div>
            </div>
            <div class="to-types">
              <div class="to-type"><div class="to-type-icon">üîå</div><div class="to-type-name">Connection</div><div class="to-type-val">1-5 seconds</div></div>
              <div class="to-type"><div class="to-type-icon">üìñ</div><div class="to-type-name">Read</div><div class="to-type-val">5-30 seconds</div></div>
              <div class="to-type"><div class="to-type-icon">‚úçÔ∏è</div><div class="to-type-name">Write</div><div class="to-type-val">10-60 seconds</div></div>
              <div class="to-type"><div class="to-type-icon">üîÑ</div><div class="to-type-name">Idle</div><div class="to-type-val">30-300 seconds</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Timeouts</strong> set maximum time limits for operations like network calls, database queries, or acquiring locks. Without timeouts, a hanging dependency can block resources indefinitely, causing cascading failures.</p><p>Proper timeout values balance between giving operations enough time to complete and failing fast when dependencies are unhealthy.</p>`,
        keyPoints: [
          { icon: "‚è±Ô∏è", title: "Connection Timeout", desc: "Time to establish connection. Should be short (1-5s) - fast failure if unreachable.", color: "#f59e0b" },
          { icon: "üìñ", title: "Read/Socket Timeout", desc: "Time waiting for data after connection. Based on expected operation duration.", color: "#3b82f6" },
          { icon: "üîÑ", title: "Request Timeout", desc: "Overall time for entire operation including retries and processing.", color: "#10b981" },
          { icon: "‚ö†Ô∏è", title: "Deadline Propagation", desc: "Pass remaining time budget through call chain to prevent timeout after timeout.", color: "#ef4444" }
        ],
        formula: "Timeout = P99 latency √ó 2-3 (with headroom for variance)",
        strategies: [
          { title: "Set All Timeouts", desc: "Never use infinite timeouts. Every external call needs a timeout." },
          { title: "Base on SLOs", desc: "Set timeouts based on latency SLOs - P99 response time plus margin." },
          { title: "Propagate Deadlines", desc: "Pass remaining time through the call chain to fail fast in downstream services." },
          { title: "Monitor Timeout Rates", desc: "High timeout rates indicate performance issues or incorrect timeout values." }
        ],
        metrics: [
          { level: "Database", downtime: "1-30s typical", useCase: "Query complexity" },
          { level: "HTTP API", downtime: "1-10s typical", useCase: "Service calls" },
          { level: "gRPC", downtime: "Built-in deadlines", useCase: "Microservices" },
          { level: "Message Queue", downtime: "Visibility timeout", useCase: "Async processing" }
        ]
      },
      "bulkheads": {
        title: "Bulkheads",
        subtitle: "Isolating components to prevent failures from cascading across the entire system.",
        badge: { text: "Resilience", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" },
        color: "#f59e0b",
        diagram: `
          <style>
            .bh-viz { display: flex; flex-direction: column; gap: 24px; }
            .bh-ship { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 12px; padding: 20px; }
            .bh-title { font-size: 0.85rem; color: #f59e0b; margin-bottom: 12px; font-weight: 600; text-align: center; }
            .bh-compartments { display: flex; gap: 4px; }
            .bh-comp { flex: 1; height: 80px; border-radius: 4px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; font-size: 0.75rem; border: 2px solid; }
            .bh-ok { background: rgba(34, 197, 94, 0.2); border-color: #22c55e; color: #22c55e; }
            .bh-fail { background: rgba(239, 68, 68, 0.3); border-color: #ef4444; color: #ef4444; }
            .bh-wall { width: 6px; background: linear-gradient(to bottom, #f59e0b, #d97706); border-radius: 2px; }
            .bh-pools { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .bh-pool { background: rgba(30, 35, 50, 0.8); border: 1px solid rgba(245, 158, 11, 0.2); border-radius: 10px; padding: 14px; width: 140px; text-align: center; }
            .bh-pool-name { font-weight: 600; color: #f59e0b; font-size: 0.85rem; margin-bottom: 8px; }
            .bh-pool-bar { height: 8px; background: rgba(100, 100, 120, 0.3); border-radius: 4px; overflow: hidden; }
            .bh-pool-fill { height: 100%; border-radius: 4px; }
          </style>
          <div class="bh-viz">
            <div class="bh-ship">
              <div class="bh-title">üö¢ Bulkhead Isolation (like ship compartments)</div>
              <div class="bh-compartments">
                <div class="bh-comp bh-ok">‚úì Auth<br>5/10 threads</div>
                <div class="bh-wall"></div>
                <div class="bh-comp bh-fail">‚úó Payment<br>FULL 10/10</div>
                <div class="bh-wall"></div>
                <div class="bh-comp bh-ok">‚úì Search<br>3/10 threads</div>
                <div class="bh-wall"></div>
                <div class="bh-comp bh-ok">‚úì Orders<br>7/10 threads</div>
              </div>
            </div>
            <div class="bh-pools">
              <div class="bh-pool"><div class="bh-pool-name">Thread Pool</div><div class="bh-pool-bar"><div class="bh-pool-fill" style="width:60%;background:#22c55e"></div></div></div>
              <div class="bh-pool"><div class="bh-pool-name">Connection Pool</div><div class="bh-pool-bar"><div class="bh-pool-fill" style="width:80%;background:#f59e0b"></div></div></div>
              <div class="bh-pool"><div class="bh-pool-name">Semaphore</div><div class="bh-pool-bar"><div class="bh-pool-fill" style="width:40%;background:#3b82f6"></div></div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Bulkheads</strong> isolate components so that failures in one area don't cascade to others. Named after ship compartments that prevent a single breach from sinking the entire vessel.</p><p>Implementation includes separate thread pools, connection pools, or process isolation for different services or features.</p>`,
        keyPoints: [
          { icon: "üßµ", title: "Thread Pool Isolation", desc: "Separate thread pools per service. One slow service can't exhaust all threads.", color: "#f59e0b" },
          { icon: "üîå", title: "Connection Pool Isolation", desc: "Separate connection pools prevent one service from consuming all connections.", color: "#3b82f6" },
          { icon: "üé´", title: "Semaphore Isolation", desc: "Limit concurrent calls per service with semaphores or rate limiters.", color: "#10b981" },
          { icon: "üì¶", title: "Process Isolation", desc: "Run critical services in separate processes or containers for strongest isolation.", color: "#8b5cf6" }
        ],
        formula: "System Availability = Œ†(Compartment Availability)",
        strategies: [
          { title: "Identify Failure Domains", desc: "Group services by criticality and failure modes for isolation boundaries." },
          { title: "Size Pools Appropriately", desc: "Too small = artificial throttling. Too large = insufficient isolation." },
          { title: "Monitor Pool Saturation", desc: "Alert when pools approach capacity before they cause rejections." },
          { title: "Combine with Circuit Breaker", desc: "Open circuit when bulkhead consistently fills up, allowing faster recovery." }
        ],
        metrics: [
          { level: "Thread Pool", downtime: "Per-service threads", useCase: "Synchronous calls" },
          { level: "Semaphore", downtime: "Concurrent call limit", useCase: "Lightweight limiting" },
          { level: "Connection Pool", downtime: "Per-service connections", useCase: "Database/HTTP" },
          { level: "Process", downtime: "Container isolation", useCase: "Critical services" }
        ]
      },
      "health-checks": {
        title: "Health Checks",
        subtitle: "Probes that verify if a service is running correctly and ready to handle traffic.",
        badge: { text: "Resilience", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" },
        color: "#f59e0b",
        diagram: `
          <style>
            .hc-viz { display: flex; flex-direction: column; gap: 24px; }
            .hc-types { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .hc-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 160px; text-align: center; }
            .hc-type-icon { font-size: 2rem; margin-bottom: 8px; }
            .hc-type-name { font-weight: 600; font-size: 0.95rem; margin-bottom: 4px; }
            .hc-type-desc { font-size: 0.7rem; color: #a0a0b0; }
            .hc-liveness { border: 1px solid rgba(34, 197, 94, 0.3); }
            .hc-liveness .hc-type-name { color: #22c55e; }
            .hc-readiness { border: 1px solid rgba(59, 130, 246, 0.3); }
            .hc-readiness .hc-type-name { color: #3b82f6; }
            .hc-startup { border: 1px solid rgba(245, 158, 11, 0.3); }
            .hc-startup .hc-type-name { color: #f59e0b; }
            .hc-flow { background: rgba(34, 197, 94, 0.1); border-radius: 12px; padding: 16px; display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap; }
            .hc-step { background: rgba(30, 35, 50, 0.8); padding: 8px 14px; border-radius: 6px; font-size: 0.8rem; color: #e5e5e5; }
            .hc-arrow { color: #22c55e; }
          </style>
          <div class="hc-viz">
            <div class="hc-types">
              <div class="hc-type hc-liveness"><div class="hc-type-icon">üíö</div><div class="hc-type-name">Liveness</div><div class="hc-type-desc">Is the process alive? Restart if failing.</div></div>
              <div class="hc-type hc-readiness"><div class="hc-type-icon">üíô</div><div class="hc-type-name">Readiness</div><div class="hc-type-desc">Ready for traffic? Remove from LB if not.</div></div>
              <div class="hc-type hc-startup"><div class="hc-type-icon">üß°</div><div class="hc-type-name">Startup</div><div class="hc-type-desc">Has it finished starting? Delay other probes.</div></div>
            </div>
            <div class="hc-flow">
              <div class="hc-step">GET /health/live</div>
              <span class="hc-arrow">‚Üí</span>
              <div class="hc-step">Check process</div>
              <span class="hc-arrow">‚Üí</span>
              <div class="hc-step">200 OK ‚úì</div>
              <span class="hc-arrow">or</span>
              <div class="hc-step" style="border:1px solid #ef4444;color:#ef4444">503 Unhealthy</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Health Checks</strong> are endpoints that report on a service's operational status. They're used by load balancers, orchestrators (Kubernetes), and monitoring systems to detect and handle failures.</p><p>Different types of health checks serve different purposes: liveness for restarts, readiness for traffic routing.</p>`,
        keyPoints: [
          { icon: "üíö", title: "Liveness Probe", desc: "Checks if the process is alive. Failures trigger container restart.", color: "#22c55e" },
          { icon: "üíô", title: "Readiness Probe", desc: "Checks if ready for traffic. Failures remove from load balancer.", color: "#3b82f6" },
          { icon: "üß°", title: "Startup Probe", desc: "Used for slow-starting apps. Delays liveness/readiness until app is up.", color: "#f59e0b" },
          { icon: "üîç", title: "Deep Health Check", desc: "Checks dependencies (DB, cache). Use for readiness, not liveness.", color: "#8b5cf6" }
        ],
        formula: "Healthy = Liveness ‚àß Readiness ‚àß Dependencies OK",
        strategies: [
          { title: "Separate Liveness from Readiness", desc: "Liveness: process alive. Readiness: can serve traffic. Don't mix them." },
          { title: "Keep Liveness Simple", desc: "Liveness should only check if process is stuck, not dependencies." },
          { title: "Set Appropriate Intervals", desc: "Check every 10-30s. Too frequent = overhead. Too slow = delayed detection." },
          { title: "Include Dependency Checks in Readiness", desc: "Check DB, cache connections in readiness to avoid routing to broken instances." }
        ],
        metrics: [
          { level: "/health/live", downtime: "Process check", useCase: "Liveness probe" },
          { level: "/health/ready", downtime: "Traffic readiness", useCase: "Readiness probe" },
          { level: "/health/startup", downtime: "Init complete", useCase: "Slow-start apps" },
          { level: "/health/deep", downtime: "All dependencies", useCase: "Debugging" }
        ]
      },
      "failover": {
        title: "Failover",
        subtitle: "Automatically switching to a backup system when the primary fails.",
        badge: { text: "Resilience", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" },
        color: "#f59e0b",
        diagram: `
          <style>
            .fo-viz { display: flex; flex-direction: column; gap: 24px; }
            .fo-scenario { background: rgba(245, 158, 11, 0.1); border-radius: 12px; padding: 20px; }
            .fo-title { font-size: 0.85rem; color: #f59e0b; margin-bottom: 16px; font-weight: 600; text-align: center; }
            .fo-systems { display: flex; align-items: center; justify-content: center; gap: 20px; flex-wrap: wrap; }
            .fo-system { text-align: center; }
            .fo-box { padding: 16px 24px; border-radius: 10px; font-weight: 600; font-size: 0.9rem; margin-bottom: 6px; }
            .fo-primary { background: rgba(239, 68, 68, 0.2); border: 2px dashed #ef4444; color: #ef4444; }
            .fo-standby { background: #22c55e; color: white; border: 2px solid #22c55e; }
            .fo-label { font-size: 0.75rem; color: #a0a0b0; }
            .fo-arrow { font-size: 2rem; color: #f59e0b; }
            .fo-types { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .fo-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 10px; padding: 14px; width: 140px; text-align: center; }
            .fo-type-icon { font-size: 1.5rem; margin-bottom: 6px; }
            .fo-type-name { font-weight: 600; color: #f59e0b; font-size: 0.85rem; margin-bottom: 2px; }
            .fo-type-time { font-size: 0.7rem; color: #a0a0b0; }
          </style>
          <div class="fo-viz">
            <div class="fo-scenario">
              <div class="fo-title">üîÑ Automatic Failover</div>
              <div class="fo-systems">
                <div class="fo-system"><div class="fo-box fo-primary">‚ùå Primary Failed</div><div class="fo-label">Detected by monitor</div></div>
                <span class="fo-arrow">‚Üí</span>
                <div class="fo-system"><div class="fo-box fo-standby">‚úì Standby ‚Üí Active</div><div class="fo-label">Traffic redirected</div></div>
              </div>
            </div>
            <div class="fo-types">
              <div class="fo-type"><div class="fo-type-icon">üî•</div><div class="fo-type-name">Hot Standby</div><div class="fo-type-time">Seconds failover</div></div>
              <div class="fo-type"><div class="fo-type-icon">üå°Ô∏è</div><div class="fo-type-name">Warm Standby</div><div class="fo-type-time">Minutes failover</div></div>
              <div class="fo-type"><div class="fo-type-icon">‚ùÑÔ∏è</div><div class="fo-type-name">Cold Standby</div><div class="fo-type-time">Hours failover</div></div>
              <div class="fo-type"><div class="fo-type-icon">‚ö°</div><div class="fo-type-name">Active-Active</div><div class="fo-type-time">Zero failover</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Failover</strong> is the process of automatically switching to a redundant or standby system when the primary system fails. It's essential for high availability and business continuity.</p><p>Failover can be automatic (detected and switched by systems) or manual (requiring human intervention).</p>`,
        keyPoints: [
          { icon: "üî•", title: "Hot Standby", desc: "Replica runs in sync, ready to take over instantly. Highest cost, fastest failover.", color: "#ef4444" },
          { icon: "üå°Ô∏è", title: "Warm Standby", desc: "Server running but not fully synced. Minutes to restore and catch up.", color: "#f59e0b" },
          { icon: "‚ùÑÔ∏è", title: "Cold Standby", desc: "Hardware ready but not running. Hours to provision and restore.", color: "#3b82f6" },
          { icon: "‚ö°", title: "Active-Active", desc: "Both systems serve traffic. No failover needed, just rebalancing.", color: "#22c55e" }
        ],
        formula: "RTO = Detection Time + Failover Time + Recovery Time",
        strategies: [
          { title: "Automate Detection", desc: "Use health checks and monitoring to detect failures within seconds." },
          { title: "Test Failover Regularly", desc: "Scheduled failover drills ensure the process works when needed." },
          { title: "Consider Failback", desc: "Plan how to return to primary after it's restored - manual or automatic." },
          { title: "Avoid Split-Brain", desc: "Use fencing, quorum, or leader election to prevent both systems being active." }
        ],
        metrics: [
          { level: "Active-Active", downtime: "~0 seconds", useCase: "Mission-critical" },
          { level: "Hot Standby", downtime: "Seconds", useCase: "High availability" },
          { level: "Warm Standby", downtime: "Minutes", useCase: "Standard production" },
          { level: "Cold Standby", downtime: "Hours", useCase: "Cost-sensitive DR" }
        ]
      },
      "chaos-engineering": {
        title: "Chaos Engineering",
        subtitle: "Deliberately injecting failures to test and improve system resilience.",
        badge: { text: "Resilience", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" },
        color: "#f59e0b",
        diagram: `
          <style>
            .ce-viz { display: flex; flex-direction: column; gap: 24px; }
            .ce-cycle { display: flex; align-items: center; justify-content: center; gap: 8px; flex-wrap: wrap; padding: 20px; background: rgba(245, 158, 11, 0.1); border-radius: 12px; }
            .ce-step { background: rgba(30, 35, 50, 0.8); border: 1px solid #f59e0b; border-radius: 8px; padding: 12px 16px; text-align: center; }
            .ce-step-num { font-size: 0.7rem; color: #f59e0b; }
            .ce-step-name { font-size: 0.85rem; color: #e5e5e5; font-weight: 600; }
            .ce-arrow { color: #f59e0b; font-size: 1.2rem; }
            .ce-faults { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; }
            .ce-fault { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 8px; padding: 10px; text-align: center; }
            .ce-fault-icon { font-size: 1.3rem; margin-bottom: 4px; }
            .ce-fault-name { font-size: 0.75rem; color: #ef4444; }
          </style>
          <div class="ce-viz">
            <div class="ce-cycle">
              <div class="ce-step"><div class="ce-step-num">1</div><div class="ce-step-name">Hypothesis</div></div>
              <span class="ce-arrow">‚Üí</span>
              <div class="ce-step"><div class="ce-step-num">2</div><div class="ce-step-name">Inject Fault</div></div>
              <span class="ce-arrow">‚Üí</span>
              <div class="ce-step"><div class="ce-step-num">3</div><div class="ce-step-name">Observe</div></div>
              <span class="ce-arrow">‚Üí</span>
              <div class="ce-step"><div class="ce-step-num">4</div><div class="ce-step-name">Learn & Fix</div></div>
              <span class="ce-arrow">‚Ü∫</span>
            </div>
            <div class="ce-faults">
              <div class="ce-fault"><div class="ce-fault-icon">üíÄ</div><div class="ce-fault-name">Kill Instance</div></div>
              <div class="ce-fault"><div class="ce-fault-icon">üåê</div><div class="ce-fault-name">Network Delay</div></div>
              <div class="ce-fault"><div class="ce-fault-icon">üíæ</div><div class="ce-fault-name">Disk Full</div></div>
              <div class="ce-fault"><div class="ce-fault-icon">üî•</div><div class="ce-fault-name">CPU Stress</div></div>
              <div class="ce-fault"><div class="ce-fault-icon">üîå</div><div class="ce-fault-name">DNS Failure</div></div>
              <div class="ce-fault"><div class="ce-fault-icon">‚è±Ô∏è</div><div class="ce-fault-name">Clock Skew</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Chaos Engineering</strong> is the discipline of experimenting on a system to build confidence in its ability to withstand turbulent conditions. It involves intentionally injecting failures to discover weaknesses.</p><p>Pioneered by Netflix with Chaos Monkey, it's now a critical practice for building resilient systems.</p>`,
        keyPoints: [
          { icon: "üéØ", title: "Hypothesis", desc: "Define what you expect to happen. 'If X fails, system should Y.'", color: "#f59e0b" },
          { icon: "üí•", title: "Blast Radius", desc: "Start small in non-prod, gradually increase scope to production.", color: "#ef4444" },
          { icon: "üìä", title: "Observe", desc: "Monitor metrics, logs, user impact during experiments.", color: "#3b82f6" },
          { icon: "üîß", title: "Learn & Improve", desc: "Fix discovered issues and add monitoring for similar failures.", color: "#22c55e" }
        ],
        formula: "Resilience = Known Unknowns + Tested Failure Modes",
        strategies: [
          { title: "Start Small", desc: "Begin with gamedays in staging before running experiments in production." },
          { title: "Define Steady State", desc: "Know your normal metrics so you can detect when chaos causes degradation." },
          { title: "Have a Kill Switch", desc: "Always be able to stop the experiment immediately if impact is too severe." },
          { title: "Run in Production", desc: "Only production has real traffic patterns and scale. Test there when ready." }
        ],
        metrics: [
          { level: "Chaos Monkey", downtime: "Random instance kills", useCase: "Netflix, basic" },
          { level: "Gremlin", downtime: "Commercial platform", useCase: "Enterprise" },
          { level: "Litmus", downtime: "Kubernetes-native", useCase: "Cloud-native" },
          { level: "AWS FIS", downtime: "Managed service", useCase: "AWS workloads" }
        ]
      },
      "auto-scaling": {
        title: "Auto Scaling Policies",
        subtitle: "Automatically adjusting compute capacity based on demand to optimize cost and performance.",
        badge: { text: "Resilience", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" },
        color: "#f59e0b",
        diagram: `
          <style>
            .as-viz { display: flex; flex-direction: column; gap: 24px; }
            .as-chart { background: rgba(245, 158, 11, 0.1); border-radius: 12px; padding: 20px; }
            .as-title { font-size: 0.85rem; color: #f59e0b; margin-bottom: 12px; font-weight: 600; }
            .as-graph { display: flex; align-items: flex-end; gap: 6px; height: 100px; padding: 0 10px; }
            .as-bar { flex: 1; border-radius: 3px 3px 0 0; transition: all 0.3s; position: relative; }
            .as-bar-label { position: absolute; top: -18px; left: 50%; transform: translateX(-50%); font-size: 0.6rem; color: #a0a0b0; white-space: nowrap; }
            .as-policies { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .as-policy { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 10px; padding: 14px; width: 140px; text-align: center; }
            .as-policy-icon { font-size: 1.5rem; margin-bottom: 6px; }
            .as-policy-name { font-weight: 600; color: #f59e0b; font-size: 0.85rem; margin-bottom: 2px; }
            .as-policy-desc { font-size: 0.65rem; color: #a0a0b0; }
          </style>
          <div class="as-viz">
            <div class="as-chart">
              <div class="as-title">üìä Traffic vs Instances (Auto-scaling)</div>
              <div class="as-graph">
                <div class="as-bar" style="height:30%;background:#3b82f6"><div class="as-bar-label">2 inst</div></div>
                <div class="as-bar" style="height:35%;background:#3b82f6"></div>
                <div class="as-bar" style="height:50%;background:#3b82f6"><div class="as-bar-label">4 inst</div></div>
                <div class="as-bar" style="height:70%;background:#f59e0b"></div>
                <div class="as-bar" style="height:90%;background:#f59e0b"><div class="as-bar-label">8 inst</div></div>
                <div class="as-bar" style="height:100%;background:#ef4444"></div>
                <div class="as-bar" style="height:85%;background:#f59e0b"><div class="as-bar-label">6 inst</div></div>
                <div class="as-bar" style="height:60%;background:#3b82f6"></div>
                <div class="as-bar" style="height:40%;background:#3b82f6"><div class="as-bar-label">3 inst</div></div>
                <div class="as-bar" style="height:25%;background:#22c55e"><div class="as-bar-label">2 inst</div></div>
              </div>
            </div>
            <div class="as-policies">
              <div class="as-policy"><div class="as-policy-icon">üìà</div><div class="as-policy-name">Target Tracking</div><div class="as-policy-desc">Maintain CPU at 70%</div></div>
              <div class="as-policy"><div class="as-policy-icon">‚ö°</div><div class="as-policy-name">Step Scaling</div><div class="as-policy-desc">+2 at 80%, +4 at 90%</div></div>
              <div class="as-policy"><div class="as-policy-icon">üìÖ</div><div class="as-policy-name">Scheduled</div><div class="as-policy-desc">Scale up at 9 AM</div></div>
              <div class="as-policy"><div class="as-policy-icon">üîÆ</div><div class="as-policy-name">Predictive</div><div class="as-policy-desc">ML-based forecasting</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Auto Scaling</strong> automatically adjusts the number of compute instances based on demand. It ensures sufficient capacity during traffic spikes while reducing costs during quiet periods.</p><p>Policies can be based on metrics (CPU, memory), schedules, or predictive algorithms.</p>`,
        keyPoints: [
          { icon: "üìà", title: "Target Tracking", desc: "Maintain a metric at target value (e.g., CPU at 70%). Simplest approach.", color: "#f59e0b" },
          { icon: "‚ö°", title: "Step Scaling", desc: "Add/remove specific amounts at thresholds. More control for spiky traffic.", color: "#3b82f6" },
          { icon: "üìÖ", title: "Scheduled", desc: "Scale based on time patterns. Good for predictable load cycles.", color: "#10b981" },
          { icon: "‚è±Ô∏è", title: "Cooldown", desc: "Wait period after scaling to prevent rapid oscillation.", color: "#ef4444" }
        ],
        formula: "Desired Capacity = Current Load / Target Load √ó Current Capacity",
        strategies: [
          { title: "Choose Right Metric", desc: "CPU works for compute-bound; request count better for I/O-bound workloads." },
          { title: "Set Appropriate Cooldowns", desc: "3-5 min typical. Too short = thrashing. Too long = slow response." },
          { title: "Pre-warm for Known Spikes", desc: "Use scheduled scaling before known events (launches, sales)." },
          { title: "Consider Warm Pool", desc: "Keep pre-initialized instances ready for faster scale-out." }
        ],
        metrics: [
          { level: "Target Tracking", downtime: "Maintain target metric", useCase: "General purpose" },
          { level: "Step Scaling", downtime: "Stepped thresholds", useCase: "Gradual response" },
          { level: "Scheduled", downtime: "Time-based", useCase: "Predictable patterns" },
          { level: "Predictive", downtime: "ML forecasting", useCase: "Complex patterns" }
        ]
      },
      "auth-authz": {
        title: "Authentication vs Authorization",
        subtitle: "Verifying identity (who you are) versus checking permissions (what you can do).",
        badge: { text: "Security", color: "#ef4444", bg: "rgba(239, 68, 68, 0.15)" },
        color: "#ef4444",
        diagram: `
          <style>
            .aa-viz { display: flex; flex-direction: column; gap: 24px; }
            .aa-compare { display: flex; gap: 24px; justify-content: center; flex-wrap: wrap; }
            .aa-box { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 20px; width: 200px; }
            .aa-title { font-weight: 600; font-size: 1.1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
            .aa-q { font-size: 0.85rem; color: #a0a0b0; margin-bottom: 8px; }
            .aa-examples { font-size: 0.75rem; }
            .aa-example { padding: 6px 10px; background: rgba(30, 35, 50, 0.8); border-radius: 4px; margin-bottom: 4px; }
            .aa-authn { border: 1px solid rgba(59, 130, 246, 0.3); }
            .aa-authn .aa-title { color: #3b82f6; }
            .aa-authz { border: 1px solid rgba(34, 197, 94, 0.3); }
            .aa-authz .aa-title { color: #22c55e; }
            .aa-flow { background: rgba(239, 68, 68, 0.1); border-radius: 12px; padding: 16px; display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap; }
            .aa-step { padding: 10px 16px; border-radius: 6px; font-size: 0.85rem; font-weight: 600; }
          </style>
          <div class="aa-viz">
            <div class="aa-compare">
              <div class="aa-box aa-authn">
                <div class="aa-title">üîë Authentication</div>
                <div class="aa-q">"Who are you?"</div>
                <div class="aa-examples">
                  <div class="aa-example">Username/Password</div>
                  <div class="aa-example">OAuth/SSO</div>
                  <div class="aa-example">Biometrics</div>
                  <div class="aa-example">API Keys</div>
                </div>
              </div>
              <div class="aa-box aa-authz">
                <div class="aa-title">üõ°Ô∏è Authorization</div>
                <div class="aa-q">"What can you do?"</div>
                <div class="aa-examples">
                  <div class="aa-example">Roles (Admin, User)</div>
                  <div class="aa-example">Permissions (read, write)</div>
                  <div class="aa-example">Scopes (email, profile)</div>
                  <div class="aa-example">Policies (ABAC)</div>
                </div>
              </div>
            </div>
            <div class="aa-flow">
              <div class="aa-step" style="background:#3b82f6;color:white">Login (AuthN)</div>
              <span style="color:#ef4444">‚Üí</span>
              <div class="aa-step" style="background:#22c55e;color:white">Check Perms (AuthZ)</div>
              <span style="color:#ef4444">‚Üí</span>
              <div class="aa-step" style="background:rgba(30,35,50,0.8);color:#e5e5e5">Access Resource</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Authentication</strong> verifies identity - confirming users are who they claim to be. <strong>Authorization</strong> determines permissions - what authenticated users are allowed to do.</p><p>Both are essential for security. Authentication happens first, followed by authorization for each resource access.</p>`,
        keyPoints: [
          { icon: "üîë", title: "Authentication (AuthN)", desc: "Verifies identity via credentials, tokens, certificates, or biometrics.", color: "#3b82f6" },
          { icon: "üõ°Ô∏è", title: "Authorization (AuthZ)", desc: "Grants or denies access based on roles, permissions, or policies.", color: "#22c55e" },
          { icon: "üë§", title: "RBAC", desc: "Role-Based Access Control - assign permissions to roles, roles to users.", color: "#f59e0b" },
          { icon: "üìã", title: "ABAC", desc: "Attribute-Based Access Control - dynamic policies based on attributes.", color: "#8b5cf6" }
        ],
        formula: "Access = Authenticated ‚àß Authorized",
        strategies: [
          { title: "Separate Concerns", desc: "Use dedicated identity provider (IdP) for AuthN, service-level AuthZ." },
          { title: "Principle of Least Privilege", desc: "Grant minimum permissions needed for the task. Review regularly." },
          { title: "Centralize Policies", desc: "Use policy engines (OPA, Cedar) for consistent authorization across services." },
          { title: "Audit Everything", desc: "Log all authentication attempts and authorization decisions." }
        ],
        metrics: [
          { level: "RBAC", downtime: "Role-based", useCase: "Simple permissions" },
          { level: "ABAC", downtime: "Attribute-based", useCase: "Complex policies" },
          { level: "ReBAC", downtime: "Relationship-based", useCase: "Resource hierarchies" },
          { level: "PBAC", downtime: "Policy-based", useCase: "Fine-grained control" }
        ]
      },
      "oauth-jwt": {
        title: "OAuth / JWT",
        subtitle: "Industry-standard protocols for secure authorization delegation and token-based authentication.",
        badge: { text: "Security", color: "#ef4444", bg: "rgba(239, 68, 68, 0.15)" },
        color: "#ef4444",
        diagram: `
          <style>
            .oj-viz { display: flex; flex-direction: column; gap: 24px; }
            .oj-flow { background: rgba(239, 68, 68, 0.1); border-radius: 12px; padding: 16px; }
            .oj-title { font-size: 0.85rem; color: #ef4444; margin-bottom: 12px; font-weight: 600; }
            .oj-steps { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; justify-content: center; }
            .oj-step { background: rgba(30, 35, 50, 0.8); padding: 8px 12px; border-radius: 6px; font-size: 0.75rem; text-align: center; }
            .oj-arrow { color: #ef4444; }
            .oj-jwt { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 16px; }
            .oj-jwt-title { font-weight: 600; color: #ef4444; margin-bottom: 12px; }
            .oj-parts { display: flex; gap: 4px; font-family: monospace; font-size: 0.8rem; flex-wrap: wrap; }
            .oj-part { padding: 8px 12px; border-radius: 4px; }
          </style>
          <div class="oj-viz">
            <div class="oj-flow">
              <div class="oj-title">OAuth 2.0 Authorization Code Flow</div>
              <div class="oj-steps">
                <div class="oj-step">üë§ User</div>
                <span class="oj-arrow">‚Üí</span>
                <div class="oj-step">üì± App</div>
                <span class="oj-arrow">‚Üí</span>
                <div class="oj-step">üîê Auth Server</div>
                <span class="oj-arrow">‚Üí</span>
                <div class="oj-step">üîë Auth Code</div>
                <span class="oj-arrow">‚Üí</span>
                <div class="oj-step">üé´ Access Token</div>
                <span class="oj-arrow">‚Üí</span>
                <div class="oj-step">üì¶ API Access</div>
              </div>
            </div>
            <div class="oj-jwt">
              <div class="oj-jwt-title">JWT Token Structure</div>
              <div class="oj-parts">
                <div class="oj-part" style="background:#ef4444;color:white">Header</div>
                <span style="color:#a0a0b0">.</span>
                <div class="oj-part" style="background:#f59e0b;color:white">Payload</div>
                <span style="color:#a0a0b0">.</span>
                <div class="oj-part" style="background:#3b82f6;color:white">Signature</div>
              </div>
              <div style="font-size:0.7rem;color:#a0a0b0;margin-top:8px">eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1c2VyMTIzIn0.signature</div>
            </div>
          </div>
        `,
        definition: `<p><strong>OAuth 2.0</strong> is an authorization framework that enables third-party applications to access user resources without exposing credentials. <strong>JWT</strong> (JSON Web Token) is a compact token format often used with OAuth.</p><p>OAuth defines flows for different use cases (web apps, mobile, server-to-server), while JWT provides a stateless, verifiable token format.</p>`,
        keyPoints: [
          { icon: "üîê", title: "OAuth 2.0", desc: "Authorization framework for delegating access. Defines grant types for different scenarios.", color: "#ef4444" },
          { icon: "üé´", title: "JWT", desc: "Stateless token with header, payload, and signature. Self-contained and verifiable.", color: "#f59e0b" },
          { icon: "üîÑ", title: "Refresh Tokens", desc: "Long-lived tokens to get new access tokens without re-authentication.", color: "#3b82f6" },
          { icon: "üÜî", title: "OpenID Connect", desc: "Identity layer on OAuth 2.0. Adds ID tokens for authentication.", color: "#10b981" }
        ],
        formula: "JWT = base64(header).base64(payload).signature",
        strategies: [
          { title: "Use Authorization Code + PKCE", desc: "Most secure flow for web and mobile apps. Protects against interception." },
          { title: "Short-Lived Access Tokens", desc: "5-15 minute expiry for access tokens. Use refresh tokens for longer sessions." },
          { title: "Validate Signatures", desc: "Always verify JWT signatures. Never trust unsigned or alg=none tokens." },
          { title: "Store Tokens Securely", desc: "HttpOnly cookies for web, secure storage for mobile. Never localStorage." }
        ],
        metrics: [
          { level: "Auth Code", downtime: "Server-side apps", useCase: "Web applications" },
          { level: "Auth Code + PKCE", downtime: "Public clients", useCase: "Mobile, SPA" },
          { level: "Client Credentials", downtime: "Machine-to-machine", useCase: "Microservices" },
          { level: "Device Code", downtime: "Input-limited devices", useCase: "TV, CLI" }
        ]
      },
      "secrets-management": {
        title: "Secrets Management",
        subtitle: "Securely storing, accessing, and rotating sensitive credentials and keys.",
        badge: { text: "Security", color: "#ef4444", bg: "rgba(239, 68, 68, 0.15)" },
        color: "#ef4444",
        diagram: `
          <style>
            .sm-viz { display: flex; flex-direction: column; gap: 24px; }
            .sm-vault { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 2px solid #ef4444; border-radius: 16px; padding: 20px; text-align: center; }
            .sm-vault-icon { font-size: 3rem; margin-bottom: 8px; }
            .sm-vault-name { font-weight: 600; color: #ef4444; font-size: 1.1rem; margin-bottom: 12px; }
            .sm-secrets { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }
            .sm-secret { background: rgba(239, 68, 68, 0.2); padding: 6px 12px; border-radius: 4px; font-size: 0.75rem; font-family: monospace; color: #e5e5e5; }
            .sm-flow { display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap; }
            .sm-step { background: rgba(30, 35, 50, 0.8); border: 1px solid rgba(239, 68, 68, 0.3); padding: 10px 16px; border-radius: 8px; font-size: 0.8rem; color: #e5e5e5; }
            .sm-arrow { color: #ef4444; font-size: 1.2rem; }
          </style>
          <div class="sm-viz">
            <div class="sm-vault">
              <div class="sm-vault-icon">üîê</div>
              <div class="sm-vault-name">Secrets Vault</div>
              <div class="sm-secrets">
                <div class="sm-secret">DB_PASSWORD=***</div>
                <div class="sm-secret">API_KEY=***</div>
                <div class="sm-secret">TLS_CERT=***</div>
                <div class="sm-secret">ENCRYPTION_KEY=***</div>
              </div>
            </div>
            <div class="sm-flow">
              <div class="sm-step">üöÄ App Startup</div>
              <span class="sm-arrow">‚Üí</span>
              <div class="sm-step">üîë Authenticate</div>
              <span class="sm-arrow">‚Üí</span>
              <div class="sm-step">üì• Fetch Secrets</div>
              <span class="sm-arrow">‚Üí</span>
              <div class="sm-step">üîÑ Auto-Rotate</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Secrets Management</strong> involves securely storing, accessing, distributing, and rotating sensitive data like passwords, API keys, certificates, and encryption keys.</p><p>Proper secrets management prevents credentials from being hardcoded, exposed in logs, or stored in version control.</p>`,
        keyPoints: [
          { icon: "üîê", title: "Centralized Vault", desc: "Store secrets in a dedicated system (HashiCorp Vault, AWS Secrets Manager).", color: "#ef4444" },
          { icon: "üîÑ", title: "Automatic Rotation", desc: "Regularly rotate secrets automatically to limit exposure window.", color: "#f59e0b" },
          { icon: "üìã", title: "Audit Logging", desc: "Log all secret access for compliance and incident investigation.", color: "#3b82f6" },
          { icon: "üé≠", title: "Dynamic Secrets", desc: "Generate short-lived credentials on-demand rather than static secrets.", color: "#10b981" }
        ],
        formula: "Secret Exposure Risk = Access Points √ó Time Valid √ó Value",
        strategies: [
          { title: "Never Hardcode", desc: "No secrets in code, configs, or version control. Use environment or vault." },
          { title: "Principle of Least Privilege", desc: "Apps only access secrets they need. Fine-grained access policies." },
          { title: "Short-Lived Secrets", desc: "Dynamic credentials that expire quickly reduce blast radius of compromise." },
          { title: "Encrypt at Rest", desc: "Vault should encrypt secrets with HSM-backed or cloud KMS keys." }
        ],
        metrics: [
          { level: "HashiCorp Vault", downtime: "Self-hosted, full-featured", useCase: "Enterprise" },
          { level: "AWS Secrets Manager", downtime: "Managed, AWS integrated", useCase: "AWS workloads" },
          { level: "Azure Key Vault", downtime: "Azure native", useCase: "Azure workloads" },
          { level: "GCP Secret Manager", downtime: "GCP native", useCase: "GCP workloads" }
        ]
      },
      "encryption": {
        title: "Encryption at Rest & in Transit",
        subtitle: "Protecting data through encryption when stored and when transmitted.",
        badge: { text: "Security", color: "#ef4444", bg: "rgba(239, 68, 68, 0.15)" },
        color: "#ef4444",
        diagram: `
          <style>
            .enc-viz { display: flex; flex-direction: column; gap: 24px; }
            .enc-types { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
            .enc-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 20px; width: 200px; text-align: center; }
            .enc-type-icon { font-size: 2.5rem; margin-bottom: 8px; }
            .enc-type-name { font-weight: 600; font-size: 1rem; margin-bottom: 8px; }
            .enc-type-desc { font-size: 0.75rem; color: #a0a0b0; margin-bottom: 12px; }
            .enc-examples { font-size: 0.7rem; color: #e5e5e5; text-align: left; }
            .enc-rest { border: 1px solid rgba(139, 92, 246, 0.3); }
            .enc-rest .enc-type-name { color: #8b5cf6; }
            .enc-transit { border: 1px solid rgba(16, 185, 129, 0.3); }
            .enc-transit .enc-type-name { color: #10b981; }
            .enc-flow { background: rgba(239, 68, 68, 0.1); border-radius: 12px; padding: 16px; display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap; }
            .enc-item { padding: 10px 16px; border-radius: 6px; font-size: 0.8rem; }
          </style>
          <div class="enc-viz">
            <div class="enc-types">
              <div class="enc-type enc-rest">
                <div class="enc-type-icon">üíæ</div>
                <div class="enc-type-name">At Rest</div>
                <div class="enc-type-desc">Data stored on disk or in databases</div>
                <div class="enc-examples">‚Ä¢ AES-256 encryption<br>‚Ä¢ Database TDE<br>‚Ä¢ Encrypted volumes<br>‚Ä¢ KMS key management</div>
              </div>
              <div class="enc-type enc-transit">
                <div class="enc-type-icon">üîÑ</div>
                <div class="enc-type-name">In Transit</div>
                <div class="enc-type-desc">Data moving over networks</div>
                <div class="enc-examples">‚Ä¢ TLS 1.3<br>‚Ä¢ mTLS (mutual)<br>‚Ä¢ HTTPS everywhere<br>‚Ä¢ Encrypted queues</div>
              </div>
            </div>
            <div class="enc-flow">
              <div class="enc-item" style="background:#3b82f6;color:white">üì± Client</div>
              <div class="enc-item" style="background:#10b981;color:white">üîí TLS</div>
              <div class="enc-item" style="background:#3b82f6;color:white">üñ•Ô∏è Server</div>
              <div class="enc-item" style="background:#8b5cf6;color:white">üîê AES</div>
              <div class="enc-item" style="background:#3b82f6;color:white">üíæ Database</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Encryption at Rest</strong> protects stored data (databases, files, backups) from unauthorized access. <strong>Encryption in Transit</strong> protects data as it moves across networks.</p><p>Both are essential for defense in depth, protecting against different attack vectors.</p>`,
        keyPoints: [
          { icon: "üíæ", title: "At Rest", desc: "AES-256 encryption for stored data. Managed by KMS or HSM.", color: "#8b5cf6" },
          { icon: "üîÑ", title: "In Transit", desc: "TLS 1.3 for all network communication. Minimum TLS 1.2.", color: "#10b981" },
          { icon: "üîë", title: "Key Management", desc: "Secure key storage, rotation, and access control via KMS.", color: "#f59e0b" },
          { icon: "üîí", title: "mTLS", desc: "Mutual TLS - both client and server authenticate with certificates.", color: "#ef4444" }
        ],
        formula: "Data Protection = Encryption at Rest + Encryption in Transit + Key Management",
        strategies: [
          { title: "Encrypt Everything", desc: "Default to encryption for all data. Treat plaintext as a security exception." },
          { title: "Use Managed KMS", desc: "Cloud KMS (AWS, GCP, Azure) for key management, rotation, and audit." },
          { title: "TLS Everywhere", desc: "All internal and external communication encrypted. No exceptions." },
          { title: "Certificate Management", desc: "Automate certificate issuance and renewal (Let's Encrypt, ACM)." }
        ],
        metrics: [
          { level: "TLS 1.3", downtime: "Latest, fastest", useCase: "All new systems" },
          { level: "TLS 1.2", downtime: "Widely supported", useCase: "Legacy compatibility" },
          { level: "AES-256", downtime: "Standard encryption", useCase: "Data at rest" },
          { level: "mTLS", downtime: "Mutual authentication", useCase: "Service-to-service" }
        ]
      },
      "secure-apis": {
        title: "Secure APIs (OWASP Top 10)",
        subtitle: "Protecting APIs against common security vulnerabilities and attack vectors.",
        badge: { text: "Security", color: "#ef4444", bg: "rgba(239, 68, 68, 0.15)" },
        color: "#ef4444",
        diagram: `
          <style>
            .sa-viz { display: flex; flex-direction: column; gap: 20px; }
            .sa-threats { display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 10px; }
            .sa-threat { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 8px; padding: 12px; text-align: center; }
            .sa-threat-icon { font-size: 1.3rem; margin-bottom: 4px; }
            .sa-threat-name { font-size: 0.7rem; color: #ef4444; font-weight: 600; }
            .sa-defenses { background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 12px; padding: 16px; }
            .sa-defense-title { font-weight: 600; color: #22c55e; margin-bottom: 12px; }
            .sa-defense-list { display: flex; gap: 8px; flex-wrap: wrap; }
            .sa-defense { background: rgba(34, 197, 94, 0.2); padding: 6px 12px; border-radius: 4px; font-size: 0.75rem; color: #22c55e; }
          </style>
          <div class="sa-viz">
            <div class="sa-threats">
              <div class="sa-threat"><div class="sa-threat-icon">üîì</div><div class="sa-threat-name">Broken Auth</div></div>
              <div class="sa-threat"><div class="sa-threat-icon">üé≠</div><div class="sa-threat-name">Broken AuthZ</div></div>
              <div class="sa-threat"><div class="sa-threat-icon">üíâ</div><div class="sa-threat-name">Injection</div></div>
              <div class="sa-threat"><div class="sa-threat-icon">üì§</div><div class="sa-threat-name">Data Exposure</div></div>
              <div class="sa-threat"><div class="sa-threat-icon">‚ö°</div><div class="sa-threat-name">Rate Limit</div></div>
              <div class="sa-threat"><div class="sa-threat-icon">üìä</div><div class="sa-threat-name">Mass Assignment</div></div>
              <div class="sa-threat"><div class="sa-threat-icon">‚öôÔ∏è</div><div class="sa-threat-name">Misconfig</div></div>
              <div class="sa-threat"><div class="sa-threat-icon">üì¶</div><div class="sa-threat-name">Asset Mgmt</div></div>
            </div>
            <div class="sa-defenses">
              <div class="sa-defense-title">‚úÖ Defense Strategies</div>
              <div class="sa-defense-list">
                <div class="sa-defense">Input Validation</div>
                <div class="sa-defense">Parameterized Queries</div>
                <div class="sa-defense">Rate Limiting</div>
                <div class="sa-defense">AuthN/AuthZ</div>
                <div class="sa-defense">HTTPS Only</div>
                <div class="sa-defense">Error Handling</div>
                <div class="sa-defense">API Gateway</div>
                <div class="sa-defense">Logging</div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>OWASP API Security Top 10</strong> identifies the most critical security risks for APIs. These vulnerabilities are commonly exploited and require specific mitigations.</p><p>Secure API design requires defense in depth - multiple layers of protection against various attack vectors.</p>`,
        keyPoints: [
          { icon: "üîì", title: "Broken Authentication", desc: "Weak tokens, missing MFA, poor session management.", color: "#ef4444" },
          { icon: "üé≠", title: "Broken Authorization", desc: "IDOR, privilege escalation, missing object-level checks.", color: "#f59e0b" },
          { icon: "üíâ", title: "Injection", desc: "SQL, NoSQL, Command injection through unsanitized input.", color: "#8b5cf6" },
          { icon: "üì§", title: "Data Exposure", desc: "Returning too much data, missing field-level filtering.", color: "#3b82f6" }
        ],
        formula: "API Security = Input Validation + AuthN + AuthZ + Rate Limiting + Monitoring",
        strategies: [
          { title: "Validate All Input", desc: "Whitelist validation, type checking, length limits on all inputs." },
          { title: "Object-Level Authorization", desc: "Check permissions for every object access, not just endpoints." },
          { title: "Rate Limit Everything", desc: "Protect against brute force, enumeration, and DoS attacks." },
          { title: "Minimal Data Exposure", desc: "Return only required fields. Different views for different roles." }
        ],
        metrics: [
          { level: "BOLA", downtime: "#1 API Risk", useCase: "Object authorization" },
          { level: "Broken Auth", downtime: "#2 API Risk", useCase: "Token/session security" },
          { level: "Injection", downtime: "#3 API Risk", useCase: "Input validation" },
          { level: "Excessive Data", downtime: "#4 API Risk", useCase: "Response filtering" }
        ]
      },
      "rate-vs-throttle": {
        title: "Rate Limiting vs Throttling",
        subtitle: "Controlling request rates to protect services from overload and abuse.",
        badge: { text: "Security", color: "#ef4444", bg: "rgba(239, 68, 68, 0.15)" },
        color: "#ef4444",
        diagram: `
          <style>
            .rt-viz { display: flex; flex-direction: column; gap: 24px; }
            .rt-compare { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
            .rt-box { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 20px; width: 200px; text-align: center; }
            .rt-box-icon { font-size: 2rem; margin-bottom: 8px; }
            .rt-box-name { font-weight: 600; font-size: 1rem; margin-bottom: 8px; }
            .rt-box-desc { font-size: 0.75rem; color: #a0a0b0; margin-bottom: 12px; }
            .rt-box-action { font-size: 0.8rem; font-weight: 600; padding: 6px 12px; border-radius: 4px; }
            .rt-limit { border: 1px solid rgba(239, 68, 68, 0.3); }
            .rt-limit .rt-box-name { color: #ef4444; }
            .rt-throttle { border: 1px solid rgba(245, 158, 11, 0.3); }
            .rt-throttle .rt-box-name { color: #f59e0b; }
            .rt-algos { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .rt-algo { background: rgba(30, 35, 50, 0.8); border: 1px solid rgba(239, 68, 68, 0.2); border-radius: 8px; padding: 10px 14px; text-align: center; width: 120px; }
            .rt-algo-name { font-weight: 600; color: #ef4444; font-size: 0.85rem; margin-bottom: 4px; }
            .rt-algo-desc { font-size: 0.65rem; color: #a0a0b0; }
          </style>
          <div class="rt-viz">
            <div class="rt-compare">
              <div class="rt-box rt-limit">
                <div class="rt-box-icon">üö´</div>
                <div class="rt-box-name">Rate Limiting</div>
                <div class="rt-box-desc">Hard cap on requests per time window</div>
                <div class="rt-box-action" style="background:rgba(239,68,68,0.2);color:#ef4444">429 Reject</div>
              </div>
              <div class="rt-box rt-throttle">
                <div class="rt-box-icon">‚è≥</div>
                <div class="rt-box-name">Throttling</div>
                <div class="rt-box-desc">Slow down requests, queue or delay</div>
                <div class="rt-box-action" style="background:rgba(245,158,11,0.2);color:#f59e0b">Delay/Queue</div>
              </div>
            </div>
            <div class="rt-algos">
              <div class="rt-algo"><div class="rt-algo-name">Token Bucket</div><div class="rt-algo-desc">Smooth bursts</div></div>
              <div class="rt-algo"><div class="rt-algo-name">Leaky Bucket</div><div class="rt-algo-desc">Fixed rate</div></div>
              <div class="rt-algo"><div class="rt-algo-name">Fixed Window</div><div class="rt-algo-desc">Simple counting</div></div>
              <div class="rt-algo"><div class="rt-algo-name">Sliding Window</div><div class="rt-algo-desc">Smoother limits</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Rate Limiting</strong> enforces a hard cap on requests - excess requests are rejected (HTTP 429). <strong>Throttling</strong> slows down or queues excess requests rather than rejecting them.</p><p>Both protect services from overload, abuse, and ensure fair usage among clients.</p>`,
        keyPoints: [
          { icon: "üö´", title: "Rate Limiting", desc: "Rejects requests over limit with 429 Too Many Requests.", color: "#ef4444" },
          { icon: "‚è≥", title: "Throttling", desc: "Delays or queues requests to smooth out traffic spikes.", color: "#f59e0b" },
          { icon: "ü™£", title: "Token Bucket", desc: "Allows bursts up to bucket size, refills at steady rate.", color: "#3b82f6" },
          { icon: "üìä", title: "Sliding Window", desc: "Smoother than fixed windows, counts across boundary.", color: "#10b981" }
        ],
        formula: "Requests Allowed = min(tokens_available, requests_made)",
        strategies: [
          { title: "Layer Limits", desc: "Apply at API gateway, service, and user levels for defense in depth." },
          { title: "Return Retry-After", desc: "Include Retry-After header so clients know when to retry." },
          { title: "Different Limits by Tier", desc: "Premium users get higher limits. Free tier more restrictive." },
          { title: "Monitor and Alert", desc: "Track rate limit hits to identify abuse or capacity needs." }
        ],
        metrics: [
          { level: "Token Bucket", downtime: "Allows bursts", useCase: "General purpose" },
          { level: "Leaky Bucket", downtime: "Constant rate", useCase: "Smooth traffic" },
          { level: "Fixed Window", downtime: "Simple to implement", useCase: "Basic limiting" },
          { level: "Sliding Window", downtime: "Accurate counting", useCase: "Precise control" }
        ]
      },
      "zero-trust": {
        title: "Zero Trust Architecture",
        subtitle: "Never trust, always verify - securing systems by assuming breach.",
        badge: { text: "Security", color: "#ef4444", bg: "rgba(239, 68, 68, 0.15)" },
        color: "#ef4444",
        diagram: `
          <style>
            .zt-viz { display: flex; flex-direction: column; gap: 24px; }
            .zt-compare { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
            .zt-model { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 180px; text-align: center; }
            .zt-model-title { font-weight: 600; font-size: 0.9rem; margin-bottom: 8px; }
            .zt-model-desc { font-size: 0.7rem; color: #a0a0b0; }
            .zt-old { border: 1px solid rgba(239, 68, 68, 0.3); }
            .zt-old .zt-model-title { color: #ef4444; }
            .zt-new { border: 1px solid rgba(34, 197, 94, 0.3); }
            .zt-new .zt-model-title { color: #22c55e; }
            .zt-principles { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; }
            .zt-principle { background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2); border-radius: 8px; padding: 12px; text-align: center; }
            .zt-principle-icon { font-size: 1.5rem; margin-bottom: 4px; }
            .zt-principle-name { font-size: 0.8rem; color: #ef4444; font-weight: 600; }
          </style>
          <div class="zt-viz">
            <div class="zt-compare">
              <div class="zt-model zt-old">
                <div class="zt-model-title">‚ùå Perimeter Security</div>
                <div class="zt-model-desc">Trust inside, protect outside. Castle-and-moat model.</div>
              </div>
              <div class="zt-model zt-new">
                <div class="zt-model-title">‚úì Zero Trust</div>
                <div class="zt-model-desc">Never trust, always verify. Assume breach.</div>
              </div>
            </div>
            <div class="zt-principles">
              <div class="zt-principle"><div class="zt-principle-icon">üîê</div><div class="zt-principle-name">Verify Explicitly</div></div>
              <div class="zt-principle"><div class="zt-principle-icon">üîí</div><div class="zt-principle-name">Least Privilege</div></div>
              <div class="zt-principle"><div class="zt-principle-icon">üéØ</div><div class="zt-principle-name">Assume Breach</div></div>
              <div class="zt-principle"><div class="zt-principle-icon">üîç</div><div class="zt-principle-name">Continuous Validation</div></div>
              <div class="zt-principle"><div class="zt-principle-icon">üìä</div><div class="zt-principle-name">Micro-Segmentation</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Zero Trust</strong> is a security model that requires strict identity verification for every user and device attempting to access resources, regardless of their location inside or outside the network.</p><p>It replaces the "castle-and-moat" approach with continuous verification and least-privilege access.</p>`,
        keyPoints: [
          { icon: "üîê", title: "Verify Explicitly", desc: "Always authenticate and authorize based on all available data points.", color: "#ef4444" },
          { icon: "üîí", title: "Least Privilege", desc: "Grant minimum access needed, just-in-time, with just-enough-access.", color: "#f59e0b" },
          { icon: "üéØ", title: "Assume Breach", desc: "Design systems assuming attackers are already inside the network.", color: "#8b5cf6" },
          { icon: "üìä", title: "Micro-Segmentation", desc: "Divide network into small zones with separate access for each.", color: "#3b82f6" }
        ],
        formula: "Trust Level = Identity √ó Device Health √ó Context √ó Continuous Verification",
        strategies: [
          { title: "Strong Identity", desc: "MFA for all users, device certificates, continuous authentication." },
          { title: "Micro-Segmentation", desc: "Network segments with firewall rules between every service." },
          { title: "Encrypt Everything", desc: "mTLS for all service-to-service communication, even internal." },
          { title: "Continuous Monitoring", desc: "Real-time threat detection, anomaly detection, SIEM integration." }
        ],
        metrics: [
          { level: "Identity", downtime: "Who is requesting", useCase: "Users, services, devices" },
          { level: "Device", downtime: "Health and compliance", useCase: "Endpoint security" },
          { level: "Network", downtime: "Micro-segmentation", useCase: "East-west traffic" },
          { level: "Application", downtime: "Access policies", useCase: "Resource protection" }
        ]
      },
      "metrics": {
        title: "Metrics",
        subtitle: "Numerical measurements of system behavior collected and aggregated over time.",
        badge: { text: "Observability", color: "#06b6d4", bg: "rgba(6, 182, 212, 0.15)" },
        color: "#06b6d4",
        diagram: `
          <style>
            .met-viz { display: flex; flex-direction: column; gap: 24px; }
            .met-types { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .met-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(6, 182, 212, 0.3); border-radius: 12px; padding: 16px; width: 140px; text-align: center; }
            .met-type-icon { font-size: 2rem; margin-bottom: 8px; }
            .met-type-name { font-weight: 600; color: #06b6d4; font-size: 0.9rem; margin-bottom: 4px; }
            .met-type-desc { font-size: 0.7rem; color: #a0a0b0; }
            .met-red { background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.3); border-radius: 12px; padding: 16px; text-align: center; }
            .met-red-title { font-weight: 600; color: #06b6d4; margin-bottom: 12px; }
            .met-red-items { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
            .met-red-item { background: rgba(30, 35, 50, 0.8); padding: 10px 16px; border-radius: 8px; }
            .met-red-name { font-weight: 600; font-size: 1rem; color: #e5e5e5; }
            .met-red-desc { font-size: 0.7rem; color: #a0a0b0; }
          </style>
          <div class="met-viz">
            <div class="met-types">
              <div class="met-type"><div class="met-type-icon">üî¢</div><div class="met-type-name">Counter</div><div class="met-type-desc">Cumulative, only increases</div></div>
              <div class="met-type"><div class="met-type-icon">üìä</div><div class="met-type-name">Gauge</div><div class="met-type-desc">Point-in-time value</div></div>
              <div class="met-type"><div class="met-type-icon">üìà</div><div class="met-type-name">Histogram</div><div class="met-type-desc">Distribution of values</div></div>
              <div class="met-type"><div class="met-type-icon">üìâ</div><div class="met-type-name">Summary</div><div class="met-type-desc">Quantiles (p50, p99)</div></div>
            </div>
            <div class="met-red">
              <div class="met-red-title">RED Method (Request-focused)</div>
              <div class="met-red-items">
                <div class="met-red-item"><div class="met-red-name" style="color:#ef4444">R</div><div class="met-red-desc">Rate (req/s)</div></div>
                <div class="met-red-item"><div class="met-red-name" style="color:#f59e0b">E</div><div class="met-red-desc">Errors (%)</div></div>
                <div class="met-red-item"><div class="met-red-name" style="color:#22c55e">D</div><div class="met-red-desc">Duration (ms)</div></div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Metrics</strong> are numerical measurements collected at regular intervals that describe the behavior and health of systems. They're aggregated and analyzed to detect trends, anomalies, and performance issues.</p><p>Unlike logs (events) or traces (request flows), metrics are optimized for aggregation and long-term storage.</p>`,
        keyPoints: [
          { icon: "üî¢", title: "Counter", desc: "Cumulative value that only increases. Total requests, errors, bytes sent.", color: "#06b6d4" },
          { icon: "üìä", title: "Gauge", desc: "Point-in-time value that can go up or down. CPU usage, memory, queue size.", color: "#3b82f6" },
          { icon: "üìà", title: "Histogram", desc: "Distribution of values in buckets. Request latency distribution.", color: "#10b981" },
          { icon: "üè∑Ô∏è", title: "Labels/Tags", desc: "Dimensions for filtering and grouping. service, endpoint, status_code.", color: "#f59e0b" }
        ],
        formula: "Metrics = {name, labels, value, timestamp}",
        strategies: [
          { title: "Use RED for Services", desc: "Rate, Errors, Duration - core metrics for any request-driven service." },
          { title: "Use USE for Resources", desc: "Utilization, Saturation, Errors - for infrastructure components." },
          { title: "Consistent Naming", desc: "Follow naming conventions (service_subsystem_name_unit) for discoverability." },
          { title: "Cardinality Control", desc: "Limit label values to prevent metric explosion and storage issues." }
        ],
        metrics: [
          { level: "Prometheus", downtime: "Pull-based, TSDB", useCase: "Kubernetes native" },
          { level: "Datadog", downtime: "SaaS, full-featured", useCase: "Enterprise" },
          { level: "CloudWatch", downtime: "AWS native", useCase: "AWS workloads" },
          { level: "InfluxDB", downtime: "Time-series DB", useCase: "Custom solutions" }
        ]
      },
      "distributed-tracing": {
        title: "Distributed Tracing",
        subtitle: "Tracking requests as they flow through multiple services in a distributed system.",
        badge: { text: "Observability", color: "#06b6d4", bg: "rgba(6, 182, 212, 0.15)" },
        color: "#06b6d4",
        diagram: `
          <style>
            .dt-viz { display: flex; flex-direction: column; gap: 24px; }
            .dt-trace { background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.3); border-radius: 12px; padding: 16px; }
            .dt-trace-title { font-size: 0.8rem; color: #06b6d4; margin-bottom: 12px; font-weight: 600; }
            .dt-spans { display: flex; flex-direction: column; gap: 6px; }
            .dt-span { display: flex; align-items: center; gap: 8px; }
            .dt-span-bar { height: 24px; border-radius: 4px; display: flex; align-items: center; padding-left: 8px; font-size: 0.75rem; color: white; font-weight: 500; }
            .dt-span-time { font-size: 0.7rem; color: #a0a0b0; width: 50px; text-align: right; }
            .dt-ids { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
            .dt-id { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(6, 182, 212, 0.3); border-radius: 8px; padding: 12px 16px; text-align: center; }
            .dt-id-name { font-weight: 600; color: #06b6d4; font-size: 0.9rem; }
            .dt-id-desc { font-size: 0.7rem; color: #a0a0b0; }
          </style>
          <div class="dt-viz">
            <div class="dt-trace">
              <div class="dt-trace-title">üîç Trace: order-123-abc</div>
              <div class="dt-spans">
                <div class="dt-span"><div class="dt-span-time">0ms</div><div class="dt-span-bar" style="background:#3b82f6;width:100%">API Gateway</div></div>
                <div class="dt-span"><div class="dt-span-time">10ms</div><div class="dt-span-bar" style="background:#10b981;width:85%;margin-left:15%">Order Service</div></div>
                <div class="dt-span"><div class="dt-span-time">25ms</div><div class="dt-span-bar" style="background:#f59e0b;width:40%;margin-left:20%">Inventory DB</div></div>
                <div class="dt-span"><div class="dt-span-time">50ms</div><div class="dt-span-bar" style="background:#8b5cf6;width:50%;margin-left:30%">Payment Service</div></div>
                <div class="dt-span"><div class="dt-span-time">120ms</div><div class="dt-span-bar" style="background:#ef4444;width:20%;margin-left:35%">Stripe API</div></div>
              </div>
            </div>
            <div class="dt-ids">
              <div class="dt-id"><div class="dt-id-name">Trace ID</div><div class="dt-id-desc">Unique per request flow</div></div>
              <div class="dt-id"><div class="dt-id-name">Span ID</div><div class="dt-id-desc">Unique per operation</div></div>
              <div class="dt-id"><div class="dt-id-name">Parent Span</div><div class="dt-id-desc">Links child to parent</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Distributed Tracing</strong> follows a request as it travels through multiple services, databases, and queues. Each operation creates a "span" with timing and context, linked together by trace IDs.</p><p>It's essential for debugging latency issues, understanding dependencies, and finding bottlenecks in microservices.</p>`,
        keyPoints: [
          { icon: "üîó", title: "Trace ID", desc: "Unique identifier propagated through all services in a request flow.", color: "#06b6d4" },
          { icon: "üìä", title: "Span", desc: "Single operation with start time, duration, and metadata.", color: "#3b82f6" },
          { icon: "üå≥", title: "Span Tree", desc: "Parent-child relationships show the call hierarchy.", color: "#10b981" },
          { icon: "üìã", title: "Context Propagation", desc: "Passing trace context through headers, message attributes.", color: "#f59e0b" }
        ],
        formula: "Trace = {trace_id, spans: [{span_id, parent_id, service, operation, duration}]}",
        strategies: [
          { title: "Use OpenTelemetry", desc: "Vendor-neutral standard for instrumentation and context propagation." },
          { title: "Sample Appropriately", desc: "Head-based or tail-based sampling to balance cost and visibility." },
          { title: "Add Business Context", desc: "Include user_id, order_id in spans for business correlation." },
          { title: "Trace Across Boundaries", desc: "Propagate context through HTTP headers, message queues, async jobs." }
        ],
        metrics: [
          { level: "Jaeger", downtime: "Open source, CNCF", useCase: "Kubernetes native" },
          { level: "Zipkin", downtime: "Open source, mature", useCase: "General purpose" },
          { level: "Datadog APM", downtime: "SaaS, integrated", useCase: "Enterprise" },
          { level: "AWS X-Ray", downtime: "AWS native", useCase: "AWS workloads" }
        ]
      },
      "structured-logging": {
        title: "Structured Logging",
        subtitle: "Machine-parseable log format using key-value pairs or JSON for better analysis.",
        badge: { text: "Observability", color: "#06b6d4", bg: "rgba(6, 182, 212, 0.15)" },
        color: "#06b6d4",
        diagram: `
          <style>
            .sl-viz { display: flex; flex-direction: column; gap: 20px; }
            .sl-compare { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .sl-box { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 280px; }
            .sl-box-title { font-weight: 600; font-size: 0.9rem; margin-bottom: 12px; display: flex; align-items: center; gap: 6px; }
            .sl-code { background: rgba(0,0,0,0.3); padding: 10px; border-radius: 6px; font-family: monospace; font-size: 0.7rem; overflow-x: auto; white-space: pre; }
            .sl-bad { border: 1px solid rgba(239, 68, 68, 0.3); }
            .sl-bad .sl-box-title { color: #ef4444; }
            .sl-good { border: 1px solid rgba(34, 197, 94, 0.3); }
            .sl-good .sl-box-title { color: #22c55e; }
            .sl-levels { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }
            .sl-level { padding: 8px 14px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; }
          </style>
          <div class="sl-viz">
            <div class="sl-compare">
              <div class="sl-box sl-bad">
                <div class="sl-box-title">‚ùå Unstructured</div>
                <div class="sl-code">2024-01-15 10:23:45 ERROR
Failed to process order 12345
for user john@example.com</div>
              </div>
              <div class="sl-box sl-good">
                <div class="sl-box-title">‚úì Structured (JSON)</div>
                <div class="sl-code">{
  "ts": "2024-01-15T10:23:45Z",
  "level": "error",
  "msg": "Failed to process order",
  "order_id": "12345",
  "user": "john@example.com"
}</div>
              </div>
            </div>
            <div class="sl-levels">
              <div class="sl-level" style="background:#ef4444;color:white">FATAL</div>
              <div class="sl-level" style="background:#f59e0b;color:white">ERROR</div>
              <div class="sl-level" style="background:#eab308;color:white">WARN</div>
              <div class="sl-level" style="background:#3b82f6;color:white">INFO</div>
              <div class="sl-level" style="background:#6b7280;color:white">DEBUG</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Structured Logging</strong> uses machine-readable formats (JSON, key-value) instead of free-form text. This enables powerful filtering, aggregation, and analysis in log management systems.</p><p>Consistent structure across services allows correlation and searching across distributed systems.</p>`,
        keyPoints: [
          { icon: "üìã", title: "JSON Format", desc: "Key-value pairs that tools can parse, index, and query efficiently.", color: "#06b6d4" },
          { icon: "üè∑Ô∏è", title: "Consistent Fields", desc: "Standard fields (timestamp, level, service, trace_id) across all services.", color: "#3b82f6" },
          { icon: "üîç", title: "Searchability", desc: "Query logs by any field: user_id, order_id, error_type, etc.", color: "#10b981" },
          { icon: "üîó", title: "Correlation", desc: "Include trace_id to link logs to distributed traces.", color: "#f59e0b" }
        ],
        formula: "Log Entry = {timestamp, level, message, context_fields, trace_id}",
        strategies: [
          { title: "Standardize Schema", desc: "Define required fields across all services for consistent querying." },
          { title: "Include Trace Context", desc: "Add trace_id and span_id to correlate logs with traces." },
          { title: "Avoid Sensitive Data", desc: "Mask or omit PII, passwords, tokens from logs." },
          { title: "Right-Size Verbosity", desc: "DEBUG in dev, INFO in prod. Enable DEBUG per-service when needed." }
        ],
        metrics: [
          { level: "ELK Stack", downtime: "Elasticsearch, Logstash, Kibana", useCase: "Self-hosted" },
          { level: "Splunk", downtime: "Enterprise, powerful", useCase: "Large orgs" },
          { level: "Datadog Logs", downtime: "SaaS, integrated", useCase: "Full observability" },
          { level: "CloudWatch Logs", downtime: "AWS native", useCase: "AWS workloads" }
        ]
      },
      "alerting-slos": {
        title: "Alerting & SLOs",
        subtitle: "Defining service level objectives and alerting when they're at risk.",
        badge: { text: "Observability", color: "#06b6d4", bg: "rgba(6, 182, 212, 0.15)" },
        color: "#06b6d4",
        diagram: `
          <style>
            .as-viz { display: flex; flex-direction: column; gap: 24px; }
            .as-slo { background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.3); border-radius: 12px; padding: 20px; text-align: center; }
            .as-slo-title { font-weight: 600; color: #06b6d4; margin-bottom: 16px; }
            .as-slo-value { font-size: 3rem; font-weight: 700; color: #22c55e; margin-bottom: 8px; }
            .as-slo-target { font-size: 0.9rem; color: #a0a0b0; }
            .as-bar { height: 20px; background: rgba(30, 35, 50, 0.8); border-radius: 10px; margin-top: 16px; overflow: hidden; }
            .as-bar-fill { height: 100%; background: linear-gradient(90deg, #22c55e 95%, #f59e0b 98%, #ef4444); border-radius: 10px; }
            .as-alerts { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .as-alert { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 8px; padding: 12px 16px; text-align: center; width: 130px; }
            .as-alert-icon { font-size: 1.5rem; margin-bottom: 4px; }
            .as-alert-name { font-weight: 600; font-size: 0.85rem; }
            .as-p1 { border: 1px solid #ef4444; color: #ef4444; }
            .as-p2 { border: 1px solid #f59e0b; color: #f59e0b; }
            .as-p3 { border: 1px solid #3b82f6; color: #3b82f6; }
          </style>
          <div class="as-viz">
            <div class="as-slo">
              <div class="as-slo-title">API Availability SLO</div>
              <div class="as-slo-value">99.72%</div>
              <div class="as-slo-target">Target: 99.9% (budget: 43.2 min/month remaining)</div>
              <div class="as-bar"><div class="as-bar-fill" style="width:97%"></div></div>
            </div>
            <div class="as-alerts">
              <div class="as-alert as-p1"><div class="as-alert-icon">üö®</div><div class="as-alert-name">P1 - Critical</div></div>
              <div class="as-alert as-p2"><div class="as-alert-icon">‚ö†Ô∏è</div><div class="as-alert-name">P2 - Warning</div></div>
              <div class="as-alert as-p3"><div class="as-alert-icon">‚ÑπÔ∏è</div><div class="as-alert-name">P3 - Info</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>SLOs</strong> (Service Level Objectives) define target reliability levels for a service. <strong>Alerting</strong> notifies teams when SLOs are at risk or breached.</p><p>Good alerting is actionable, avoids noise, and focuses on user impact rather than system metrics.</p>`,
        keyPoints: [
          { icon: "üéØ", title: "SLO", desc: "Target level of service reliability (99.9% availability, p99 < 200ms).", color: "#06b6d4" },
          { icon: "üìä", title: "SLI", desc: "Metrics that measure SLO compliance (success rate, latency percentile).", color: "#3b82f6" },
          { icon: "üí∞", title: "Error Budget", desc: "Allowable downtime/errors. 99.9% = 43.8 min/month budget.", color: "#22c55e" },
          { icon: "üö®", title: "Burn Rate Alert", desc: "Alert when error budget is being consumed too quickly.", color: "#ef4444" }
        ],
        formula: "Error Budget = 1 - SLO = 100% - 99.9% = 0.1%",
        strategies: [
          { title: "Alert on Symptoms", desc: "Alert on user-facing impact (errors, latency), not causes (CPU, memory)." },
          { title: "Use Burn Rates", desc: "Alert when error budget consumption rate threatens the monthly target." },
          { title: "Reduce Noise", desc: "Every alert should require action. Remove or tune noisy alerts." },
          { title: "Define Severity", desc: "P1 pages immediately, P2 within hours, P3 during business hours." }
        ],
        metrics: [
          { level: "Burn Rate 14.4x", downtime: "Budget gone in 2 hours", useCase: "Page immediately" },
          { level: "Burn Rate 6x", downtime: "Budget gone in 5 hours", useCase: "High urgency" },
          { level: "Burn Rate 1x", downtime: "On track to exhaust", useCase: "Ticket, investigate" },
          { level: "Burn Rate 0.5x", downtime: "Under budget", useCase: "Healthy" }
        ]
      },
      "slis-error-budgets": {
        title: "SLIs & Error Budgets",
        subtitle: "Measuring service reliability and defining acceptable failure thresholds.",
        badge: { text: "Observability", color: "#06b6d4", bg: "rgba(6, 182, 212, 0.15)" },
        color: "#06b6d4",
        diagram: `
          <style>
            .seb-viz { display: flex; flex-direction: column; gap: 24px; }
            .seb-slis { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .seb-sli { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(6, 182, 212, 0.3); border-radius: 12px; padding: 16px; width: 160px; text-align: center; }
            .seb-sli-icon { font-size: 1.5rem; margin-bottom: 8px; }
            .seb-sli-name { font-weight: 600; color: #06b6d4; font-size: 0.9rem; margin-bottom: 4px; }
            .seb-sli-example { font-size: 0.7rem; color: #a0a0b0; }
            .seb-budget { background: rgba(6, 182, 212, 0.1); border-radius: 12px; padding: 16px; }
            .seb-budget-title { font-weight: 600; color: #06b6d4; margin-bottom: 12px; text-align: center; }
            .seb-budget-calc { display: flex; align-items: center; justify-content: center; gap: 16px; flex-wrap: wrap; }
            .seb-budget-item { text-align: center; }
            .seb-budget-value { font-size: 1.5rem; font-weight: 700; color: #e5e5e5; }
            .seb-budget-label { font-size: 0.7rem; color: #a0a0b0; }
          </style>
          <div class="seb-viz">
            <div class="seb-slis">
              <div class="seb-sli"><div class="seb-sli-icon">‚úÖ</div><div class="seb-sli-name">Availability</div><div class="seb-sli-example">% of successful requests</div></div>
              <div class="seb-sli"><div class="seb-sli-icon">‚è±Ô∏è</div><div class="seb-sli-name">Latency</div><div class="seb-sli-example">% requests < 200ms</div></div>
              <div class="seb-sli"><div class="seb-sli-icon">üìà</div><div class="seb-sli-name">Throughput</div><div class="seb-sli-example">Requests per second</div></div>
              <div class="seb-sli"><div class="seb-sli-icon">üéØ</div><div class="seb-sli-name">Correctness</div><div class="seb-sli-example">% valid responses</div></div>
            </div>
            <div class="seb-budget">
              <div class="seb-budget-title">Error Budget Calculation (99.9% SLO)</div>
              <div class="seb-budget-calc">
                <div class="seb-budget-item"><div class="seb-budget-value">0.1%</div><div class="seb-budget-label">Error Budget</div></div>
                <span style="color:#06b6d4;font-size:1.5rem">=</span>
                <div class="seb-budget-item"><div class="seb-budget-value">43.8m</div><div class="seb-budget-label">per month</div></div>
                <span style="color:#06b6d4;font-size:1.5rem">=</span>
                <div class="seb-budget-item"><div class="seb-budget-value">8.76h</div><div class="seb-budget-label">per year</div></div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>SLIs</strong> (Service Level Indicators) are the metrics that quantify service reliability - what you measure. <strong>Error Budgets</strong> define acceptable failure levels based on SLOs.</p><p>Error budgets balance reliability with development velocity - spend budget on features, conserve when low.</p>`,
        keyPoints: [
          { icon: "üìä", title: "SLI", desc: "Quantitative measure of service level. Success rate, latency percentile.", color: "#06b6d4" },
          { icon: "üéØ", title: "SLO", desc: "Target value for an SLI. 99.9% availability, p99 latency < 200ms.", color: "#3b82f6" },
          { icon: "üí∞", title: "Error Budget", desc: "Allowable unreliability. 100% - SLO = budget for failures.", color: "#22c55e" },
          { icon: "üìù", title: "SLA", desc: "Contractual commitment with consequences. Legal/financial penalties.", color: "#f59e0b" }
        ],
        formula: "Error Budget = (1 - SLO) √ó Time Period",
        strategies: [
          { title: "Choose Meaningful SLIs", desc: "Measure what users experience, not infrastructure metrics." },
          { title: "Set Realistic SLOs", desc: "Start conservative, tighten as you improve. 99.9% is very high." },
          { title: "Use Error Budget Policy", desc: "When budget exhausted: freeze features, focus on reliability." },
          { title: "Review Regularly", desc: "Monthly SLO review to adjust targets and identify improvements." }
        ],
        metrics: [
          { level: "99%", downtime: "7.3 hours/month", useCase: "Internal tools" },
          { level: "99.9%", downtime: "43.8 min/month", useCase: "Standard services" },
          { level: "99.95%", downtime: "21.9 min/month", useCase: "Critical services" },
          { level: "99.99%", downtime: "4.38 min/month", useCase: "Mission-critical" }
        ]
      },
      "dashboards": {
        title: "Dashboards",
        subtitle: "Visual displays of metrics and KPIs for monitoring system health.",
        badge: { text: "Observability", color: "#06b6d4", bg: "rgba(6, 182, 212, 0.15)" },
        color: "#06b6d4",
        diagram: `
          <style>
            .dash-viz { display: flex; flex-direction: column; gap: 20px; }
            .dash-preview { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(6, 182, 212, 0.3); border-radius: 12px; padding: 16px; }
            .dash-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
            .dash-title { font-weight: 600; color: #06b6d4; font-size: 0.9rem; }
            .dash-time { font-size: 0.7rem; color: #a0a0b0; }
            .dash-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
            .dash-panel { background: rgba(30, 35, 50, 0.8); border-radius: 8px; padding: 12px; text-align: center; }
            .dash-panel-value { font-size: 1.4rem; font-weight: 700; }
            .dash-panel-label { font-size: 0.65rem; color: #a0a0b0; margin-top: 2px; }
            .dash-types { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .dash-type { background: rgba(30, 35, 50, 0.8); border: 1px solid rgba(6, 182, 212, 0.2); border-radius: 8px; padding: 10px 16px; text-align: center; }
            .dash-type-icon { font-size: 1.3rem; margin-bottom: 4px; }
            .dash-type-name { font-size: 0.75rem; color: #06b6d4; }
          </style>
          <div class="dash-viz">
            <div class="dash-preview">
              <div class="dash-header"><div class="dash-title">üìä Service Overview Dashboard</div><div class="dash-time">Last 1 hour</div></div>
              <div class="dash-grid">
                <div class="dash-panel"><div class="dash-panel-value" style="color:#22c55e">99.8%</div><div class="dash-panel-label">Availability</div></div>
                <div class="dash-panel"><div class="dash-panel-value" style="color:#3b82f6">45ms</div><div class="dash-panel-label">p50 Latency</div></div>
                <div class="dash-panel"><div class="dash-panel-value" style="color:#f59e0b">142ms</div><div class="dash-panel-label">p99 Latency</div></div>
                <div class="dash-panel"><div class="dash-panel-value" style="color:#8b5cf6">2.4k</div><div class="dash-panel-label">RPS</div></div>
              </div>
            </div>
            <div class="dash-types">
              <div class="dash-type"><div class="dash-type-icon">üìà</div><div class="dash-type-name">Time Series</div></div>
              <div class="dash-type"><div class="dash-type-icon">üî¢</div><div class="dash-type-name">Single Stat</div></div>
              <div class="dash-type"><div class="dash-type-icon">üìä</div><div class="dash-type-name">Bar Chart</div></div>
              <div class="dash-type"><div class="dash-type-icon">ü•ß</div><div class="dash-type-name">Pie Chart</div></div>
              <div class="dash-type"><div class="dash-type-icon">üó∫Ô∏è</div><div class="dash-type-name">Heatmap</div></div>
              <div class="dash-type"><div class="dash-type-icon">üìã</div><div class="dash-type-name">Table</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Dashboards</strong> provide visual representations of metrics and system health. Well-designed dashboards enable quick understanding of system state and faster incident response.</p><p>Different dashboard types serve different audiences: overview for executives, detailed for engineers, SLO for reliability.</p>`,
        keyPoints: [
          { icon: "üéØ", title: "Purpose-Built", desc: "Different dashboards for different audiences and use cases.", color: "#06b6d4" },
          { icon: "üìä", title: "Key Metrics First", desc: "Most important metrics at the top, details below.", color: "#3b82f6" },
          { icon: "üö¶", title: "Color Coding", desc: "Green/yellow/red for instant status recognition.", color: "#22c55e" },
          { icon: "üîó", title: "Drill-Down", desc: "Link to detailed views and related dashboards.", color: "#f59e0b" }
        ],
        formula: "Good Dashboard = Right Metrics √ó Right Audience √ó Right Context",
        strategies: [
          { title: "Less is More", desc: "5-10 panels max. Too many panels = nothing stands out." },
          { title: "USE/RED Methods", desc: "Structure around established methodologies for consistency." },
          { title: "Include Context", desc: "Show thresholds, annotations for deployments, incidents." },
          { title: "Version Control", desc: "Store dashboards as code (Grafana JSON, Terraform) for history." }
        ],
        metrics: [
          { level: "Grafana", downtime: "Open source, flexible", useCase: "General purpose" },
          { level: "Datadog", downtime: "SaaS, integrated", useCase: "Full observability" },
          { level: "Kibana", downtime: "Elasticsearch visualizer", useCase: "Log dashboards" },
          { level: "CloudWatch", downtime: "AWS native", useCase: "AWS metrics" }
        ]
      },
      "rca": {
        title: "Root Cause Analysis (RCA)",
        subtitle: "Systematic investigation to identify the underlying cause of incidents.",
        badge: { text: "Observability", color: "#06b6d4", bg: "rgba(6, 182, 212, 0.15)" },
        color: "#06b6d4",
        diagram: `
          <style>
            .rca-viz { display: flex; flex-direction: column; gap: 24px; }
            .rca-whys { background: rgba(6, 182, 212, 0.1); border-radius: 12px; padding: 16px; }
            .rca-whys-title { font-weight: 600; color: #06b6d4; margin-bottom: 12px; text-align: center; }
            .rca-chain { display: flex; flex-direction: column; gap: 6px; }
            .rca-why { display: flex; align-items: center; gap: 8px; padding: 8px 12px; background: rgba(30, 35, 50, 0.8); border-radius: 6px; }
            .rca-why-num { font-weight: 700; color: #06b6d4; width: 24px; }
            .rca-why-text { font-size: 0.8rem; color: #e5e5e5; }
            .rca-why-last { border: 1px solid #ef4444; }
            .rca-steps { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }
            .rca-step { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(6, 182, 212, 0.3); border-radius: 8px; padding: 10px 14px; text-align: center; width: 100px; }
            .rca-step-num { font-size: 1.2rem; font-weight: 700; color: #06b6d4; }
            .rca-step-name { font-size: 0.7rem; color: #a0a0b0; }
          </style>
          <div class="rca-viz">
            <div class="rca-whys">
              <div class="rca-whys-title">5 Whys Example</div>
              <div class="rca-chain">
                <div class="rca-why"><div class="rca-why-num">1</div><div class="rca-why-text">Why did the site go down? ‚Üí Server ran out of memory</div></div>
                <div class="rca-why"><div class="rca-why-num">2</div><div class="rca-why-text">Why did it run out of memory? ‚Üí Memory leak in new code</div></div>
                <div class="rca-why"><div class="rca-why-num">3</div><div class="rca-why-text">Why wasn't the leak caught? ‚Üí No memory profiling in CI</div></div>
                <div class="rca-why"><div class="rca-why-num">4</div><div class="rca-why-text">Why no profiling? ‚Üí Not included in testing requirements</div></div>
                <div class="rca-why rca-why-last"><div class="rca-why-num">5</div><div class="rca-why-text">Why not required? ‚Üí Performance testing checklist outdated</div></div>
              </div>
            </div>
            <div class="rca-steps">
              <div class="rca-step"><div class="rca-step-num">1</div><div class="rca-step-name">Detect</div></div>
              <div class="rca-step"><div class="rca-step-num">2</div><div class="rca-step-name">Respond</div></div>
              <div class="rca-step"><div class="rca-step-num">3</div><div class="rca-step-name">Mitigate</div></div>
              <div class="rca-step"><div class="rca-step-num">4</div><div class="rca-step-name">Analyze</div></div>
              <div class="rca-step"><div class="rca-step-num">5</div><div class="rca-step-name">Improve</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Root Cause Analysis</strong> is a systematic process for identifying the underlying causes of incidents or problems. It goes beyond symptoms to find what truly needs to be fixed.</p><p>Effective RCA leads to permanent fixes and process improvements, not just band-aid solutions.</p>`,
        keyPoints: [
          { icon: "‚ùì", title: "5 Whys", desc: "Ask 'why' repeatedly to drill past symptoms to root cause.", color: "#06b6d4" },
          { icon: "üå≥", title: "Fault Tree", desc: "Map out all possible causes as a tree structure.", color: "#3b82f6" },
          { icon: "üìã", title: "Blameless", desc: "Focus on systems and processes, not individual blame.", color: "#22c55e" },
          { icon: "üìù", title: "Action Items", desc: "Every RCA should produce specific, assigned follow-ups.", color: "#f59e0b" }
        ],
        formula: "RCA = Timeline + Contributing Factors + Root Cause + Action Items",
        strategies: [
          { title: "Blameless Culture", desc: "Focus on what happened, not who did it. Psychological safety enables honesty." },
          { title: "Timeline First", desc: "Build detailed timeline of events, actions, and observations." },
          { title: "Contributing Factors", desc: "Identify all factors that contributed, not just the trigger." },
          { title: "Track Action Items", desc: "Assign owners and deadlines. Follow up until complete." }
        ],
        metrics: [
          { level: "5 Whys", downtime: "Iterative questioning", useCase: "Simple incidents" },
          { level: "Fishbone", downtime: "Category-based analysis", useCase: "Process issues" },
          { level: "Fault Tree", downtime: "Logic diagram", useCase: "Complex systems" },
          { level: "Timeline Analysis", downtime: "Event sequencing", useCase: "Multi-party incidents" }
        ]
      },
      "latency-throughput": {
        title: "Latency vs Throughput",
        subtitle: "Understanding the trade-off between response time and system capacity.",
        badge: { text: "Performance", color: "#ec4899", bg: "rgba(236, 72, 153, 0.15)" },
        color: "#ec4899",
        diagram: `
          <style>
            .lt-viz { display: flex; flex-direction: column; gap: 24px; }
            .lt-compare { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
            .lt-box { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 20px; width: 180px; text-align: center; }
            .lt-box-icon { font-size: 2.5rem; margin-bottom: 8px; }
            .lt-box-name { font-weight: 600; font-size: 1.1rem; margin-bottom: 8px; }
            .lt-box-def { font-size: 0.75rem; color: #a0a0b0; margin-bottom: 8px; }
            .lt-box-example { font-size: 0.8rem; font-weight: 600; padding: 6px 12px; border-radius: 4px; }
            .lt-latency { border: 1px solid rgba(236, 72, 153, 0.3); }
            .lt-latency .lt-box-name { color: #ec4899; }
            .lt-throughput { border: 1px solid rgba(16, 185, 129, 0.3); }
            .lt-throughput .lt-box-name { color: #10b981; }
            .lt-tradeoff { background: rgba(236, 72, 153, 0.1); border-radius: 12px; padding: 16px; text-align: center; }
            .lt-tradeoff-title { font-weight: 600; color: #ec4899; margin-bottom: 12px; }
            .lt-tradeoff-desc { font-size: 0.85rem; color: #a0a0b0; }
          </style>
          <div class="lt-viz">
            <div class="lt-compare">
              <div class="lt-box lt-latency">
                <div class="lt-box-icon">‚è±Ô∏è</div>
                <div class="lt-box-name">Latency</div>
                <div class="lt-box-def">Time to complete one request</div>
                <div class="lt-box-example" style="background:rgba(236,72,153,0.2);color:#ec4899">p99 < 100ms</div>
              </div>
              <div class="lt-box lt-throughput">
                <div class="lt-box-icon">üìä</div>
                <div class="lt-box-name">Throughput</div>
                <div class="lt-box-def">Requests processed per unit time</div>
                <div class="lt-box-example" style="background:rgba(16,185,129,0.2);color:#10b981">10,000 RPS</div>
              </div>
            </div>
            <div class="lt-tradeoff">
              <div class="lt-tradeoff-title">‚öñÔ∏è The Trade-off</div>
              <div class="lt-tradeoff-desc">Optimizing for one often affects the other. Batching increases throughput but adds latency. Caching reduces latency but uses memory that could serve more requests.</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Latency</strong> is the time to complete a single operation (lower is better). <strong>Throughput</strong> is the rate of operations completed over time (higher is better).</p><p>Understanding this trade-off is essential for system design - different use cases prioritize differently.</p>`,
        keyPoints: [
          { icon: "‚è±Ô∏è", title: "Latency", desc: "Time from request to response. Measured as p50, p95, p99 percentiles.", color: "#ec4899" },
          { icon: "üìä", title: "Throughput", desc: "Operations per second/minute. Limited by bottleneck resource.", color: "#10b981" },
          { icon: "‚öñÔ∏è", title: "Trade-off", desc: "Batching improves throughput but increases latency. Balance for use case.", color: "#f59e0b" },
          { icon: "üìà", title: "Little's Law", desc: "Concurrency = Throughput √ó Latency. Fundamental relationship.", color: "#3b82f6" }
        ],
        formula: "Concurrency = Throughput √ó Average Latency",
        strategies: [
          { title: "Measure Percentiles", desc: "p99 shows worst-case latency. Average hides tail latency issues." },
          { title: "Identify Bottlenecks", desc: "Throughput is limited by slowest component. Profile to find it." },
          { title: "Batch for Throughput", desc: "Process multiple items together when latency can be sacrificed." },
          { title: "Cache for Latency", desc: "Reduce latency by avoiding slow operations, trade memory/freshness." }
        ],
        metrics: [
          { level: "p50 (median)", downtime: "Typical experience", useCase: "Average user" },
          { level: "p95", downtime: "95% of requests faster", useCase: "Most users" },
          { level: "p99", downtime: "Tail latency", useCase: "Worst case" },
          { level: "RPS", downtime: "Requests per second", useCase: "Capacity" }
        ]
      },
      "async-processing": {
        title: "Async Processing",
        subtitle: "Decoupling request handling from processing to improve responsiveness and scalability.",
        badge: { text: "Performance", color: "#ec4899", bg: "rgba(236, 72, 153, 0.15)" },
        color: "#ec4899",
        diagram: `
          <style>
            .ap-viz { display: flex; flex-direction: column; gap: 24px; }
            .ap-compare { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
            .ap-flow { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 220px; }
            .ap-flow-title { font-weight: 600; font-size: 0.9rem; margin-bottom: 12px; text-align: center; }
            .ap-steps { display: flex; flex-direction: column; gap: 6px; }
            .ap-step { display: flex; align-items: center; gap: 8px; font-size: 0.8rem; padding: 6px 10px; border-radius: 4px; }
            .ap-sync { border: 1px solid rgba(239, 68, 68, 0.3); }
            .ap-sync .ap-flow-title { color: #ef4444; }
            .ap-async { border: 1px solid rgba(34, 197, 94, 0.3); }
            .ap-async .ap-flow-title { color: #22c55e; }
            .ap-wait { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
            .ap-fast { background: rgba(34, 197, 94, 0.2); color: #22c55e; }
            .ap-queue { background: rgba(139, 92, 246, 0.2); color: #8b5cf6; }
          </style>
          <div class="ap-viz">
            <div class="ap-compare">
              <div class="ap-flow ap-sync">
                <div class="ap-flow-title">‚ùå Synchronous</div>
                <div class="ap-steps">
                  <div class="ap-step ap-fast">1. Receive request</div>
                  <div class="ap-step ap-wait">2. Process (5 sec) ‚è≥</div>
                  <div class="ap-step ap-wait">3. Wait for DB ‚è≥</div>
                  <div class="ap-step ap-wait">4. Send email ‚è≥</div>
                  <div class="ap-step ap-fast">5. Return response</div>
                </div>
              </div>
              <div class="ap-flow ap-async">
                <div class="ap-flow-title">‚úì Asynchronous</div>
                <div class="ap-steps">
                  <div class="ap-step ap-fast">1. Receive request</div>
                  <div class="ap-step ap-queue">2. Queue job üì®</div>
                  <div class="ap-step ap-fast">3. Return 202 ‚úì</div>
                  <div class="ap-step" style="opacity:0.5">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</div>
                  <div class="ap-step ap-queue">Worker processes</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Async Processing</strong> decouples the request-response cycle from time-consuming operations. The client receives an immediate acknowledgment while work happens in the background.</p><p>This improves perceived performance, enables horizontal scaling of workers, and provides resilience through retry queues.</p>`,
        keyPoints: [
          { icon: "üì®", title: "Message Queues", desc: "Decouple producer and consumer. SQS, RabbitMQ, Kafka.", color: "#ec4899" },
          { icon: "‚ö°", title: "Immediate Response", desc: "Return 202 Accepted quickly. Process work asynchronously.", color: "#22c55e" },
          { icon: "üîÑ", title: "Retries", desc: "Failed jobs can be retried without affecting user experience.", color: "#3b82f6" },
          { icon: "üìà", title: "Scale Workers", desc: "Add worker instances based on queue depth, not request load.", color: "#f59e0b" }
        ],
        formula: "Response Time = Enqueue Time (fast) not Processing Time (slow)",
        strategies: [
          { title: "Return Early", desc: "Acknowledge request immediately. Provide job ID for status polling." },
          { title: "Idempotent Workers", desc: "Design workers to safely process same message multiple times." },
          { title: "Dead Letter Queues", desc: "Route permanently failed messages for investigation." },
          { title: "Visibility Timeouts", desc: "Prevent other workers from picking up a message being processed." }
        ],
        metrics: [
          { level: "SQS", downtime: "AWS managed", useCase: "Simple queuing" },
          { level: "RabbitMQ", downtime: "Feature-rich", useCase: "Complex routing" },
          { level: "Kafka", downtime: "High throughput", useCase: "Event streaming" },
          { level: "Redis Streams", downtime: "Low latency", useCase: "Real-time processing" }
        ]
      },
      "connection-pooling": {
        title: "Connection Pooling",
        subtitle: "Reusing database and network connections to reduce overhead.",
        badge: { text: "Performance", color: "#ec4899", bg: "rgba(236, 72, 153, 0.15)" },
        color: "#ec4899",
        diagram: `
          <style>
            .cp-viz { display: flex; flex-direction: column; gap: 24px; }
            .cp-compare { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
            .cp-box { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 200px; text-align: center; }
            .cp-title { font-weight: 600; font-size: 0.9rem; margin-bottom: 12px; }
            .cp-visual { display: flex; justify-content: center; gap: 4px; margin-bottom: 8px; }
            .cp-conn { width: 8px; height: 30px; border-radius: 4px; }
            .cp-desc { font-size: 0.7rem; color: #a0a0b0; }
            .cp-no { border: 1px solid rgba(239, 68, 68, 0.3); }
            .cp-no .cp-title { color: #ef4444; }
            .cp-yes { border: 1px solid rgba(34, 197, 94, 0.3); }
            .cp-yes .cp-title { color: #22c55e; }
            .cp-pool { background: rgba(236, 72, 153, 0.1); border-radius: 12px; padding: 16px; text-align: center; }
            .cp-pool-title { font-weight: 600; color: #ec4899; margin-bottom: 8px; }
            .cp-pool-stats { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
            .cp-stat { font-size: 0.8rem; }
            .cp-stat-label { color: #a0a0b0; }
            .cp-stat-value { font-weight: 600; color: #e5e5e5; }
          </style>
          <div class="cp-viz">
            <div class="cp-compare">
              <div class="cp-box cp-no">
                <div class="cp-title">‚ùå No Pooling</div>
                <div class="cp-visual">
                  <div class="cp-conn" style="background:#ef4444"></div>
                  <div class="cp-conn" style="background:#ef4444"></div>
                  <div class="cp-conn" style="background:#ef4444"></div>
                  <div class="cp-conn" style="background:#ef4444"></div>
                  <div class="cp-conn" style="background:#ef4444"></div>
                </div>
                <div class="cp-desc">New connection per request<br>~50-100ms overhead each</div>
              </div>
              <div class="cp-box cp-yes">
                <div class="cp-title">‚úì With Pooling</div>
                <div class="cp-visual">
                  <div class="cp-conn" style="background:#22c55e"></div>
                  <div class="cp-conn" style="background:#22c55e"></div>
                  <div class="cp-conn" style="background:#22c55e;opacity:0.5"></div>
                </div>
                <div class="cp-desc">Reuse existing connections<br>~0ms connection overhead</div>
              </div>
            </div>
            <div class="cp-pool">
              <div class="cp-pool-title">Pool Configuration</div>
              <div class="cp-pool-stats">
                <div class="cp-stat"><div class="cp-stat-label">Min</div><div class="cp-stat-value">5</div></div>
                <div class="cp-stat"><div class="cp-stat-label">Max</div><div class="cp-stat-value">20</div></div>
                <div class="cp-stat"><div class="cp-stat-label">Idle Timeout</div><div class="cp-stat-value">30s</div></div>
                <div class="cp-stat"><div class="cp-stat-label">Max Lifetime</div><div class="cp-stat-value">1h</div></div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Connection Pooling</strong> maintains a cache of reusable database or network connections. Instead of creating a new connection for each request (expensive), connections are borrowed from the pool and returned after use.</p><p>This dramatically reduces latency and resource consumption.</p>`,
        keyPoints: [
          { icon: "üîå", title: "Reuse", desc: "Avoid expensive connection setup (TCP handshake, TLS, auth).", color: "#ec4899" },
          { icon: "üìä", title: "Pool Size", desc: "Balance between connection overhead and concurrent capacity.", color: "#3b82f6" },
          { icon: "‚è±Ô∏è", title: "Timeouts", desc: "Idle timeout releases unused connections. Max lifetime prevents stale.", color: "#f59e0b" },
          { icon: "üîí", title: "Thread Safety", desc: "Pool must safely handle concurrent borrow/return operations.", color: "#10b981" }
        ],
        formula: "Pool Size = Connections per pod √ó Number of pods ‚â§ DB max_connections",
        strategies: [
          { title: "Size Appropriately", desc: "connections = (CPU cores √ó 2) + disk spindles. Often smaller than expected." },
          { title: "Monitor Pool Metrics", desc: "Track wait time, active/idle counts to tune size." },
          { title: "Use PgBouncer/ProxySQL", desc: "Connection proxies multiplex many app connections to few DB connections." },
          { title: "Health Checks", desc: "Validate connections before use. Remove broken connections." }
        ],
        metrics: [
          { level: "HikariCP", downtime: "Java, fast", useCase: "JVM applications" },
          { level: "PgBouncer", downtime: "PostgreSQL proxy", useCase: "Connection multiplexing" },
          { level: "ProxySQL", downtime: "MySQL proxy", useCase: "MySQL connection pooling" },
          { level: "RDS Proxy", downtime: "AWS managed", useCase: "Serverless, Lambda" }
        ]
      },
      "batching": {
        title: "Batching",
        subtitle: "Combining multiple operations into a single request to reduce overhead.",
        badge: { text: "Performance", color: "#ec4899", bg: "rgba(236, 72, 153, 0.15)" },
        color: "#ec4899",
        diagram: `
          <style>
            .bat-viz { display: flex; flex-direction: column; gap: 24px; }
            .bat-compare { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; }
            .bat-box { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 200px; text-align: center; }
            .bat-title { font-weight: 600; font-size: 0.9rem; margin-bottom: 12px; }
            .bat-calls { display: flex; flex-direction: column; gap: 4px; margin-bottom: 8px; }
            .bat-call { padding: 4px 8px; border-radius: 4px; font-size: 0.7rem; }
            .bat-time { font-size: 0.8rem; font-weight: 600; padding: 6px 12px; border-radius: 4px; margin-top: 8px; }
            .bat-single { border: 1px solid rgba(239, 68, 68, 0.3); }
            .bat-single .bat-title { color: #ef4444; }
            .bat-batch { border: 1px solid rgba(34, 197, 94, 0.3); }
            .bat-batch .bat-title { color: #22c55e; }
          </style>
          <div class="bat-viz">
            <div class="bat-compare">
              <div class="bat-box bat-single">
                <div class="bat-title">‚ùå Individual Calls</div>
                <div class="bat-calls">
                  <div class="bat-call" style="background:#ef4444;color:white">INSERT row 1</div>
                  <div class="bat-call" style="background:#ef4444;color:white">INSERT row 2</div>
                  <div class="bat-call" style="background:#ef4444;color:white">INSERT row 3</div>
                  <div class="bat-call" style="background:#ef4444;color:white">INSERT row 4</div>
                  <div class="bat-call" style="background:#ef4444;color:white">INSERT row 5</div>
                </div>
                <div class="bat-time" style="background:rgba(239,68,68,0.2);color:#ef4444">5 round trips</div>
              </div>
              <div class="bat-box bat-batch">
                <div class="bat-title">‚úì Batched</div>
                <div class="bat-calls">
                  <div class="bat-call" style="background:#22c55e;color:white;padding:20px 8px">INSERT rows 1-5</div>
                </div>
                <div class="bat-time" style="background:rgba(34,197,94,0.2);color:#22c55e">1 round trip</div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Batching</strong> combines multiple operations into a single request, reducing per-operation overhead like network round trips, connection setup, and parsing.</p><p>It trades immediate processing for efficiency - operations are collected and processed together.</p>`,
        keyPoints: [
          { icon: "üì¶", title: "Reduce Round Trips", desc: "One network call instead of many. Massive latency savings.", color: "#ec4899" },
          { icon: "üìä", title: "Amortize Overhead", desc: "Connection, parsing, and transaction costs spread across items.", color: "#3b82f6" },
          { icon: "‚è±Ô∏è", title: "Latency Trade-off", desc: "Wait to collect batch = added latency. Balance batch size.", color: "#f59e0b" },
          { icon: "üìà", title: "Throughput Gains", desc: "10-100x throughput improvement for high-volume operations.", color: "#22c55e" }
        ],
        formula: "Efficiency = Items / Batches (higher = better)",
        strategies: [
          { title: "Size and Time Limits", desc: "Flush batch when size reached OR timeout expires, whichever first." },
          { title: "Error Handling", desc: "Decide: fail entire batch, or process partial? Track individual status." },
          { title: "Idempotency", desc: "Ensure retrying a batch doesn't duplicate side effects." },
          { title: "Monitor Batch Sizes", desc: "Track actual batch sizes to tune limits and detect issues." }
        ],
        metrics: [
          { level: "Database", downtime: "Bulk INSERT/UPDATE", useCase: "Data loading" },
          { level: "API", downtime: "Batch endpoints", useCase: "Bulk operations" },
          { level: "Queue", downtime: "Batch consume", useCase: "Message processing" },
          { level: "Logging", downtime: "Buffered writes", useCase: "High-volume logs" }
        ]
      },
      "compression": {
        title: "Compression",
        subtitle: "Reducing data size to improve transfer speed and storage efficiency.",
        badge: { text: "Performance", color: "#ec4899", bg: "rgba(236, 72, 153, 0.15)" },
        color: "#ec4899",
        diagram: `
          <style>
            .comp-viz { display: flex; flex-direction: column; gap: 24px; }
            .comp-demo { background: rgba(236, 72, 153, 0.1); border-radius: 12px; padding: 20px; text-align: center; }
            .comp-demo-title { font-weight: 600; color: #ec4899; margin-bottom: 16px; }
            .comp-bars { display: flex; align-items: center; justify-content: center; gap: 16px; }
            .comp-bar { display: flex; flex-direction: column; align-items: center; gap: 4px; }
            .comp-bar-visual { width: 60px; border-radius: 4px; display: flex; align-items: flex-end; justify-content: center; }
            .comp-bar-label { font-size: 0.75rem; color: #a0a0b0; }
            .comp-bar-size { font-size: 0.9rem; font-weight: 600; color: #e5e5e5; }
            .comp-arrow { font-size: 1.5rem; color: #ec4899; }
            .comp-algos { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .comp-algo { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(236, 72, 153, 0.3); border-radius: 8px; padding: 12px; width: 110px; text-align: center; }
            .comp-algo-name { font-weight: 600; color: #ec4899; font-size: 0.9rem; margin-bottom: 4px; }
            .comp-algo-desc { font-size: 0.65rem; color: #a0a0b0; }
          </style>
          <div class="comp-viz">
            <div class="comp-demo">
              <div class="comp-demo-title">HTTP Response Compression</div>
              <div class="comp-bars">
                <div class="comp-bar">
                  <div class="comp-bar-visual" style="height:100px;background:#ef4444"></div>
                  <div class="comp-bar-size">500 KB</div>
                  <div class="comp-bar-label">Original</div>
                </div>
                <span class="comp-arrow">‚Üí gzip ‚Üí</span>
                <div class="comp-bar">
                  <div class="comp-bar-visual" style="height:30px;background:#22c55e"></div>
                  <div class="comp-bar-size">75 KB</div>
                  <div class="comp-bar-label">Compressed</div>
                </div>
              </div>
            </div>
            <div class="comp-algos">
              <div class="comp-algo"><div class="comp-algo-name">gzip</div><div class="comp-algo-desc">Universal, good ratio</div></div>
              <div class="comp-algo"><div class="comp-algo-name">Brotli</div><div class="comp-algo-desc">Better ratio, slower</div></div>
              <div class="comp-algo"><div class="comp-algo-name">LZ4</div><div class="comp-algo-desc">Fast, lower ratio</div></div>
              <div class="comp-algo"><div class="comp-algo-name">Zstd</div><div class="comp-algo-desc">Best balance</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Compression</strong> reduces data size by eliminating redundancy. It speeds up network transfers and reduces storage costs, at the expense of CPU for compress/decompress.</p><p>Choose algorithm based on the trade-off between compression ratio, speed, and CPU usage.</p>`,
        keyPoints: [
          { icon: "üìâ", title: "Reduce Size", desc: "Text compresses 60-90%. Images, video already compressed.", color: "#ec4899" },
          { icon: "‚ö°", title: "Faster Transfers", desc: "Smaller payloads = faster network, better mobile experience.", color: "#3b82f6" },
          { icon: "üíæ", title: "Storage Savings", desc: "Compress logs, backups, cold data for significant savings.", color: "#22c55e" },
          { icon: "‚öñÔ∏è", title: "CPU Trade-off", desc: "Compression uses CPU. Balance against network/storage savings.", color: "#f59e0b" }
        ],
        formula: "Ratio = Original Size / Compressed Size",
        strategies: [
          { title: "Enable HTTP Compression", desc: "gzip/Brotli for all text responses (HTML, JSON, CSS, JS)." },
          { title: "Don't Double Compress", desc: "Already compressed formats (JPEG, MP4, ZIP) won't benefit." },
          { title: "Choose Right Algorithm", desc: "Brotli for static assets, gzip for dynamic, LZ4 for speed-critical." },
          { title: "Compress at Edge", desc: "Let CDN handle compression to offload origin servers." }
        ],
        metrics: [
          { level: "gzip", downtime: "70-80% ratio", useCase: "HTTP, universal support" },
          { level: "Brotli", downtime: "80-90% ratio", useCase: "Static assets, modern browsers" },
          { level: "LZ4", downtime: "Fast, 50-60%", useCase: "Real-time, logs" },
          { level: "Zstd", downtime: "Best balance", useCase: "Kafka, databases" }
        ]
      },
      "cold-start": {
        title: "Cold Start Optimization",
        subtitle: "Reducing initialization time for applications and serverless functions.",
        badge: { text: "Performance", color: "#ec4899", bg: "rgba(236, 72, 153, 0.15)" },
        color: "#ec4899",
        diagram: `
          <style>
            .cs-viz { display: flex; flex-direction: column; gap: 24px; }
            .cs-timeline { background: rgba(236, 72, 153, 0.1); border-radius: 12px; padding: 16px; }
            .cs-timeline-title { font-size: 0.85rem; color: #ec4899; margin-bottom: 12px; font-weight: 600; }
            .cs-bars { display: flex; flex-direction: column; gap: 8px; }
            .cs-bar { display: flex; align-items: center; gap: 8px; }
            .cs-bar-label { width: 80px; font-size: 0.75rem; color: #a0a0b0; }
            .cs-bar-track { flex: 1; height: 24px; background: rgba(30, 35, 50, 0.8); border-radius: 4px; overflow: hidden; display: flex; }
            .cs-bar-segment { height: 100%; display: flex; align-items: center; justify-content: center; font-size: 0.65rem; color: white; font-weight: 500; }
            .cs-tips { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .cs-tip { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(236, 72, 153, 0.3); border-radius: 8px; padding: 10px 14px; text-align: center; width: 130px; }
            .cs-tip-icon { font-size: 1.3rem; margin-bottom: 4px; }
            .cs-tip-name { font-size: 0.75rem; color: #ec4899; font-weight: 600; }
          </style>
          <div class="cs-viz">
            <div class="cs-timeline">
              <div class="cs-timeline-title">Lambda Cold Start Breakdown</div>
              <div class="cs-bars">
                <div class="cs-bar">
                  <div class="cs-bar-label">Cold Start</div>
                  <div class="cs-bar-track">
                    <div class="cs-bar-segment" style="width:30%;background:#ef4444">Init</div>
                    <div class="cs-bar-segment" style="width:40%;background:#f59e0b">Load Code</div>
                    <div class="cs-bar-segment" style="width:20%;background:#3b82f6">Connect</div>
                    <div class="cs-bar-segment" style="width:10%;background:#22c55e">Run</div>
                  </div>
                </div>
                <div class="cs-bar">
                  <div class="cs-bar-label">Warm Start</div>
                  <div class="cs-bar-track">
                    <div class="cs-bar-segment" style="width:10%;background:#22c55e">Run</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="cs-tips">
              <div class="cs-tip"><div class="cs-tip-icon">üì¶</div><div class="cs-tip-name">Smaller Bundle</div></div>
              <div class="cs-tip"><div class="cs-tip-icon">üîå</div><div class="cs-tip-name">Lazy Init</div></div>
              <div class="cs-tip"><div class="cs-tip-icon">üî•</div><div class="cs-tip-name">Keep Warm</div></div>
              <div class="cs-tip"><div class="cs-tip-icon">‚ö°</div><div class="cs-tip-name">Provisioned</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Cold Start</strong> is the delay when an application or serverless function starts from scratch - loading code, initializing frameworks, establishing connections.</p><p>Optimization reduces this startup time, critical for serverless, auto-scaling, and fast deployments.</p>`,
        keyPoints: [
          { icon: "üì¶", title: "Bundle Size", desc: "Smaller packages load faster. Remove unused dependencies.", color: "#ec4899" },
          { icon: "üîå", title: "Lazy Initialization", desc: "Defer heavy initialization until actually needed.", color: "#3b82f6" },
          { icon: "üî•", title: "Keep Warm", desc: "Scheduled pings prevent function from going cold.", color: "#f59e0b" },
          { icon: "‚ö°", title: "Provisioned Concurrency", desc: "Pre-warmed instances ready to serve immediately.", color: "#22c55e" }
        ],
        formula: "Cold Start = Container Init + Code Load + Framework Init + Connection Setup",
        strategies: [
          { title: "Reduce Dependencies", desc: "Fewer, smaller dependencies = faster load. Tree-shake unused code." },
          { title: "Use Native Runtimes", desc: "Go, Rust have near-zero cold starts vs JVM, .NET." },
          { title: "Connection Reuse", desc: "Initialize DB connections outside handler, reuse across invocations." },
          { title: "Provisioned Concurrency", desc: "Keep N instances warm for latency-sensitive functions." }
        ],
        metrics: [
          { level: "Python", downtime: "100-500ms", useCase: "Scripting, ML" },
          { level: "Node.js", downtime: "100-300ms", useCase: "Web, APIs" },
          { level: "Java", downtime: "500ms-3s", useCase: "Enterprise (use GraalVM)" },
          { level: "Go/Rust", downtime: "10-50ms", useCase: "Performance-critical" }
        ]
      },
      "profiling": {
        title: "Profiling & Benchmarking",
        subtitle: "Measuring and analyzing application performance to identify optimization opportunities.",
        badge: { text: "Performance", color: "#ec4899", bg: "rgba(236, 72, 153, 0.15)" },
        color: "#ec4899",
        diagram: `
          <style>
            .pb-viz { display: flex; flex-direction: column; gap: 24px; }
            .pb-flame { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(236, 72, 153, 0.3); border-radius: 12px; padding: 16px; }
            .pb-flame-title { font-size: 0.85rem; color: #ec4899; margin-bottom: 12px; font-weight: 600; }
            .pb-flame-stack { display: flex; flex-direction: column; gap: 2px; }
            .pb-flame-row { display: flex; gap: 2px; }
            .pb-flame-block { height: 24px; border-radius: 3px; display: flex; align-items: center; justify-content: center; font-size: 0.65rem; color: white; font-weight: 500; }
            .pb-types { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .pb-type { background: rgba(30, 35, 50, 0.8); border: 1px solid rgba(236, 72, 153, 0.2); border-radius: 8px; padding: 12px; width: 120px; text-align: center; }
            .pb-type-icon { font-size: 1.5rem; margin-bottom: 6px; }
            .pb-type-name { font-weight: 600; color: #ec4899; font-size: 0.85rem; margin-bottom: 2px; }
            .pb-type-desc { font-size: 0.6rem; color: #a0a0b0; }
          </style>
          <div class="pb-viz">
            <div class="pb-flame">
              <div class="pb-flame-title">üî• Flame Graph (CPU Time)</div>
              <div class="pb-flame-stack">
                <div class="pb-flame-row"><div class="pb-flame-block" style="width:100%;background:#ef4444">main() - 100%</div></div>
                <div class="pb-flame-row"><div class="pb-flame-block" style="width:60%;background:#f59e0b">processRequest() - 60%</div><div class="pb-flame-block" style="width:40%;background:#3b82f6">handleDB() - 40%</div></div>
                <div class="pb-flame-row"><div class="pb-flame-block" style="width:35%;background:#ec4899">parseJSON() - 35%</div><div class="pb-flame-block" style="width:25%;background:#10b981">validate()</div><div class="pb-flame-block" style="width:40%;background:#8b5cf6">query() - 40%</div></div>
              </div>
            </div>
            <div class="pb-types">
              <div class="pb-type"><div class="pb-type-icon">üî•</div><div class="pb-type-name">CPU Profiler</div><div class="pb-type-desc">Time in functions</div></div>
              <div class="pb-type"><div class="pb-type-icon">üß†</div><div class="pb-type-name">Memory</div><div class="pb-type-desc">Allocations, leaks</div></div>
              <div class="pb-type"><div class="pb-type-icon">üîí</div><div class="pb-type-name">Lock</div><div class="pb-type-desc">Contention</div></div>
              <div class="pb-type"><div class="pb-type-icon">üìä</div><div class="pb-type-name">Benchmark</div><div class="pb-type-desc">Comparative tests</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Profiling</strong> analyzes where an application spends time and resources. <strong>Benchmarking</strong> measures performance under controlled conditions to compare changes or implementations.</p><p>Both are essential for data-driven optimization - measure before and after changes.</p>`,
        keyPoints: [
          { icon: "üî•", title: "CPU Profiling", desc: "Flame graphs show where CPU time is spent. Find hot paths.", color: "#ec4899" },
          { icon: "üß†", title: "Memory Profiling", desc: "Track allocations, identify leaks, reduce GC pressure.", color: "#3b82f6" },
          { icon: "üìä", title: "Benchmarking", desc: "Repeatable tests to measure and compare performance.", color: "#22c55e" },
          { icon: "üìà", title: "Continuous Profiling", desc: "Production profiling with low overhead for real-world insights.", color: "#f59e0b" }
        ],
        formula: "Optimize = Profile ‚Üí Identify Hotspot ‚Üí Improve ‚Üí Benchmark ‚Üí Repeat",
        strategies: [
          { title: "Profile Production", desc: "Development isn't representative. Use continuous profiling in prod." },
          { title: "Focus on Hotspots", desc: "Optimize the 10% of code taking 90% of time. Amdahl's Law." },
          { title: "Benchmark Meaningfully", desc: "Warm up JIT, use realistic data, run enough iterations." },
          { title: "Track Regressions", desc: "Run benchmarks in CI to catch performance regressions." }
        ],
        metrics: [
          { level: "pprof", downtime: "Go profiling", useCase: "Go applications" },
          { level: "async-profiler", downtime: "Low-overhead JVM", useCase: "Java/Kotlin" },
          { level: "py-spy", downtime: "Python sampling", useCase: "Python apps" },
          { level: "Datadog Profiler", downtime: "Production profiling", useCase: "All languages" }
        ]
      },
      "cicd": {
        title: "CI/CD Pipelines",
        subtitle: "Automating the build, test, and deployment of software.",
        badge: { text: "DevOps", color: "#84cc16", bg: "rgba(132, 204, 22, 0.15)" },
        color: "#84cc16",
        diagram: `
          <style>
            .cicd-viz { display: flex; flex-direction: column; gap: 24px; }
            .cicd-pipeline { background: rgba(132, 204, 22, 0.1); border-radius: 12px; padding: 20px; }
            .cicd-title { font-size: 0.85rem; color: #84cc16; margin-bottom: 16px; font-weight: 600; text-align: center; }
            .cicd-stages { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; justify-content: center; }
            .cicd-stage { background: rgba(30, 35, 50, 0.8); border: 2px solid #84cc16; border-radius: 8px; padding: 12px 16px; text-align: center; }
            .cicd-stage-icon { font-size: 1.3rem; margin-bottom: 4px; }
            .cicd-stage-name { font-size: 0.8rem; color: #e5e5e5; font-weight: 600; }
            .cicd-arrow { color: #84cc16; font-size: 1.2rem; }
            .cicd-tools { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .cicd-tool { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(132, 204, 22, 0.3); border-radius: 8px; padding: 10px 16px; text-align: center; }
            .cicd-tool-name { font-weight: 600; color: #84cc16; font-size: 0.85rem; }
          </style>
          <div class="cicd-viz">
            <div class="cicd-pipeline">
              <div class="cicd-title">üîÑ CI/CD Pipeline</div>
              <div class="cicd-stages">
                <div class="cicd-stage"><div class="cicd-stage-icon">üìù</div><div class="cicd-stage-name">Commit</div></div>
                <span class="cicd-arrow">‚Üí</span>
                <div class="cicd-stage"><div class="cicd-stage-icon">üî®</div><div class="cicd-stage-name">Build</div></div>
                <span class="cicd-arrow">‚Üí</span>
                <div class="cicd-stage"><div class="cicd-stage-icon">üß™</div><div class="cicd-stage-name">Test</div></div>
                <span class="cicd-arrow">‚Üí</span>
                <div class="cicd-stage"><div class="cicd-stage-icon">üîç</div><div class="cicd-stage-name">Scan</div></div>
                <span class="cicd-arrow">‚Üí</span>
                <div class="cicd-stage"><div class="cicd-stage-icon">üì¶</div><div class="cicd-stage-name">Package</div></div>
                <span class="cicd-arrow">‚Üí</span>
                <div class="cicd-stage"><div class="cicd-stage-icon">üöÄ</div><div class="cicd-stage-name">Deploy</div></div>
              </div>
            </div>
            <div class="cicd-tools">
              <div class="cicd-tool"><div class="cicd-tool-name">GitHub Actions</div></div>
              <div class="cicd-tool"><div class="cicd-tool-name">GitLab CI</div></div>
              <div class="cicd-tool"><div class="cicd-tool-name">Jenkins</div></div>
              <div class="cicd-tool"><div class="cicd-tool-name">CircleCI</div></div>
              <div class="cicd-tool"><div class="cicd-tool-name">ArgoCD</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>CI (Continuous Integration)</strong> automatically builds and tests code on every commit. <strong>CD (Continuous Delivery/Deployment)</strong> automates the release process to staging or production.</p><p>Together they enable fast, reliable, and frequent releases with quick feedback on issues.</p>`,
        keyPoints: [
          { icon: "üî®", title: "Continuous Integration", desc: "Merge code frequently, build and test automatically on each push.", color: "#84cc16" },
          { icon: "üì¶", title: "Continuous Delivery", desc: "Automatically prepare releases for deployment with manual approval.", color: "#3b82f6" },
          { icon: "üöÄ", title: "Continuous Deployment", desc: "Automatically deploy to production after passing all stages.", color: "#f59e0b" },
          { icon: "‚ö°", title: "Fast Feedback", desc: "Know within minutes if changes break the build or tests.", color: "#22c55e" }
        ],
        formula: "Release Velocity = Pipeline Speed √ó Pipeline Reliability",
        strategies: [
          { title: "Fail Fast", desc: "Run quick tests first. Expensive tests only after fast ones pass." },
          { title: "Parallelize", desc: "Run independent tests and builds in parallel to reduce time." },
          { title: "Cache Dependencies", desc: "Cache package downloads and build artifacts between runs." },
          { title: "Test in Production-like Env", desc: "Staging should mirror production as closely as possible." }
        ],
        metrics: [
          { level: "GitHub Actions", downtime: "YAML in repo", useCase: "GitHub projects" },
          { level: "GitLab CI", downtime: "Integrated, full DevOps", useCase: "GitLab projects" },
          { level: "Jenkins", downtime: "Self-hosted, flexible", useCase: "Enterprise" },
          { level: "ArgoCD", downtime: "GitOps for K8s", useCase: "Kubernetes" }
        ]
      },
      "iac": {
        title: "Infrastructure as Code (IaC)",
        subtitle: "Managing infrastructure through version-controlled configuration files.",
        badge: { text: "DevOps", color: "#84cc16", bg: "rgba(132, 204, 22, 0.15)" },
        color: "#84cc16",
        diagram: `
          <style>
            .iac-viz { display: flex; flex-direction: column; gap: 24px; }
            .iac-flow { display: flex; align-items: center; justify-content: center; gap: 16px; flex-wrap: wrap; }
            .iac-item { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(132, 204, 22, 0.3); border-radius: 12px; padding: 16px; text-align: center; width: 140px; }
            .iac-item-icon { font-size: 2rem; margin-bottom: 8px; }
            .iac-item-name { font-weight: 600; color: #84cc16; font-size: 0.9rem; }
            .iac-arrow { color: #84cc16; font-size: 1.5rem; }
            .iac-code { background: rgba(0,0,0,0.3); border-radius: 8px; padding: 12px; font-family: monospace; font-size: 0.7rem; color: #84cc16; text-align: left; }
            .iac-tools { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .iac-tool { background: rgba(30, 35, 50, 0.8); border: 1px solid rgba(132, 204, 22, 0.2); border-radius: 6px; padding: 8px 14px; font-size: 0.8rem; color: #84cc16; }
          </style>
          <div class="iac-viz">
            <div class="iac-flow">
              <div class="iac-item"><div class="iac-item-icon">üìù</div><div class="iac-item-name">Code</div></div>
              <span class="iac-arrow">‚Üí</span>
              <div class="iac-item"><div class="iac-item-icon">üîç</div><div class="iac-item-name">Plan</div></div>
              <span class="iac-arrow">‚Üí</span>
              <div class="iac-item"><div class="iac-item-icon">‚úÖ</div><div class="iac-item-name">Apply</div></div>
              <span class="iac-arrow">‚Üí</span>
              <div class="iac-item"><div class="iac-item-icon">‚òÅÔ∏è</div><div class="iac-item-name">Infrastructure</div></div>
            </div>
            <div class="iac-code">resource "aws_instance" "web" {<br>  ami           = "ami-12345"<br>  instance_type = "t3.micro"<br>  tags = { Name = "WebServer" }<br>}</div>
            <div class="iac-tools">
              <div class="iac-tool">Terraform</div>
              <div class="iac-tool">Pulumi</div>
              <div class="iac-tool">CloudFormation</div>
              <div class="iac-tool">Ansible</div>
              <div class="iac-tool">CDK</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Infrastructure as Code</strong> manages infrastructure through declarative configuration files rather than manual processes. Changes are version-controlled, reviewed, tested, and applied consistently.</p><p>IaC enables reproducible environments, disaster recovery, and self-service infrastructure.</p>`,
        keyPoints: [
          { icon: "üìù", title: "Declarative", desc: "Describe desired state, tool figures out how to achieve it.", color: "#84cc16" },
          { icon: "üîÑ", title: "Version Controlled", desc: "Git history shows who changed what, when, and why.", color: "#3b82f6" },
          { icon: "üîÅ", title: "Reproducible", desc: "Same code creates identical infrastructure every time.", color: "#22c55e" },
          { icon: "üëÄ", title: "Code Review", desc: "Infrastructure changes reviewed like application code.", color: "#f59e0b" }
        ],
        formula: "Infrastructure = Code + State + Provider",
        strategies: [
          { title: "Use Modules", desc: "Reusable components for common patterns (VPC, EKS cluster)." },
          { title: "Remote State", desc: "Store Terraform state in S3/GCS with locking for team collaboration." },
          { title: "Plan Before Apply", desc: "Always review plan output before applying changes." },
          { title: "Drift Detection", desc: "Detect and reconcile manual changes made outside IaC." }
        ],
        metrics: [
          { level: "Terraform", downtime: "Multi-cloud, HCL", useCase: "Most popular" },
          { level: "Pulumi", downtime: "Real languages", useCase: "Developer-friendly" },
          { level: "CloudFormation", downtime: "AWS native", useCase: "AWS-only" },
          { level: "CDK", downtime: "Generates CFN/TF", useCase: "Type-safe IaC" }
        ]
      },
      "deployment-strategies": {
        title: "Blue-Green / Canary Deployments",
        subtitle: "Strategies for releasing software with minimal risk and downtime.",
        badge: { text: "DevOps", color: "#84cc16", bg: "rgba(132, 204, 22, 0.15)" },
        color: "#84cc16",
        diagram: `
          <style>
            .ds-viz { display: flex; flex-direction: column; gap: 20px; }
            .ds-strategies { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .ds-strategy { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 200px; }
            .ds-title { font-weight: 600; font-size: 0.95rem; margin-bottom: 12px; text-align: center; }
            .ds-visual { display: flex; gap: 4px; height: 50px; margin-bottom: 8px; }
            .ds-bar { flex: 1; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.7rem; font-weight: 600; }
            .ds-desc { font-size: 0.7rem; color: #a0a0b0; text-align: center; }
            .ds-blue { border: 1px solid rgba(59, 130, 246, 0.3); }
            .ds-blue .ds-title { color: #3b82f6; }
            .ds-canary { border: 1px solid rgba(245, 158, 11, 0.3); }
            .ds-canary .ds-title { color: #f59e0b; }
            .ds-rolling { border: 1px solid rgba(34, 197, 94, 0.3); }
            .ds-rolling .ds-title { color: #22c55e; }
          </style>
          <div class="ds-viz">
            <div class="ds-strategies">
              <div class="ds-strategy ds-blue">
                <div class="ds-title">Blue-Green</div>
                <div class="ds-visual">
                  <div class="ds-bar" style="background:#3b82f6">Blue (old)</div>
                  <div class="ds-bar" style="background:#22c55e">Green (new)</div>
                </div>
                <div class="ds-desc">Switch 100% traffic instantly. Easy rollback.</div>
              </div>
              <div class="ds-strategy ds-canary">
                <div class="ds-title">Canary</div>
                <div class="ds-visual">
                  <div class="ds-bar" style="background:#3b82f6;flex:9">95%</div>
                  <div class="ds-bar" style="background:#f59e0b;flex:1">5%</div>
                </div>
                <div class="ds-desc">Gradual rollout. Monitor before expanding.</div>
              </div>
              <div class="ds-strategy ds-rolling">
                <div class="ds-title">Rolling</div>
                <div class="ds-visual">
                  <div class="ds-bar" style="background:#3b82f6">Old</div>
                  <div class="ds-bar" style="background:#22c55e">New</div>
                  <div class="ds-bar" style="background:#22c55e">New</div>
                  <div class="ds-bar" style="background:#3b82f6">Old</div>
                </div>
                <div class="ds-desc">Replace instances one by one. No extra capacity.</div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Blue-Green</strong> maintains two identical environments, switching traffic between them. <strong>Canary</strong> gradually routes a percentage of traffic to the new version. <strong>Rolling</strong> updates instances incrementally.</p><p>Each strategy trades off between speed, safety, and resource usage.</p>`,
        keyPoints: [
          { icon: "üîµ", title: "Blue-Green", desc: "Two environments, instant switch. Easy rollback, double resources.", color: "#3b82f6" },
          { icon: "üê§", title: "Canary", desc: "Gradual traffic shift. Early problem detection, complex setup.", color: "#f59e0b" },
          { icon: "üîÑ", title: "Rolling", desc: "One-by-one replacement. No extra capacity, slower rollback.", color: "#22c55e" },
          { icon: "üéõÔ∏è", title: "Feature Flags", desc: "Separate deployment from release. Toggle features independently.", color: "#8b5cf6" }
        ],
        formula: "Risk = Blast Radius √ó Impact Duration",
        strategies: [
          { title: "Match to Risk Tolerance", desc: "Critical services need canary. Internal tools can use rolling." },
          { title: "Automate Rollback", desc: "Automatic rollback on error rate spike or failed health checks." },
          { title: "Progressive Delivery", desc: "Combine canary with automated promotion based on metrics." },
          { title: "Database Compatibility", desc: "Ensure DB schema works with both old and new versions during rollout." }
        ],
        metrics: [
          { level: "Blue-Green", downtime: "Instant switch", useCase: "Stateless services" },
          { level: "Canary", downtime: "1%‚Üí10%‚Üí100%", useCase: "User-facing services" },
          { level: "Rolling", downtime: "Pod by pod", useCase: "Kubernetes default" },
          { level: "Recreate", downtime: "Stop all, start new", useCase: "Dev environments" }
        ]
      },
      "rollbacks": {
        title: "Rollbacks",
        subtitle: "Reverting to a previous version when a deployment causes issues.",
        badge: { text: "DevOps", color: "#84cc16", bg: "rgba(132, 204, 22, 0.15)" },
        color: "#84cc16",
        diagram: `
          <style>
            .rb-viz { display: flex; flex-direction: column; gap: 24px; }
            .rb-timeline { background: rgba(132, 204, 22, 0.1); border-radius: 12px; padding: 16px; }
            .rb-title { font-size: 0.85rem; color: #84cc16; margin-bottom: 12px; font-weight: 600; text-align: center; }
            .rb-versions { display: flex; align-items: center; gap: 8px; justify-content: center; flex-wrap: wrap; }
            .rb-version { background: rgba(30, 35, 50, 0.8); border: 2px solid; border-radius: 8px; padding: 10px 16px; text-align: center; }
            .rb-version-num { font-weight: 600; font-size: 0.9rem; }
            .rb-version-status { font-size: 0.65rem; margin-top: 2px; }
            .rb-arrow { font-size: 1.2rem; }
            .rb-actions { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .rb-action { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(132, 204, 22, 0.3); border-radius: 8px; padding: 12px; width: 140px; text-align: center; }
            .rb-action-icon { font-size: 1.5rem; margin-bottom: 6px; }
            .rb-action-name { font-weight: 600; color: #84cc16; font-size: 0.85rem; }
          </style>
          <div class="rb-viz">
            <div class="rb-timeline">
              <div class="rb-title">‚è™ Rollback Timeline</div>
              <div class="rb-versions">
                <div class="rb-version" style="border-color:#22c55e"><div class="rb-version-num" style="color:#22c55e">v1.2.0</div><div class="rb-version-status" style="color:#22c55e">‚úì Stable</div></div>
                <span class="rb-arrow" style="color:#84cc16">‚Üí</span>
                <div class="rb-version" style="border-color:#ef4444"><div class="rb-version-num" style="color:#ef4444">v1.3.0</div><div class="rb-version-status" style="color:#ef4444">‚úó Failed</div></div>
                <span class="rb-arrow" style="color:#f59e0b">‚ü≤ ROLLBACK</span>
                <div class="rb-version" style="border-color:#22c55e"><div class="rb-version-num" style="color:#22c55e">v1.2.0</div><div class="rb-version-status" style="color:#22c55e">‚úì Restored</div></div>
              </div>
            </div>
            <div class="rb-actions">
              <div class="rb-action"><div class="rb-action-icon">ü§ñ</div><div class="rb-action-name">Automatic</div></div>
              <div class="rb-action"><div class="rb-action-icon">üëÜ</div><div class="rb-action-name">Manual</div></div>
              <div class="rb-action"><div class="rb-action-icon">üîÑ</div><div class="rb-action-name">GitOps Revert</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Rollback</strong> is the process of reverting to a previous known-good version when a new deployment causes problems. Fast rollback capability is essential for maintaining availability.</p><p>Rollback can be automatic (triggered by metrics) or manual (triggered by operators).</p>`,
        keyPoints: [
          { icon: "ü§ñ", title: "Automatic Rollback", desc: "Triggered by error rate spikes, failed health checks, or SLO breach.", color: "#84cc16" },
          { icon: "üëÜ", title: "Manual Rollback", desc: "Operator-triggered when issues are noticed. kubectl rollout undo.", color: "#3b82f6" },
          { icon: "üîÑ", title: "GitOps Revert", desc: "Revert Git commit, CD system applies previous state.", color: "#f59e0b" },
          { icon: "üíæ", title: "DB Rollback", desc: "Schema changes must support both versions during rollback window.", color: "#ef4444" }
        ],
        formula: "MTTR = Detection Time + Decision Time + Rollback Execution",
        strategies: [
          { title: "Keep Previous Version", desc: "Don't delete old images/artifacts until new version is proven stable." },
          { title: "Practice Rollbacks", desc: "Regular rollback drills ensure the process works when needed." },
          { title: "Backward Compatible DB", desc: "Use expand-contract pattern so rollback doesn't break data." },
          { title: "Document Runbooks", desc: "Clear steps for rollback including verification and communication." }
        ],
        metrics: [
          { level: "K8s Rollout", downtime: "kubectl rollout undo", useCase: "Kubernetes deployments" },
          { level: "Git Revert", downtime: "Revert commit + CD", useCase: "GitOps" },
          { level: "Blue-Green Switch", downtime: "Instant traffic flip", useCase: "Blue-green setup" },
          { level: "Feature Flag", downtime: "Toggle off", useCase: "Feature releases" }
        ]
      },
      "environment-parity": {
        title: "Environment Parity",
        subtitle: "Keeping development, staging, and production environments as similar as possible.",
        badge: { text: "DevOps", color: "#84cc16", bg: "rgba(132, 204, 22, 0.15)" },
        color: "#84cc16",
        diagram: `
          <style>
            .ep-viz { display: flex; flex-direction: column; gap: 24px; }
            .ep-envs { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .ep-env { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 140px; text-align: center; }
            .ep-env-icon { font-size: 2rem; margin-bottom: 8px; }
            .ep-env-name { font-weight: 600; font-size: 0.95rem; margin-bottom: 4px; }
            .ep-env-diff { font-size: 0.65rem; color: #a0a0b0; }
            .ep-dev { border: 1px solid rgba(59, 130, 246, 0.3); }
            .ep-dev .ep-env-name { color: #3b82f6; }
            .ep-stg { border: 1px solid rgba(245, 158, 11, 0.3); }
            .ep-stg .ep-env-name { color: #f59e0b; }
            .ep-prd { border: 1px solid rgba(34, 197, 94, 0.3); }
            .ep-prd .ep-env-name { color: #22c55e; }
            .ep-diffs { background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 16px; }
            .ep-diffs-title { font-weight: 600; color: #ef4444; margin-bottom: 8px; text-align: center; font-size: 0.9rem; }
            .ep-diff-list { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }
            .ep-diff { background: rgba(239, 68, 68, 0.2); padding: 6px 12px; border-radius: 4px; font-size: 0.75rem; color: #ef4444; }
          </style>
          <div class="ep-viz">
            <div class="ep-envs">
              <div class="ep-env ep-dev"><div class="ep-env-icon">üíª</div><div class="ep-env-name">Development</div><div class="ep-env-diff">Local machine</div></div>
              <span style="font-size:1.5rem;color:#84cc16;align-self:center">‚âà</span>
              <div class="ep-env ep-stg"><div class="ep-env-icon">üß™</div><div class="ep-env-name">Staging</div><div class="ep-env-diff">Pre-production</div></div>
              <span style="font-size:1.5rem;color:#84cc16;align-self:center">‚âà</span>
              <div class="ep-env ep-prd"><div class="ep-env-icon">üöÄ</div><div class="ep-env-name">Production</div><div class="ep-env-diff">Live traffic</div></div>
            </div>
            <div class="ep-diffs">
              <div class="ep-diffs-title">‚ö†Ô∏è Common Parity Issues</div>
              <div class="ep-diff-list">
                <div class="ep-diff">Different DB versions</div>
                <div class="ep-diff">Missing services</div>
                <div class="ep-diff">Stale test data</div>
                <div class="ep-diff">Different configs</div>
                <div class="ep-diff">Network differences</div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Environment Parity</strong> minimizes differences between development, staging, and production environments. This reduces "works on my machine" problems and catches issues before production.</p><p>Containers, IaC, and standardized configurations help achieve parity.</p>`,
        keyPoints: [
          { icon: "üê≥", title: "Containers", desc: "Same container image runs everywhere. Consistent dependencies.", color: "#84cc16" },
          { icon: "üìù", title: "IaC", desc: "Infrastructure defined in code, replicated across environments.", color: "#3b82f6" },
          { icon: "‚öôÔ∏è", title: "Config Management", desc: "Same configs with env-specific values injected at runtime.", color: "#f59e0b" },
          { icon: "üóÑÔ∏è", title: "Data Parity", desc: "Production-like data (anonymized) in lower environments.", color: "#8b5cf6" }
        ],
        formula: "Parity = Same Code + Same Config + Same Infra + Same Data Shape",
        strategies: [
          { title: "Use Containers", desc: "Docker ensures same runtime, dependencies, and configuration." },
          { title: "Shared IaC Modules", desc: "Same Terraform modules for all environments with different variables." },
          { title: "Service Virtualization", desc: "Mock external services that can't be replicated in staging." },
          { title: "Synthetic Data", desc: "Generate realistic test data matching production patterns." }
        ],
        metrics: [
          { level: "Image Parity", downtime: "Same container image", useCase: "Runtime consistency" },
          { level: "Config Parity", downtime: "Same structure, diff values", useCase: "Behavior consistency" },
          { level: "Data Parity", downtime: "Anonymized prod data", useCase: "Realistic testing" },
          { level: "Infra Parity", downtime: "Same IaC, diff scale", useCase: "Architecture consistency" }
        ]
      },
      "config-management": {
        title: "Config Management",
        subtitle: "Externalizing and managing application configuration separately from code.",
        badge: { text: "DevOps", color: "#84cc16", bg: "rgba(132, 204, 22, 0.15)" },
        color: "#84cc16",
        diagram: `
          <style>
            .cm-viz { display: flex; flex-direction: column; gap: 24px; }
            .cm-sources { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .cm-source { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(132, 204, 22, 0.3); border-radius: 10px; padding: 14px; width: 130px; text-align: center; }
            .cm-source-icon { font-size: 1.5rem; margin-bottom: 6px; }
            .cm-source-name { font-weight: 600; color: #84cc16; font-size: 0.85rem; margin-bottom: 2px; }
            .cm-source-desc { font-size: 0.65rem; color: #a0a0b0; }
            .cm-12factor { background: rgba(132, 204, 22, 0.1); border-radius: 12px; padding: 16px; text-align: center; }
            .cm-12factor-title { font-weight: 600; color: #84cc16; margin-bottom: 8px; }
            .cm-12factor-desc { font-size: 0.8rem; color: #a0a0b0; }
          </style>
          <div class="cm-viz">
            <div class="cm-sources">
              <div class="cm-source"><div class="cm-source-icon">üåç</div><div class="cm-source-name">Env Vars</div><div class="cm-source-desc">12-factor standard</div></div>
              <div class="cm-source"><div class="cm-source-icon">üìÑ</div><div class="cm-source-name">Config Files</div><div class="cm-source-desc">YAML, JSON, TOML</div></div>
              <div class="cm-source"><div class="cm-source-icon">üóÑÔ∏è</div><div class="cm-source-name">ConfigMaps</div><div class="cm-source-desc">Kubernetes native</div></div>
              <div class="cm-source"><div class="cm-source-icon">‚òÅÔ∏è</div><div class="cm-source-name">Config Service</div><div class="cm-source-desc">Consul, Spring Cloud</div></div>
            </div>
            <div class="cm-12factor">
              <div class="cm-12factor-title">üìã 12-Factor App: Config</div>
              <div class="cm-12factor-desc">"Store config in the environment. Strict separation of config from code."</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Config Management</strong> externalizes configuration from application code, allowing the same codebase to run in different environments with different settings.</p><p>This enables environment-specific behavior without code changes and supports secure handling of sensitive values.</p>`,
        keyPoints: [
          { icon: "üåç", title: "Environment Variables", desc: "12-factor standard. Simple, works everywhere.", color: "#84cc16" },
          { icon: "üóÑÔ∏è", title: "ConfigMaps/Secrets", desc: "Kubernetes-native configuration and secret injection.", color: "#3b82f6" },
          { icon: "‚òÅÔ∏è", title: "Config Services", desc: "Centralized config with versioning, audit, and dynamic refresh.", color: "#f59e0b" },
          { icon: "üîê", title: "Secret Separation", desc: "Sensitive config (passwords, keys) stored separately in vaults.", color: "#ef4444" }
        ],
        formula: "Config = Environment Variables + Config Files + Secrets",
        strategies: [
          { title: "Environment Variables", desc: "Use for simple, environment-specific values. 12-factor approach." },
          { title: "Config Files for Complex", desc: "Structured config (lists, nested) in files mounted at runtime." },
          { title: "Secrets Separately", desc: "Use vault or secrets manager for sensitive values, not env vars." },
          { title: "Validate at Startup", desc: "Fail fast if required config is missing or invalid." }
        ],
        metrics: [
          { level: "Env Vars", downtime: "Simple, universal", useCase: "Basic config" },
          { level: "ConfigMaps", downtime: "K8s native, versioned", useCase: "Kubernetes" },
          { level: "Consul", downtime: "Distributed, dynamic", useCase: "Service mesh" },
          { level: "AWS SSM", downtime: "AWS native, hierarchical", useCase: "AWS workloads" }
        ]
      },
      "feature-flags": {
        title: "Feature Flags",
        subtitle: "Controlling feature rollout independently from code deployment.",
        badge: { text: "DevOps", color: "#84cc16", bg: "rgba(132, 204, 22, 0.15)" },
        color: "#84cc16",
        diagram: `
          <style>
            .ff-viz { display: flex; flex-direction: column; gap: 24px; }
            .ff-demo { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(132, 204, 22, 0.3); border-radius: 12px; padding: 16px; }
            .ff-demo-title { font-weight: 600; color: #84cc16; margin-bottom: 12px; text-align: center; }
            .ff-flags { display: flex; flex-direction: column; gap: 8px; }
            .ff-flag { display: flex; align-items: center; justify-content: space-between; padding: 10px 14px; background: rgba(30, 35, 50, 0.8); border-radius: 6px; }
            .ff-flag-name { font-size: 0.85rem; color: #e5e5e5; }
            .ff-toggle { width: 48px; height: 24px; border-radius: 12px; position: relative; }
            .ff-toggle-on { background: #22c55e; }
            .ff-toggle-off { background: #6b7280; }
            .ff-toggle::after { content: ''; position: absolute; width: 20px; height: 20px; background: white; border-radius: 50%; top: 2px; }
            .ff-toggle-on::after { right: 2px; }
            .ff-toggle-off::after { left: 2px; }
            .ff-types { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .ff-type { background: rgba(30, 35, 50, 0.8); border: 1px solid rgba(132, 204, 22, 0.2); border-radius: 8px; padding: 10px 14px; text-align: center; width: 110px; }
            .ff-type-icon { font-size: 1.2rem; margin-bottom: 4px; }
            .ff-type-name { font-size: 0.75rem; color: #84cc16; font-weight: 600; }
          </style>
          <div class="ff-viz">
            <div class="ff-demo">
              <div class="ff-demo-title">üéõÔ∏è Feature Flags Dashboard</div>
              <div class="ff-flags">
                <div class="ff-flag"><span class="ff-flag-name">new_checkout_flow</span><div class="ff-toggle ff-toggle-on"></div></div>
                <div class="ff-flag"><span class="ff-flag-name">dark_mode</span><div class="ff-toggle ff-toggle-on"></div></div>
                <div class="ff-flag"><span class="ff-flag-name">experimental_search</span><div class="ff-toggle ff-toggle-off"></div></div>
              </div>
            </div>
            <div class="ff-types">
              <div class="ff-type"><div class="ff-type-icon">üîÄ</div><div class="ff-type-name">Boolean</div></div>
              <div class="ff-type"><div class="ff-type-icon">üé≤</div><div class="ff-type-name">Percentage</div></div>
              <div class="ff-type"><div class="ff-type-icon">üë•</div><div class="ff-type-name">User Segment</div></div>
              <div class="ff-type"><div class="ff-type-icon">üî¢</div><div class="ff-type-name">Multivariate</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Feature Flags</strong> (toggles) allow enabling or disabling features at runtime without deploying new code. This decouples deployment from release and enables gradual rollouts.</p><p>They're essential for trunk-based development, A/B testing, and quick feature disabling during incidents.</p>`,
        keyPoints: [
          { icon: "üîÄ", title: "Release Flags", desc: "Enable features for specific users or percentages. Gradual rollout.", color: "#84cc16" },
          { icon: "üß™", title: "Experiment Flags", desc: "A/B testing with different variants for different users.", color: "#3b82f6" },
          { icon: "üîß", title: "Ops Flags", desc: "Disable expensive features during incidents. Circuit breaker.", color: "#f59e0b" },
          { icon: "üóëÔ∏è", title: "Flag Cleanup", desc: "Remove flags after feature is fully rolled out. Tech debt otherwise.", color: "#ef4444" }
        ],
        formula: "if (featureFlag.isEnabled(user)) { newFeature() } else { oldFeature() }",
        strategies: [
          { title: "Trunk-Based Development", desc: "Merge incomplete features to main with flags off. Deploy anytime." },
          { title: "Gradual Rollout", desc: "Enable for 1%, 10%, 50%, 100% while monitoring metrics." },
          { title: "Kill Switch", desc: "Instantly disable problematic features without deployment." },
          { title: "Clean Up Flags", desc: "Remove flag code after full rollout. Track flag lifecycle." }
        ],
        metrics: [
          { level: "LaunchDarkly", downtime: "Full-featured SaaS", useCase: "Enterprise" },
          { level: "Flagsmith", downtime: "Open source option", useCase: "Self-hosted" },
          { level: "Split", downtime: "Experimentation focus", useCase: "A/B testing" },
          { level: "ConfigCat", downtime: "Simple, affordable", useCase: "Small teams" }
        ]
      },
      "api-versioning": {
        title: "API Versioning",
        subtitle: "Strategies for evolving APIs while maintaining backward compatibility.",
        badge: { text: "API", color: "#6366f1", bg: "rgba(99, 102, 241, 0.15)" },
        color: "#6366f1",
        diagram: `
          <style>
            .av-viz { display: flex; flex-direction: column; gap: 24px; }
            .av-strategies { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .av-strategy { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 12px; padding: 16px; width: 180px; text-align: center; }
            .av-strategy-name { font-weight: 600; color: #6366f1; font-size: 0.95rem; margin-bottom: 8px; }
            .av-strategy-example { background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; font-family: monospace; font-size: 0.7rem; color: #e5e5e5; margin-bottom: 8px; }
            .av-strategy-pros { font-size: 0.7rem; color: #22c55e; }
            .av-strategy-cons { font-size: 0.7rem; color: #ef4444; margin-top: 4px; }
          </style>
          <div class="av-viz">
            <div class="av-strategies">
              <div class="av-strategy">
                <div class="av-strategy-name">URL Path</div>
                <div class="av-strategy-example">/api/v1/users<br>/api/v2/users</div>
                <div class="av-strategy-pros">‚úì Clear, cacheable</div>
                <div class="av-strategy-cons">‚úó URL changes</div>
              </div>
              <div class="av-strategy">
                <div class="av-strategy-name">Query Param</div>
                <div class="av-strategy-example">/api/users?version=2</div>
                <div class="av-strategy-pros">‚úì Same URL</div>
                <div class="av-strategy-cons">‚úó Cache issues</div>
              </div>
              <div class="av-strategy">
                <div class="av-strategy-name">Header</div>
                <div class="av-strategy-example">Accept: application/<br>vnd.api.v2+json</div>
                <div class="av-strategy-pros">‚úì Clean URLs</div>
                <div class="av-strategy-cons">‚úó Less visible</div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>API Versioning</strong> allows evolving APIs while supporting existing clients. Different strategies have trade-offs between visibility, caching, and client experience.</p><p>Good versioning minimizes breaking changes and provides clear upgrade paths.</p>`,
        keyPoints: [
          { icon: "üîó", title: "URL Versioning", desc: "Version in path (/v1/, /v2/). Most visible and cacheable.", color: "#6366f1" },
          { icon: "üìã", title: "Header Versioning", desc: "Version in Accept header. Clean URLs, less discoverable.", color: "#3b82f6" },
          { icon: "üî¢", title: "Semantic Versioning", desc: "Major.Minor.Patch. Major = breaking, minor = additive.", color: "#f59e0b" },
          { icon: "üìÖ", title: "Date-Based", desc: "Version by date (2024-01-15). Used by Stripe, Twilio.", color: "#10b981" }
        ],
        formula: "Breaking Change = Removal + Rename + Type Change",
        strategies: [
          { title: "Avoid Breaking Changes", desc: "Add fields, don't remove. Use deprecation before removal." },
          { title: "Version Major Changes Only", desc: "Minor additions don't need new version. Use extensions." },
          { title: "Sunset Policy", desc: "Define how long old versions are supported. Communicate clearly." },
          { title: "Document Migration", desc: "Provide clear guides for upgrading between versions." }
        ],
        metrics: [
          { level: "URL Path", downtime: "/api/v1/", useCase: "Public APIs" },
          { level: "Header", downtime: "Accept-Version", useCase: "Internal APIs" },
          { level: "Query Param", downtime: "?version=2", useCase: "Simple APIs" },
          { level: "Date-Based", downtime: "2024-01-15", useCase: "Stripe-style" }
        ]
      },
      "contract-testing": {
        title: "Contract Testing",
        subtitle: "Verifying that services conform to agreed API contracts.",
        badge: { text: "API", color: "#6366f1", bg: "rgba(99, 102, 241, 0.15)" },
        color: "#6366f1",
        diagram: `
          <style>
            .ct-viz { display: flex; flex-direction: column; gap: 24px; }
            .ct-flow { background: rgba(99, 102, 241, 0.1); border-radius: 12px; padding: 20px; }
            .ct-title { font-size: 0.85rem; color: #6366f1; margin-bottom: 16px; font-weight: 600; text-align: center; }
            .ct-parties { display: flex; align-items: center; justify-content: center; gap: 16px; flex-wrap: wrap; }
            .ct-party { background: rgba(30, 35, 50, 0.8); border: 2px solid; border-radius: 10px; padding: 14px 20px; text-align: center; }
            .ct-party-icon { font-size: 1.5rem; margin-bottom: 4px; }
            .ct-party-name { font-weight: 600; font-size: 0.9rem; }
            .ct-consumer { border-color: #3b82f6; }
            .ct-consumer .ct-party-name { color: #3b82f6; }
            .ct-provider { border-color: #22c55e; }
            .ct-provider .ct-party-name { color: #22c55e; }
            .ct-contract { background: #6366f1; color: white; padding: 12px 20px; border-radius: 8px; font-weight: 600; }
            .ct-arrow { color: #6366f1; font-size: 1.5rem; }
          </style>
          <div class="ct-viz">
            <div class="ct-flow">
              <div class="ct-title">Consumer-Driven Contract Testing</div>
              <div class="ct-parties">
                <div class="ct-party ct-consumer"><div class="ct-party-icon">üì±</div><div class="ct-party-name">Consumer</div></div>
                <span class="ct-arrow">‚Üí</span>
                <div class="ct-contract">üìù Contract</div>
                <span class="ct-arrow">‚Üê</span>
                <div class="ct-party ct-provider"><div class="ct-party-icon">üñ•Ô∏è</div><div class="ct-party-name">Provider</div></div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Contract Testing</strong> verifies that a provider's API conforms to the expectations of its consumers. Consumer-driven contracts ensure providers don't break consumer integrations.</p><p>It enables independent deployment of services while maintaining compatibility.</p>`,
        keyPoints: [
          { icon: "üìù", title: "Contract", desc: "Formal specification of expected requests and responses.", color: "#6366f1" },
          { icon: "üì±", title: "Consumer-Driven", desc: "Consumers define what they need. Providers verify they satisfy it.", color: "#3b82f6" },
          { icon: "‚úÖ", title: "Independent Testing", desc: "Test against contracts without needing all services running.", color: "#22c55e" },
          { icon: "üîÑ", title: "Pact Broker", desc: "Central repository for contracts, versioning, and verification.", color: "#f59e0b" }
        ],
        formula: "Contract = Consumer Expectations + Provider Guarantees",
        strategies: [
          { title: "Consumer First", desc: "Consumers define contracts based on what they actually use." },
          { title: "Test in CI", desc: "Run contract verification in CI before deployment." },
          { title: "Version Contracts", desc: "Track contract versions to enable safe evolution." },
          { title: "Can-I-Deploy", desc: "Use Pact's can-i-deploy to check compatibility before release." }
        ],
        metrics: [
          { level: "Pact", downtime: "Consumer-driven", useCase: "Microservices" },
          { level: "Spring Cloud Contract", downtime: "JVM ecosystem", useCase: "Spring apps" },
          { level: "OpenAPI", downtime: "Spec-driven", useCase: "REST APIs" },
          { level: "Protolock", downtime: "Proto changes", useCase: "gRPC" }
        ]
      },
      "idempotent-apis": {
        title: "Idempotent APIs",
        subtitle: "Designing APIs where repeated calls produce the same result.",
        badge: { text: "API", color: "#6366f1", bg: "rgba(99, 102, 241, 0.15)" },
        color: "#6366f1",
        diagram: `
          <style>
            .ia-viz { display: flex; flex-direction: column; gap: 24px; }
            .ia-methods { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .ia-method { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 10px; padding: 14px; width: 110px; text-align: center; }
            .ia-method-name { font-weight: 700; font-size: 1rem; margin-bottom: 6px; }
            .ia-method-idem { font-size: 0.75rem; padding: 4px 8px; border-radius: 4px; }
            .ia-yes { border: 1px solid #22c55e; }
            .ia-yes .ia-method-name { color: #22c55e; }
            .ia-yes .ia-method-idem { background: rgba(34, 197, 94, 0.2); color: #22c55e; }
            .ia-no { border: 1px solid #ef4444; }
            .ia-no .ia-method-name { color: #ef4444; }
            .ia-no .ia-method-idem { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
            .ia-key { background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 12px; padding: 16px; text-align: center; }
            .ia-key-title { font-weight: 600; color: #6366f1; margin-bottom: 8px; }
            .ia-key-example { font-family: monospace; font-size: 0.75rem; color: #a0a0b0; }
          </style>
          <div class="ia-viz">
            <div class="ia-methods">
              <div class="ia-method ia-yes"><div class="ia-method-name">GET</div><div class="ia-method-idem">Idempotent ‚úì</div></div>
              <div class="ia-method ia-yes"><div class="ia-method-name">PUT</div><div class="ia-method-idem">Idempotent ‚úì</div></div>
              <div class="ia-method ia-yes"><div class="ia-method-name">DELETE</div><div class="ia-method-idem">Idempotent ‚úì</div></div>
              <div class="ia-method ia-no"><div class="ia-method-name">POST</div><div class="ia-method-idem">Not by default</div></div>
            </div>
            <div class="ia-key">
              <div class="ia-key-title">üîë Idempotency Key Pattern</div>
              <div class="ia-key-example">POST /payments<br>Idempotency-Key: 550e8400-e29b-41d4-a716-446655440000</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Idempotent APIs</strong> produce the same result regardless of how many times the same request is made. This is crucial for reliability in distributed systems where retries are common.</p><p>HTTP methods GET, PUT, DELETE are naturally idempotent. POST needs explicit design.</p>`,
        keyPoints: [
          { icon: "üîë", title: "Idempotency Key", desc: "Client-generated UUID sent with request to detect duplicates.", color: "#6366f1" },
          { icon: "üíæ", title: "Store Results", desc: "Cache response by idempotency key, return cached on retry.", color: "#3b82f6" },
          { icon: "‚è±Ô∏è", title: "TTL", desc: "Keys expire after reasonable time (24-48h typically).", color: "#f59e0b" },
          { icon: "üîí", title: "Atomic Operations", desc: "Check and create in single transaction to prevent races.", color: "#22c55e" }
        ],
        formula: "f(x) = f(f(x)) ‚Äî Same result on retry",
        strategies: [
          { title: "Require for POST", desc: "Make Idempotency-Key header required for non-idempotent operations." },
          { title: "Return Same Response", desc: "Store and return exact same response for duplicate requests." },
          { title: "Use Unique Keys", desc: "Client generates UUID. Server rejects reused keys from different requests." },
          { title: "Handle Concurrent", desc: "Use locking or upsert to handle parallel requests with same key." }
        ],
        metrics: [
          { level: "GET", downtime: "Safe + Idempotent", useCase: "Read operations" },
          { level: "PUT", downtime: "Idempotent", useCase: "Full replace" },
          { level: "DELETE", downtime: "Idempotent", useCase: "Remove resource" },
          { level: "POST + Key", downtime: "Made idempotent", useCase: "Create operations" }
        ]
      },
      "pagination": {
        title: "Pagination & Filtering",
        subtitle: "Efficiently returning large datasets in manageable chunks.",
        badge: { text: "API", color: "#6366f1", bg: "rgba(99, 102, 241, 0.15)" },
        color: "#6366f1",
        diagram: `
          <style>
            .pg-viz { display: flex; flex-direction: column; gap: 24px; }
            .pg-types { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .pg-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 12px; padding: 16px; width: 160px; text-align: center; }
            .pg-type-name { font-weight: 600; color: #6366f1; font-size: 0.95rem; margin-bottom: 8px; }
            .pg-type-example { background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; font-family: monospace; font-size: 0.65rem; color: #a0a0b0; margin-bottom: 8px; }
            .pg-type-desc { font-size: 0.7rem; color: #a0a0b0; }
            .pg-filter { background: rgba(99, 102, 241, 0.1); border-radius: 12px; padding: 16px; }
            .pg-filter-title { font-weight: 600; color: #6366f1; margin-bottom: 8px; text-align: center; }
            .pg-filter-example { font-family: monospace; font-size: 0.75rem; color: #e5e5e5; text-align: center; }
          </style>
          <div class="pg-viz">
            <div class="pg-types">
              <div class="pg-type">
                <div class="pg-type-name">Offset</div>
                <div class="pg-type-example">?offset=20&limit=10</div>
                <div class="pg-type-desc">Simple but slow for large offsets</div>
              </div>
              <div class="pg-type">
                <div class="pg-type-name">Cursor</div>
                <div class="pg-type-example">?cursor=abc123</div>
                <div class="pg-type-desc">Stable, efficient for large data</div>
              </div>
              <div class="pg-type">
                <div class="pg-type-name">Keyset</div>
                <div class="pg-type-example">?after_id=1000</div>
                <div class="pg-type-desc">Best for sorted data</div>
              </div>
            </div>
            <div class="pg-filter">
              <div class="pg-filter-title">üîç Filtering & Sorting</div>
              <div class="pg-filter-example">GET /users?status=active&sort=-created_at&fields=id,name,email</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Pagination</strong> breaks large result sets into smaller pages. <strong>Filtering</strong> allows clients to request only matching records. <strong>Field selection</strong> returns only needed fields.</p><p>Together they optimize bandwidth, latency, and server resources.</p>`,
        keyPoints: [
          { icon: "üìÑ", title: "Offset Pagination", desc: "Simple but O(n) for large offsets. Good for UI page numbers.", color: "#6366f1" },
          { icon: "üîñ", title: "Cursor Pagination", desc: "Opaque token for next page. Stable during data changes.", color: "#3b82f6" },
          { icon: "üîë", title: "Keyset Pagination", desc: "Use indexed column (id, timestamp) for efficient seek.", color: "#22c55e" },
          { icon: "üîç", title: "Filtering", desc: "Query params for filtering. Support common operators (eq, gt, contains).", color: "#f59e0b" }
        ],
        formula: "Response = { data: [...], pagination: { cursor, hasMore } }",
        strategies: [
          { title: "Use Cursor for Infinite Scroll", desc: "More efficient than offset for large datasets and changing data." },
          { title: "Limit Max Page Size", desc: "Enforce max limit (100-1000) to prevent abuse." },
          { title: "Include Total Count Carefully", desc: "COUNT(*) is expensive. Make it optional or estimate." },
          { title: "Support Field Selection", desc: "?fields=id,name reduces payload and processing." }
        ],
        metrics: [
          { level: "Offset", downtime: "?page=5&limit=10", useCase: "UI pagination" },
          { level: "Cursor", downtime: "?cursor=xyz", useCase: "Infinite scroll" },
          { level: "Keyset", downtime: "?after_id=100", useCase: "Time-series" },
          { level: "GraphQL", downtime: "Connections spec", useCase: "GraphQL APIs" }
        ]
      },
      "webhooks": {
        title: "Webhooks",
        subtitle: "Server-to-server callbacks triggered by events.",
        badge: { text: "API", color: "#6366f1", bg: "rgba(99, 102, 241, 0.15)" },
        color: "#6366f1",
        diagram: `
          <style>
            .wh-viz { display: flex; flex-direction: column; gap: 24px; }
            .wh-flow { background: rgba(99, 102, 241, 0.1); border-radius: 12px; padding: 20px; }
            .wh-title { font-size: 0.85rem; color: #6366f1; margin-bottom: 16px; font-weight: 600; text-align: center; }
            .wh-steps { display: flex; align-items: center; gap: 8px; justify-content: center; flex-wrap: wrap; }
            .wh-step { background: rgba(30, 35, 50, 0.8); border: 2px solid #6366f1; border-radius: 8px; padding: 10px 14px; text-align: center; }
            .wh-step-icon { font-size: 1.2rem; margin-bottom: 2px; }
            .wh-step-name { font-size: 0.75rem; color: #e5e5e5; }
            .wh-arrow { color: #6366f1; font-size: 1.2rem; }
            .wh-security { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .wh-sec { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 8px; padding: 10px 14px; text-align: center; width: 120px; }
            .wh-sec-icon { font-size: 1.3rem; margin-bottom: 4px; }
            .wh-sec-name { font-size: 0.75rem; color: #6366f1; font-weight: 600; }
          </style>
          <div class="wh-viz">
            <div class="wh-flow">
              <div class="wh-title">üì® Webhook Flow</div>
              <div class="wh-steps">
                <div class="wh-step"><div class="wh-step-icon">‚ö°</div><div class="wh-step-name">Event Occurs</div></div>
                <span class="wh-arrow">‚Üí</span>
                <div class="wh-step"><div class="wh-step-icon">üìù</div><div class="wh-step-name">Build Payload</div></div>
                <span class="wh-arrow">‚Üí</span>
                <div class="wh-step"><div class="wh-step-icon">üì§</div><div class="wh-step-name">POST to URL</div></div>
                <span class="wh-arrow">‚Üí</span>
                <div class="wh-step"><div class="wh-step-icon">‚úÖ</div><div class="wh-step-name">Confirm 2xx</div></div>
              </div>
            </div>
            <div class="wh-security">
              <div class="wh-sec"><div class="wh-sec-icon">üîê</div><div class="wh-sec-name">Signature</div></div>
              <div class="wh-sec"><div class="wh-sec-icon">üîÑ</div><div class="wh-sec-name">Retries</div></div>
              <div class="wh-sec"><div class="wh-sec-icon">‚è±Ô∏è</div><div class="wh-sec-name">Timeouts</div></div>
              <div class="wh-sec"><div class="wh-sec-icon">üìã</div><div class="wh-sec-name">Idempotency</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Webhooks</strong> are HTTP callbacks triggered by events. Instead of polling, servers push notifications to registered URLs when something happens.</p><p>They enable real-time integrations but require careful handling of security, retries, and failures.</p>`,
        keyPoints: [
          { icon: "üîê", title: "Signature Verification", desc: "HMAC signature proves webhook came from the expected sender.", color: "#6366f1" },
          { icon: "üîÑ", title: "Retry Logic", desc: "Retry on failure with exponential backoff. Track delivery status.", color: "#3b82f6" },
          { icon: "üìã", title: "Idempotency", desc: "Include event ID. Receivers should handle duplicates.", color: "#f59e0b" },
          { icon: "‚è±Ô∏è", title: "Timeouts", desc: "Short timeout (5-30s). Long processing should be async.", color: "#22c55e" }
        ],
        formula: "Webhook = Event Trigger + HTTP POST + Signature + Retry",
        strategies: [
          { title: "Sign All Webhooks", desc: "HMAC-SHA256 signature for authenticity verification." },
          { title: "Retry with Backoff", desc: "Retry 5-10 times over hours/days with exponential delay." },
          { title: "Provide Event Replay", desc: "API to resend missed webhooks for debugging and recovery." },
          { title: "Use Event IDs", desc: "Unique IDs allow receivers to deduplicate and track." }
        ],
        metrics: [
          { level: "Svix", downtime: "Webhook infrastructure", useCase: "Platform providers" },
          { level: "Hookdeck", downtime: "Webhook management", useCase: "Debugging" },
          { level: "Custom", downtime: "Queue + workers", useCase: "Self-hosted" },
          { level: "EventBridge", downtime: "AWS native", useCase: "AWS integrations" }
        ]
      },
      "grpc-rest": {
        title: "gRPC vs REST",
        subtitle: "Comparing API paradigms for different use cases.",
        badge: { text: "API", color: "#6366f1", bg: "rgba(99, 102, 241, 0.15)" },
        color: "#6366f1",
        diagram: `
          <style>
            .gr-viz { display: flex; flex-direction: column; gap: 24px; }
            .gr-compare { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
            .gr-api { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 20px; width: 200px; }
            .gr-api-name { font-weight: 600; font-size: 1.1rem; margin-bottom: 12px; text-align: center; }
            .gr-api-features { font-size: 0.75rem; }
            .gr-api-feature { padding: 6px 0; border-bottom: 1px solid rgba(100,100,120,0.2); }
            .gr-api-feature:last-child { border-bottom: none; }
            .gr-rest { border: 1px solid rgba(59, 130, 246, 0.3); }
            .gr-rest .gr-api-name { color: #3b82f6; }
            .gr-grpc { border: 1px solid rgba(34, 197, 94, 0.3); }
            .gr-grpc .gr-api-name { color: #22c55e; }
          </style>
          <div class="gr-viz">
            <div class="gr-compare">
              <div class="gr-api gr-rest">
                <div class="gr-api-name">REST</div>
                <div class="gr-api-features">
                  <div class="gr-api-feature">üìù JSON (human-readable)</div>
                  <div class="gr-api-feature">üåê HTTP/1.1</div>
                  <div class="gr-api-feature">üìñ OpenAPI docs</div>
                  <div class="gr-api-feature">üîß Browser friendly</div>
                  <div class="gr-api-feature">üì¶ Larger payloads</div>
                </div>
              </div>
              <div class="gr-api gr-grpc">
                <div class="gr-api-name">gRPC</div>
                <div class="gr-api-features">
                  <div class="gr-api-feature">‚ö° Protobuf (binary)</div>
                  <div class="gr-api-feature">üöÄ HTTP/2</div>
                  <div class="gr-api-feature">üìã Strongly typed</div>
                  <div class="gr-api-feature">üîÑ Streaming</div>
                  <div class="gr-api-feature">üìâ Smaller payloads</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>REST</strong> uses HTTP methods and JSON for web APIs, optimized for simplicity and browser compatibility. <strong>gRPC</strong> uses Protocol Buffers and HTTP/2 for high-performance service communication.</p><p>Choose based on use case: REST for public APIs, gRPC for internal microservices.</p>`,
        keyPoints: [
          { icon: "üìù", title: "REST/JSON", desc: "Human-readable, browser-friendly, widely understood. Larger payloads.", color: "#3b82f6" },
          { icon: "‚ö°", title: "gRPC/Protobuf", desc: "Binary, strongly typed, smaller payloads. 10x faster serialization.", color: "#22c55e" },
          { icon: "üîÑ", title: "Streaming", desc: "gRPC has native bidirectional streaming. REST needs WebSocket.", color: "#f59e0b" },
          { icon: "üåê", title: "Tooling", desc: "REST: widespread, easy debugging. gRPC: code generation, type safety.", color: "#8b5cf6" }
        ],
        formula: "Choose gRPC for internal, REST for external APIs",
        strategies: [
          { title: "gRPC for Internal", desc: "Service-to-service communication benefits from speed and types." },
          { title: "REST for Public", desc: "External APIs need accessibility, documentation, debugging." },
          { title: "gRPC-Web for Browsers", desc: "gRPC-Web or gRPC-Gateway for browser clients." },
          { title: "GraphQL Alternative", desc: "Consider GraphQL for flexible queries and client-driven data needs." }
        ],
        metrics: [
          { level: "REST", downtime: "HTTP/1.1, JSON", useCase: "Public APIs, web" },
          { level: "gRPC", downtime: "HTTP/2, Protobuf", useCase: "Microservices" },
          { level: "GraphQL", downtime: "Query language", useCase: "Flexible clients" },
          { level: "tRPC", downtime: "TypeScript native", useCase: "TS full-stack" }
        ]
      },
      "backward-compatibility": {
        title: "Backward Compatibility",
        subtitle: "Ensuring new API versions work with existing clients.",
        badge: { text: "API", color: "#6366f1", bg: "rgba(99, 102, 241, 0.15)" },
        color: "#6366f1",
        diagram: `
          <style>
            .bc-viz { display: flex; flex-direction: column; gap: 24px; }
            .bc-changes { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
            .bc-change { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 10px; padding: 14px; width: 150px; text-align: center; }
            .bc-change-type { font-weight: 600; font-size: 0.9rem; margin-bottom: 8px; }
            .bc-change-list { font-size: 0.7rem; color: #a0a0b0; text-align: left; }
            .bc-safe { border: 1px solid rgba(34, 197, 94, 0.3); }
            .bc-safe .bc-change-type { color: #22c55e; }
            .bc-breaking { border: 1px solid rgba(239, 68, 68, 0.3); }
            .bc-breaking .bc-change-type { color: #ef4444; }
            .bc-rule { background: rgba(99, 102, 241, 0.1); border-radius: 12px; padding: 16px; text-align: center; }
            .bc-rule-text { font-size: 0.9rem; color: #6366f1; font-weight: 600; }
          </style>
          <div class="bc-viz">
            <div class="bc-changes">
              <div class="bc-change bc-safe">
                <div class="bc-change-type">‚úì Safe Changes</div>
                <div class="bc-change-list">‚Ä¢ Add optional field<br>‚Ä¢ Add new endpoint<br>‚Ä¢ Add enum value<br>‚Ä¢ Widen type (int‚Üílong)</div>
              </div>
              <div class="bc-change bc-breaking">
                <div class="bc-change-type">‚úó Breaking Changes</div>
                <div class="bc-change-list">‚Ä¢ Remove field<br>‚Ä¢ Rename field<br>‚Ä¢ Change type<br>‚Ä¢ Make optional required</div>
              </div>
            </div>
            <div class="bc-rule">
              <div class="bc-rule-text">üìã Be liberal in what you accept, conservative in what you send</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Backward Compatibility</strong> ensures new API versions continue to work with existing clients. Breaking this trust forces clients to update, causing friction and potential outages.</p><p>Additive changes are safe; removals and modifications are dangerous.</p>`,
        keyPoints: [
          { icon: "‚ûï", title: "Additive Safe", desc: "New optional fields, endpoints, enum values don't break clients.", color: "#22c55e" },
          { icon: "‚ûñ", title: "Removal Breaks", desc: "Removing or renaming fields breaks clients expecting them.", color: "#ef4444" },
          { icon: "üîÑ", title: "Deprecation", desc: "Mark as deprecated, maintain for grace period, then remove.", color: "#f59e0b" },
          { icon: "üìã", title: "Postel's Law", desc: "Be liberal in what you accept, conservative in what you send.", color: "#6366f1" }
        ],
        formula: "Compatibility = Old Client + New Server = Works",
        strategies: [
          { title: "Add, Don't Remove", desc: "Add new fields/endpoints. Keep old ones working." },
          { title: "Ignore Unknown Fields", desc: "Clients should ignore fields they don't recognize." },
          { title: "Deprecation Period", desc: "Announce deprecation, wait 6-12 months, then remove." },
          { title: "Automated Checks", desc: "CI checks for breaking changes in OpenAPI/Proto schemas." }
        ],
        metrics: [
          { level: "Adding field", downtime: "Safe if optional", useCase: "Feature additions" },
          { level: "Removing field", downtime: "Breaking", useCase: "Needs versioning" },
          { level: "Type widening", downtime: "Usually safe", useCase: "int32 ‚Üí int64" },
          { level: "Type narrowing", downtime: "Breaking", useCase: "Avoid" }
        ]
      },
      "horizontal-vertical": {
        title: "Horizontal vs Vertical Scaling",
        subtitle: "Choosing between scaling out with more machines or scaling up with bigger machines.",
        badge: { text: "Scalability", color: "#f97316", bg: "rgba(249, 115, 22, 0.15)" },
        color: "#f97316",
        diagram: `
          <style>
            .hv-viz { display: flex; flex-direction: column; gap: 24px; }
            .hv-compare { display: flex; gap: 24px; justify-content: center; flex-wrap: wrap; }
            .hv-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 20px; width: 200px; text-align: center; }
            .hv-type-name { font-weight: 600; font-size: 1.1rem; margin-bottom: 12px; }
            .hv-visual { display: flex; gap: 4px; justify-content: center; margin-bottom: 12px; }
            .hv-box { width: 30px; height: 30px; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.7rem; }
            .hv-features { font-size: 0.75rem; text-align: left; }
            .hv-feature { padding: 4px 0; }
            .hv-vert { border: 1px solid rgba(59, 130, 246, 0.3); }
            .hv-vert .hv-type-name { color: #3b82f6; }
            .hv-horz { border: 1px solid rgba(249, 115, 22, 0.3); }
            .hv-horz .hv-type-name { color: #f97316; }
          </style>
          <div class="hv-viz">
            <div class="hv-compare">
              <div class="hv-type hv-vert">
                <div class="hv-type-name">‚¨ÜÔ∏è Vertical</div>
                <div class="hv-visual"><div class="hv-box" style="background:#3b82f6;width:60px;height:60px;font-size:1rem">BIG</div></div>
                <div class="hv-features">
                  <div class="hv-feature">‚úì Simple, no code changes</div>
                  <div class="hv-feature">‚úì No distributed systems</div>
                  <div class="hv-feature">‚úó Hardware limits</div>
                  <div class="hv-feature">‚úó Single point of failure</div>
                </div>
              </div>
              <div class="hv-type hv-horz">
                <div class="hv-type-name">‚ÜîÔ∏è Horizontal</div>
                <div class="hv-visual">
                  <div class="hv-box" style="background:#f97316">üì¶</div>
                  <div class="hv-box" style="background:#f97316">üì¶</div>
                  <div class="hv-box" style="background:#f97316">üì¶</div>
                  <div class="hv-box" style="background:#f97316">üì¶</div>
                </div>
                <div class="hv-features">
                  <div class="hv-feature">‚úì Nearly unlimited scale</div>
                  <div class="hv-feature">‚úì Fault tolerant</div>
                  <div class="hv-feature">‚úó Requires stateless design</div>
                  <div class="hv-feature">‚úó Distributed complexity</div>
                </div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Vertical Scaling</strong> (scale up) adds more power to existing machines - more CPU, RAM, storage. <strong>Horizontal Scaling</strong> (scale out) adds more machines to distribute the load.</p><p>Most systems use a combination, starting vertical then adding horizontal as they grow.</p>`,
        keyPoints: [
          { icon: "‚¨ÜÔ∏è", title: "Vertical", desc: "Bigger machine. Simple but has limits. Best for databases.", color: "#3b82f6" },
          { icon: "‚ÜîÔ∏è", title: "Horizontal", desc: "More machines. Unlimited scale but requires stateless design.", color: "#f97316" },
          { icon: "üí∞", title: "Cost", desc: "Vertical has exponential cost. Horizontal uses commodity hardware.", color: "#22c55e" },
          { icon: "üîß", title: "Complexity", desc: "Horizontal adds distributed systems challenges (consistency, coordination).", color: "#ef4444" }
        ],
        formula: "Capacity = Machines √ó Performance per Machine",
        strategies: [
          { title: "Start Vertical", desc: "Scale up first - simpler and faster. Move to horizontal when needed." },
          { title: "Design for Horizontal", desc: "Build stateless services from the start for easy horizontal scaling." },
          { title: "Hybrid Approach", desc: "Use large instances for databases, many small for stateless services." },
          { title: "Auto-scaling", desc: "Horizontal enables elastic scaling based on demand." }
        ],
        metrics: [
          { level: "Vertical", downtime: "Minutes (upgrade)", useCase: "Databases, simple apps" },
          { level: "Horizontal", downtime: "Zero (add nodes)", useCase: "Web servers, APIs" },
          { level: "Hybrid", downtime: "Depends", useCase: "Most production systems" },
          { level: "Serverless", downtime: "Automatic", useCase: "Event-driven workloads" }
        ]
      },
      "stateless-services": {
        title: "Stateless Services",
        subtitle: "Designing services that don't store client state between requests.",
        badge: { text: "Scalability", color: "#f97316", bg: "rgba(249, 115, 22, 0.15)" },
        color: "#f97316",
        diagram: `
          <style>
            .ss-viz { display: flex; flex-direction: column; gap: 24px; }
            .ss-compare { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
            .ss-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 180px; text-align: center; }
            .ss-type-name { font-weight: 600; font-size: 1rem; margin-bottom: 12px; }
            .ss-visual { font-size: 2rem; margin-bottom: 8px; }
            .ss-desc { font-size: 0.75rem; color: #a0a0b0; }
            .ss-stateful { border: 1px solid rgba(239, 68, 68, 0.3); }
            .ss-stateful .ss-type-name { color: #ef4444; }
            .ss-stateless { border: 1px solid rgba(34, 197, 94, 0.3); }
            .ss-stateless .ss-type-name { color: #22c55e; }
            .ss-where { background: rgba(249, 115, 22, 0.1); border-radius: 12px; padding: 16px; }
            .ss-where-title { font-weight: 600; color: #f97316; margin-bottom: 12px; text-align: center; }
            .ss-stores { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .ss-store { background: rgba(30, 35, 50, 0.8); padding: 10px 16px; border-radius: 6px; font-size: 0.8rem; color: #e5e5e5; }
          </style>
          <div class="ss-viz">
            <div class="ss-compare">
              <div class="ss-type ss-stateful">
                <div class="ss-type-name">‚ùå Stateful</div>
                <div class="ss-visual">üñ•Ô∏èüíæ</div>
                <div class="ss-desc">Server stores session data. Sticky sessions needed. Hard to scale.</div>
              </div>
              <div class="ss-type ss-stateless">
                <div class="ss-type-name">‚úì Stateless</div>
                <div class="ss-visual">üñ•Ô∏è</div>
                <div class="ss-desc">No server state. Any instance handles any request. Easy to scale.</div>
              </div>
            </div>
            <div class="ss-where">
              <div class="ss-where-title">üì¶ Where to Store State</div>
              <div class="ss-stores">
                <div class="ss-store">üóÑÔ∏è Database</div>
                <div class="ss-store">üìÆ Redis</div>
                <div class="ss-store">üç™ Client (JWT)</div>
                <div class="ss-store">‚òÅÔ∏è Object Storage</div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Stateless Services</strong> don't store client session data between requests. Each request contains all information needed to process it, or state is stored externally.</p><p>Statelessness enables horizontal scaling, load balancing, and fault tolerance.</p>`,
        keyPoints: [
          { icon: "üì¶", title: "External State", desc: "Move state to databases, Redis, or client-side (JWT).", color: "#f97316" },
          { icon: "‚ÜîÔ∏è", title: "Any Instance", desc: "Any server can handle any request. No sticky sessions.", color: "#22c55e" },
          { icon: "üîÑ", title: "Easy Scaling", desc: "Add/remove instances freely. No session migration.", color: "#3b82f6" },
          { icon: "üí™", title: "Resilience", desc: "Instance failure doesn't lose user sessions.", color: "#8b5cf6" }
        ],
        formula: "Stateless = All State in Request or External Store",
        strategies: [
          { title: "Use JWTs", desc: "Client-side tokens contain user identity, no server lookup needed." },
          { title: "Redis for Sessions", desc: "Centralized session store accessible by all instances." },
          { title: "Database for Persistence", desc: "Durable state in database, cache for performance." },
          { title: "Avoid Local Files", desc: "Use object storage (S3) for file uploads, not local disk." }
        ],
        metrics: [
          { level: "JWT Tokens", downtime: "Client-side auth", useCase: "Authentication" },
          { level: "Redis Sessions", downtime: "Shared session store", useCase: "Web sessions" },
          { level: "Database", downtime: "Persistent state", useCase: "User data" },
          { level: "Object Storage", downtime: "S3, GCS", useCase: "File uploads" }
        ]
      },
      "read-replicas": {
        title: "Read Replicas",
        subtitle: "Scaling read-heavy workloads by replicating data to multiple nodes.",
        badge: { text: "Scalability", color: "#f97316", bg: "rgba(249, 115, 22, 0.15)" },
        color: "#f97316",
        diagram: `
          <style>
            .rr-viz { display: flex; flex-direction: column; gap: 24px; }
            .rr-arch { background: rgba(249, 115, 22, 0.1); border-radius: 12px; padding: 20px; }
            .rr-title { font-size: 0.85rem; color: #f97316; margin-bottom: 16px; font-weight: 600; text-align: center; }
            .rr-nodes { display: flex; align-items: flex-start; justify-content: center; gap: 24px; flex-wrap: wrap; }
            .rr-primary { text-align: center; }
            .rr-db { background: rgba(30, 35, 50, 0.8); border: 2px solid; border-radius: 10px; padding: 14px 20px; font-weight: 600; }
            .rr-db-icon { font-size: 1.5rem; margin-bottom: 4px; }
            .rr-primary .rr-db { border-color: #f97316; color: #f97316; }
            .rr-replica .rr-db { border-color: #3b82f6; color: #3b82f6; }
            .rr-label { font-size: 0.7rem; color: #a0a0b0; margin-top: 4px; }
            .rr-replicas { display: flex; gap: 12px; flex-wrap: wrap; }
            .rr-replica { text-align: center; }
            .rr-arrow { font-size: 1.5rem; color: #f97316; align-self: center; }
            .rr-ops { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
            .rr-op { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 8px; padding: 12px 20px; text-align: center; }
            .rr-op-type { font-weight: 600; font-size: 0.9rem; margin-bottom: 4px; }
            .rr-op-target { font-size: 0.75rem; color: #a0a0b0; }
          </style>
          <div class="rr-viz">
            <div class="rr-arch">
              <div class="rr-title">üìö Read Replica Architecture</div>
              <div class="rr-nodes">
                <div class="rr-primary"><div class="rr-db"><div class="rr-db-icon">üóÑÔ∏è</div>Primary</div><div class="rr-label">Writes</div></div>
                <span class="rr-arrow">‚Üí replication ‚Üí</span>
                <div class="rr-replicas">
                  <div class="rr-replica"><div class="rr-db"><div class="rr-db-icon">üìñ</div>Replica 1</div><div class="rr-label">Reads</div></div>
                  <div class="rr-replica"><div class="rr-db"><div class="rr-db-icon">üìñ</div>Replica 2</div><div class="rr-label">Reads</div></div>
                  <div class="rr-replica"><div class="rr-db"><div class="rr-db-icon">üìñ</div>Replica 3</div><div class="rr-label">Reads</div></div>
                </div>
              </div>
            </div>
            <div class="rr-ops">
              <div class="rr-op"><div class="rr-op-type" style="color:#f97316">‚úçÔ∏è Writes</div><div class="rr-op-target">‚Üí Primary only</div></div>
              <div class="rr-op"><div class="rr-op-type" style="color:#3b82f6">üìñ Reads</div><div class="rr-op-target">‚Üí Any replica</div></div>
            </div>
          </div>
        `,
        definition: `<p><strong>Read Replicas</strong> are copies of the primary database that handle read queries. Writes go to the primary and are asynchronously replicated to replicas.</p><p>This scales read capacity linearly while introducing eventual consistency.</p>`,
        keyPoints: [
          { icon: "üìñ", title: "Read Scaling", desc: "Distribute reads across replicas. Linear read capacity increase.", color: "#f97316" },
          { icon: "‚úçÔ∏è", title: "Write to Primary", desc: "All writes go to primary. Single source of truth.", color: "#3b82f6" },
          { icon: "‚è±Ô∏è", title: "Replication Lag", desc: "Replicas may be slightly behind. Eventual consistency.", color: "#f59e0b" },
          { icon: "üîÑ", title: "Failover", desc: "Replica can be promoted to primary if primary fails.", color: "#22c55e" }
        ],
        formula: "Read Capacity = Primary + (N √ó Replica Capacity)",
        strategies: [
          { title: "Route by Query Type", desc: "Writes to primary, reads to replicas. Use connection routing." },
          { title: "Handle Replication Lag", desc: "Read-after-write consistency: read from primary after writes." },
          { title: "Use for Analytics", desc: "Heavy analytics queries on replica to avoid impacting primary." },
          { title: "Geographic Replicas", desc: "Replicas in different regions reduce read latency globally." }
        ],
        metrics: [
          { level: "Async Replication", downtime: "Milliseconds lag", useCase: "Most use cases" },
          { level: "Sync Replication", downtime: "Zero lag", useCase: "Critical consistency" },
          { level: "Cross-Region", downtime: "Seconds lag", useCase: "Geographic distribution" },
          { level: "Read-After-Write", downtime: "Primary fallback", useCase: "User's own data" }
        ]
      },
      "write-amplification": {
        title: "Write Amplification",
        subtitle: "Understanding how writes multiply across indexes and replicas.",
        badge: { text: "Scalability", color: "#f97316", bg: "rgba(249, 115, 22, 0.15)" },
        color: "#f97316",
        diagram: `
          <style>
            .wa-viz { display: flex; flex-direction: column; gap: 24px; }
            .wa-flow { background: rgba(249, 115, 22, 0.1); border-radius: 12px; padding: 20px; }
            .wa-title { font-size: 0.85rem; color: #f97316; margin-bottom: 16px; font-weight: 600; text-align: center; }
            .wa-chain { display: flex; align-items: center; gap: 8px; justify-content: center; flex-wrap: wrap; }
            .wa-item { background: rgba(30, 35, 50, 0.8); border: 1px solid rgba(249, 115, 22, 0.3); border-radius: 8px; padding: 10px 14px; text-align: center; }
            .wa-item-count { font-size: 1.2rem; font-weight: 700; color: #f97316; }
            .wa-item-label { font-size: 0.7rem; color: #a0a0b0; }
            .wa-arrow { color: #f97316; font-size: 1.2rem; }
            .wa-result { background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; border-radius: 8px; padding: 12px 20px; text-align: center; }
            .wa-result-count { font-size: 1.5rem; font-weight: 700; color: #ef4444; }
            .wa-result-label { font-size: 0.8rem; color: #ef4444; }
          </style>
          <div class="wa-viz">
            <div class="wa-flow">
              <div class="wa-title">üìù Write Amplification Example</div>
              <div class="wa-chain">
                <div class="wa-item"><div class="wa-item-count">1</div><div class="wa-item-label">User Write</div></div>
                <span class="wa-arrow">√ó</span>
                <div class="wa-item"><div class="wa-item-count">5</div><div class="wa-item-label">Indexes</div></div>
                <span class="wa-arrow">√ó</span>
                <div class="wa-item"><div class="wa-item-count">3</div><div class="wa-item-label">Replicas</div></div>
                <span class="wa-arrow">=</span>
                <div class="wa-result"><div class="wa-result-count">15</div><div class="wa-result-label">Actual Writes</div></div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Write Amplification</strong> occurs when a single logical write results in multiple physical writes - to indexes, replicas, WAL, compaction. It affects storage efficiency and write throughput.</p><p>Understanding amplification helps design efficient schemas and choose appropriate databases.</p>`,
        keyPoints: [
          { icon: "üìá", title: "Indexes", desc: "Each index needs updating on write. More indexes = more writes.", color: "#f97316" },
          { icon: "üìã", title: "Replication", desc: "Each replica receives the write. N replicas = N writes.", color: "#3b82f6" },
          { icon: "üìù", title: "WAL/Journaling", desc: "Write-ahead log adds writes for durability.", color: "#f59e0b" },
          { icon: "üîÑ", title: "Compaction", desc: "LSM trees amplify writes during compaction.", color: "#8b5cf6" }
        ],
        formula: "Amplification = Physical Writes / Logical Writes",
        strategies: [
          { title: "Minimize Indexes", desc: "Only create indexes that are actually used by queries." },
          { title: "Batch Writes", desc: "Combine multiple writes to amortize overhead." },
          { title: "Choose DB Wisely", desc: "B-trees vs LSM-trees have different amplification patterns." },
          { title: "Monitor Write IOPS", desc: "Track actual disk writes vs application writes." }
        ],
        metrics: [
          { level: "B-Tree", downtime: "Lower amplification", useCase: "Read-heavy workloads" },
          { level: "LSM-Tree", downtime: "Higher amplification", useCase: "Write-heavy workloads" },
          { level: "Per Index", downtime: "1x per index", useCase: "Schema design" },
          { level: "Per Replica", downtime: "1x per replica", useCase: "Replication config" }
        ]
      },
      "hotspot-avoidance": {
        title: "Hotspot Avoidance",
        subtitle: "Preventing uneven load distribution that overwhelms specific nodes.",
        badge: { text: "Scalability", color: "#f97316", bg: "rgba(249, 115, 22, 0.15)" },
        color: "#f97316",
        diagram: `
          <style>
            .ha-viz { display: flex; flex-direction: column; gap: 24px; }
            .ha-compare { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
            .ha-dist { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border-radius: 12px; padding: 16px; width: 200px; }
            .ha-dist-title { font-weight: 600; font-size: 0.9rem; margin-bottom: 12px; text-align: center; }
            .ha-bars { display: flex; align-items: flex-end; gap: 6px; height: 80px; justify-content: center; }
            .ha-bar { width: 30px; border-radius: 4px 4px 0 0; }
            .ha-bad { border: 1px solid rgba(239, 68, 68, 0.3); }
            .ha-bad .ha-dist-title { color: #ef4444; }
            .ha-good { border: 1px solid rgba(34, 197, 94, 0.3); }
            .ha-good .ha-dist-title { color: #22c55e; }
            .ha-causes { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; }
            .ha-cause { background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 8px; padding: 10px 14px; font-size: 0.75rem; color: #ef4444; text-align: center; width: 120px; }
          </style>
          <div class="ha-viz">
            <div class="ha-compare">
              <div class="ha-dist ha-bad">
                <div class="ha-dist-title">‚ùå Hotspot</div>
                <div class="ha-bars">
                  <div class="ha-bar" style="height:20%;background:#6b7280"></div>
                  <div class="ha-bar" style="height:15%;background:#6b7280"></div>
                  <div class="ha-bar" style="height:100%;background:#ef4444"></div>
                  <div class="ha-bar" style="height:10%;background:#6b7280"></div>
                  <div class="ha-bar" style="height:18%;background:#6b7280"></div>
                </div>
              </div>
              <div class="ha-dist ha-good">
                <div class="ha-dist-title">‚úì Balanced</div>
                <div class="ha-bars">
                  <div class="ha-bar" style="height:55%;background:#22c55e"></div>
                  <div class="ha-bar" style="height:48%;background:#22c55e"></div>
                  <div class="ha-bar" style="height:52%;background:#22c55e"></div>
                  <div class="ha-bar" style="height:50%;background:#22c55e"></div>
                  <div class="ha-bar" style="height:45%;background:#22c55e"></div>
                </div>
              </div>
            </div>
            <div class="ha-causes">
              <div class="ha-cause">Sequential IDs</div>
              <div class="ha-cause">Popular Keys</div>
              <div class="ha-cause">Time-based</div>
              <div class="ha-cause">Bad Hashing</div>
            </div>
          </div>
        `,
        definition: `<p><strong>Hotspots</strong> occur when load concentrates on specific partitions or nodes, causing them to become bottlenecks while others sit idle. This negates the benefits of horizontal scaling.</p><p>Common causes include sequential IDs, celebrity users, and time-based partitioning.</p>`,
        keyPoints: [
          { icon: "üîë", title: "Key Design", desc: "Sequential IDs cause all new writes to hit same partition.", color: "#ef4444" },
          { icon: "‚≠ê", title: "Celebrity Problem", desc: "Popular users/items create hot partitions.", color: "#f59e0b" },
          { icon: "üé≤", title: "Random Distribution", desc: "UUID keys distribute evenly but lose ordering.", color: "#22c55e" },
          { icon: "üîÑ", title: "Salting", desc: "Add random prefix to spread hot keys across partitions.", color: "#3b82f6" }
        ],
        formula: "Hot Partition = Max Load / Average Load",
        strategies: [
          { title: "Use UUIDs or Hashed Keys", desc: "Random distribution prevents sequential hotspots." },
          { title: "Salt Hot Keys", desc: "Add random suffix to celebrity user IDs to spread load." },
          { title: "Time-Based Partitions", desc: "Use consistent hashing, not pure time-based partitions." },
          { title: "Monitor Partition Metrics", desc: "Track per-partition load to detect hotspots early." }
        ],
        metrics: [
          { level: "Sequential ID", downtime: "Creates hotspots", useCase: "Avoid for partitioning" },
          { level: "UUID", downtime: "Even distribution", useCase: "Random access" },
          { level: "Hash(key)", downtime: "Predictable spread", useCase: "Consistent hashing" },
          { level: "Salted Key", downtime: "Spread hot keys", useCase: "Celebrity problem" }
        ]
      },
      "traffic-shaping": {
        title: "Traffic Shaping",
        subtitle: "Controlling the rate and priority of network traffic.",
        badge: { text: "Scalability", color: "#f97316", bg: "rgba(249, 115, 22, 0.15)" },
        color: "#f97316",
        diagram: `
          <style>
            .ts-viz { display: flex; flex-direction: column; gap: 24px; }
            .ts-compare { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
            .ts-type { background: linear-gradient(145deg, rgba(20, 25, 40, 0.8), rgba(15, 20, 35, 0.9)); border: 1px solid rgba(249, 115, 22, 0.3); border-radius: 12px; padding: 16px; width: 160px; text-align: center; }
            .ts-type-icon { font-size: 2rem; margin-bottom: 8px; }
            .ts-type-name { font-weight: 600; color: #f97316; font-size: 0.95rem; margin-bottom: 4px; }
            .ts-type-desc { font-size: 0.7rem; color: #a0a0b0; }
            .ts-flow { background: rgba(249, 115, 22, 0.1); border-radius: 12px; padding: 16px; }
            .ts-flow-title { font-weight: 600; color: #f97316; margin-bottom: 12px; text-align: center; }
            .ts-flow-visual { display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap; }
            .ts-flow-item { padding: 10px 16px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; }
          </style>
          <div class="ts-viz">
            <div class="ts-compare">
              <div class="ts-type"><div class="ts-type-icon">üö¶</div><div class="ts-type-name">Rate Limiting</div><div class="ts-type-desc">Cap requests per time window</div></div>
              <div class="ts-type"><div class="ts-type-icon">‚è≥</div><div class="ts-type-name">Throttling</div><div class="ts-type-desc">Slow down excess traffic</div></div>
              <div class="ts-type"><div class="ts-type-icon">‚≠ê</div><div class="ts-type-name">Prioritization</div><div class="ts-type-desc">VIP traffic first</div></div>
            </div>
            <div class="ts-flow">
              <div class="ts-flow-title">üîÄ Traffic Flow Control</div>
              <div class="ts-flow-visual">
                <div class="ts-flow-item" style="background:#ef4444;color:white">Burst üåä</div>
                <span style="color:#f97316">‚Üí</span>
                <div class="ts-flow-item" style="background:#f97316;color:white">Queue/Shape</div>
                <span style="color:#f97316">‚Üí</span>
                <div class="ts-flow-item" style="background:#22c55e;color:white">Smooth Flow ~~~</div>
              </div>
            </div>
          </div>
        `,
        definition: `<p><strong>Traffic Shaping</strong> controls the volume and rate of traffic to protect systems from overload. It smooths bursts, prioritizes important traffic, and ensures fair resource allocation.</p><p>Techniques include rate limiting, queuing, prioritization, and load shedding.</p>`,
        keyPoints: [
          { icon: "üö¶", title: "Rate Limiting", desc: "Hard cap on requests per time window. Reject excess.", color: "#f97316" },
          { icon: "‚è≥", title: "Traffic Smoothing", desc: "Queue and delay bursts to create steady flow.", color: "#3b82f6" },
          { icon: "‚≠ê", title: "Priority Queues", desc: "Process VIP/critical traffic before best-effort.", color: "#22c55e" },
          { icon: "üóëÔ∏è", title: "Load Shedding", desc: "Drop low-priority traffic during overload.", color: "#ef4444" }
        ],
        formula: "Shaped Output = min(Input Rate, Capacity) with Queuing",
        strategies: [
          { title: "Tiered Limits", desc: "Different rate limits for different user tiers (free, paid, enterprise)." },
          { title: "Priority Lanes", desc: "Separate queues for critical operations (auth, payments) vs bulk." },
          { title: "Backpressure", desc: "Signal to callers to slow down when approaching limits." },
          { title: "Circuit Breakers", desc: "Stop sending traffic to failing dependencies." }
        ],
        metrics: [
          { level: "Token Bucket", downtime: "Smooth bursts", useCase: "API rate limiting" },
          { level: "Leaky Bucket", downtime: "Constant rate", useCase: "Traffic smoothing" },
          { level: "Priority Queue", downtime: "Tiered processing", useCase: "QoS" },
          { level: "Load Shedding", downtime: "Drop low priority", useCase: "Overload protection" }
        ]
      }
    };

    // Toggle category expansion
    function toggleCategory(category) {
      category.classList.toggle('expanded');
    }

    // Show concept detail
    function showConcept(conceptId) {
      const concept = concepts[conceptId];
      if (!concept) return;

      // Update active states
      document.querySelectorAll('.concept-item').forEach(item => item.classList.remove('active'));
      document.querySelector(`[data-concept="${conceptId}"]`).classList.add('active');

      // Hide welcome state
      document.getElementById('welcomeState').style.display = 'none';

      // Generate content
      const container = document.getElementById('conceptContainer');
      container.innerHTML = `
        <div class="concept-detail active">
          <div class="concept-header">
            <div class="concept-badge" style="background: ${concept.badge.bg}; color: ${concept.badge.color};">
              <span>‚óè</span> ${concept.badge.text}
            </div>
            <h1 class="concept-title" style="background: linear-gradient(135deg, ${concept.color}, #ffffff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">${concept.title}</h1>
            <p class="concept-subtitle">${concept.subtitle}</p>
          </div>

          <div class="visual-diagram">
            <div class="diagram-title">Visual Overview</div>
            <div class="diagram-content">
              ${concept.diagram}
            </div>
          </div>

          <div class="section">
            <h3 class="section-title">
              <span class="icon" style="background: linear-gradient(135deg, ${concept.color}, ${concept.color}88);">üìñ</span>
              Definition
            </h3>
            <div class="section-content">
              ${concept.definition}
            </div>
          </div>

          <div class="formula-box">
            <div class="formula-label">Key Formula / Concept</div>
            <div class="formula">${concept.formula}</div>
          </div>

          <div class="section">
            <h3 class="section-title">
              <span class="icon" style="background: linear-gradient(135deg, #10b981, #059669);">üí°</span>
              Key Characteristics
            </h3>
            <div class="key-points">
              ${concept.keyPoints.map(point => `
                <div class="key-point">
                  <div class="key-point-icon" style="background: ${point.color}22; color: ${point.color};">${point.icon}</div>
                  <h4>${point.title}</h4>
                  <p>${point.desc}</p>
                </div>
              `).join('')}
            </div>
          </div>

          <div class="section">
            <h3 class="section-title">
              <span class="icon" style="background: linear-gradient(135deg, #8b5cf6, #6d28d9);">üéØ</span>
              How to Achieve It
            </h3>
            <ul class="strategies-list">
              ${concept.strategies.map((strategy, i) => `
                <li class="strategy-item">
                  <div class="strategy-number">${i + 1}</div>
                  <div class="strategy-content">
                    <h4>${strategy.title}</h4>
                    <p>${strategy.desc}</p>
                  </div>
                </li>
              `).join('')}
            </ul>
          </div>

          <div class="section">
            <h3 class="section-title">
              <span class="icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">üìä</span>
              Reference Table
            </h3>
            <table class="metrics-table">
              <thead>
                <tr>
                  <th>Level / Type</th>
                  <th>Details</th>
                  <th>Use Case</th>
                </tr>
              </thead>
              <tbody>
                ${concept.metrics.map(metric => `
                  <tr>
                    <td><span class="metric-value">${metric.level}</span></td>
                    <td>${metric.downtime}</td>
                    <td>${metric.useCase}</td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          </div>
        </div>
      `;
    }

    // Filter concepts
    function filterConcepts() {
      const query = document.getElementById('searchInput').value.toLowerCase();
      document.querySelectorAll('.concept-item').forEach(item => {
        const text = item.textContent.toLowerCase();
        item.style.display = text.includes(query) ? 'flex' : 'none';
      });
      
      // Expand categories with matching items
      document.querySelectorAll('.category').forEach(cat => {
        const hasVisible = Array.from(cat.querySelectorAll('.concept-item')).some(item => item.style.display !== 'none');
        if (query && hasVisible) {
          cat.classList.add('expanded');
        }
      });
    }

    // Initialize - show first concept on load
    document.addEventListener('DOMContentLoaded', () => {
      // Optional: show first concept by default
      // showConcept('availability');
    });
  </script>
</body>
</html>

